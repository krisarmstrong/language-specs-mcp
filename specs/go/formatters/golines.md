This repository was archived by the owner on Dec 19, 2025. It is now read-only. [segmentio](/segmentio)/[golines](/segmentio/golines)Public archive

- [Notifications](/login?return_to=%2Fsegmentio%2Fgolines)You must be signed in to change notification settings
- [Fork
    75](/login?return_to=%2Fsegmentio%2Fgolines)
- [Star
          1.1k](/login?return_to=%2Fsegmentio%2Fgolines)

 A golang formatter that fixes long lines 

### License

[MIT license](/segmentio/golines/blob/master/LICENSE)[1.1k
          stars](/segmentio/golines/stargazers)[75
          forks](/segmentio/golines/forks)[Branches](/segmentio/golines/branches)[Tags](/segmentio/golines/tags)[Activity](/segmentio/golines/activity)[Star](/login?return_to=%2Fsegmentio%2Fgolines)[Notifications](/login?return_to=%2Fsegmentio%2Fgolines)You must be signed in to change notification settings

- [Code](/segmentio/golines)
- [Issues
          58](/segmentio/golines/issues)
- [Pull requests
          17](/segmentio/golines/pulls)
- [Actions](/segmentio/golines/actions)
- [Projects
          0](/segmentio/golines/projects)
- 

### 

[Security
          
  
  
    
  
    
      

              Uh oh!

              There was an error while loading. Please reload this page](/segmentio/golines/security).

- [Insights](/segmentio/golines/pulse)

Additional navigation options

- [Code](/segmentio/golines)
- [Issues](/segmentio/golines/issues)
- [Pull requests](/segmentio/golines/pulls)
- [Actions](/segmentio/golines/actions)
- [Projects](/segmentio/golines/projects)
- [Security](/segmentio/golines/security)
- [Insights](/segmentio/golines/pulse)

# segmentio/golines
Version: 0.13.0

Source: https://github.com/segmentio/golines


master[Branches](/segmentio/golines/branches)[Tags](/segmentio/golines/tags)/segmentio/golines/branches/segmentio/golines/tagsGo to fileCodeOpen more actions menu

## Folders and files

NameNameLast commit messageLast commit date

## Latest commit

## History

[77 Commits](/segmentio/golines/commits/master/)/segmentio/golines/commits/master/[.github/workflows](/segmentio/golines/tree/master/.github/workflows)[.github/workflows](/segmentio/golines/tree/master/.github/workflows)[_fixtures](/segmentio/golines/tree/master/_fixtures)[_fixtures](/segmentio/golines/tree/master/_fixtures)[generate](/segmentio/golines/tree/master/generate)[generate](/segmentio/golines/tree/master/generate)[.gitattributes](/segmentio/golines/blob/master/.gitattributes)[.gitattributes](/segmentio/golines/blob/master/.gitattributes)[.gitignore](/segmentio/golines/blob/master/.gitignore)[.gitignore](/segmentio/golines/blob/master/.gitignore)[.golangci.yml](/segmentio/golines/blob/master/.golangci.yml)[.golangci.yml](/segmentio/golines/blob/master/.golangci.yml)[.goreleaser.yaml](/segmentio/golines/blob/master/.goreleaser.yaml)[.goreleaser.yaml](/segmentio/golines/blob/master/.goreleaser.yaml)[.pre-commit-hooks.yaml](/segmentio/golines/blob/master/.pre-commit-hooks.yaml)[.pre-commit-hooks.yaml](/segmentio/golines/blob/master/.pre-commit-hooks.yaml)[LICENSE](/segmentio/golines/blob/master/LICENSE)[LICENSE](/segmentio/golines/blob/master/LICENSE)[Makefile](/segmentio/golines/blob/master/Makefile)[Makefile](/segmentio/golines/blob/master/Makefile)[README.md](/segmentio/golines/blob/master/README.md)[README.md](/segmentio/golines/blob/master/README.md)[annotation.go](/segmentio/golines/blob/master/annotation.go)[annotation.go](/segmentio/golines/blob/master/annotation.go)[annotation_test.go](/segmentio/golines/blob/master/annotation_test.go)[annotation_test.go](/segmentio/golines/blob/master/annotation_test.go)[diff.go](/segmentio/golines/blob/master/diff.go)[diff.go](/segmentio/golines/blob/master/diff.go)[diff_test.go](/segmentio/golines/blob/master/diff_test.go)[diff_test.go](/segmentio/golines/blob/master/diff_test.go)[doc.go](/segmentio/golines/blob/master/doc.go)[doc.go](/segmentio/golines/blob/master/doc.go)[go.mod](/segmentio/golines/blob/master/go.mod)[go.mod](/segmentio/golines/blob/master/go.mod)[go.sum](/segmentio/golines/blob/master/go.sum)[go.sum](/segmentio/golines/blob/master/go.sum)[graph.go](/segmentio/golines/blob/master/graph.go)[graph.go](/segmentio/golines/blob/master/graph.go)[graph_generated.go](/segmentio/golines/blob/master/graph_generated.go)[graph_generated.go](/segmentio/golines/blob/master/graph_generated.go)[graph_test.go](/segmentio/golines/blob/master/graph_test.go)[graph_test.go](/segmentio/golines/blob/master/graph_test.go)[main.go](/segmentio/golines/blob/master/main.go)[main.go](/segmentio/golines/blob/master/main.go)[main_test.go](/segmentio/golines/blob/master/main_test.go)[main_test.go](/segmentio/golines/blob/master/main_test.go)[shortener.go](/segmentio/golines/blob/master/shortener.go)[shortener.go](/segmentio/golines/blob/master/shortener.go)[shortener_test.go](/segmentio/golines/blob/master/shortener_test.go)[shortener_test.go](/segmentio/golines/blob/master/shortener_test.go)[tags.go](/segmentio/golines/blob/master/tags.go)[tags.go](/segmentio/golines/blob/master/tags.go)[tags_test.go](/segmentio/golines/blob/master/tags_test.go)[tags_test.go](/segmentio/golines/blob/master/tags_test.go)View all files

## Repository files navigation

- [README](#)
- [MIT license](#)

https://github.com/segmentio/golines/actions/workflows/test.ymlhttps://goreportcard.com/report/github.com/segmentio/golineshttps://godoc.org/github.com/segmentio/golines

# golines

#golines

Golines is a Go code formatter that shortens long lines, in addition to all of the formatting fixes done by [gofmt](https://golang.org/cmd/gofmt/).

## Maintenance & Archiving

#maintenance--archiving

Important

As of late 2024, [segmentio/golines](https://github.com/segmentio/golines/) has functionally been in maintenance mode and several dependencies appear to be similarly unmaintained.

As of 2025-12-19, this repository [has been archived](https://docs.github.com/en/repositories/archiving-a-github-repository/archiving-repositories). At the time this repo was archived, the maintainers of golangci-lint [maintain a fork](https://github.com/golangci/golines/) that incorporates several patches and fixes. This project is unaffiliated with Twilio Segment.

The original code will remain available and the terms of the license will not be changed.

## Motivation

#motivation

The standard Go formatting tools (`gofmt`, `goimports`, etc.) are great, but [deliberately don't shorten long lines](https://github.com/golang/go/issues/11915); instead, this is an activity left to developers.

While there are different tastes when it comes to line lengths in go, we've generally found that very long lines are more difficult to read than their shortened alternatives. As an example:

```
myMap := map[string]string{"first key": "first value", "second key": "second value", "third key": "third value", "fourth key": "fourth value", "fifth key": "fifth value"}
```

vs.

```
myMap := map[string]string{
	"first key": "first value",
	"second key": "second value",
	"third key": "third value",
	"fourth key": "fourth value",
	"fifth key": "fifth value",
}
```

We built `golines` to give Go developers the option to automatically shorten long lines, like the one above, according to their preferences.

More background and technical details are available in [this blog post](https://yolken.net/blog/cleaner-go-code-golines).

## Examples

#examples

See this [before](/segmentio/golines/blob/master/_fixtures/end_to_end.go) and [after](/segmentio/golines/blob/master/_fixtures/end_to_end__exp.go) view of a file with very long lines. More example pairs can be found in the [_fixtures](/segmentio/golines/blob/master/_fixtures) directory.

## Version support

#version-support

Since v0.10.0, releases of `golines` have required at least Go 1.18 due to generics-related dependencies. As of v0.13.0, `golines` requires a minimum of Go 1.23 due to transitive requirements introduced by dependencies.

Generally, the [minimum version](https://go.dev/ref/mod#go-mod-file-go) in [go.mod](/segmentio/golines/blob/master/go.mod) is the absolute minimum required version of Go for any given version of `golines.`

If you need to use `golines` with an older version of go, install the tool from the `v0.9.x` or `v0.12.x` releases.

## Usage

#usage

First, install the tool. If you're using Go 1.21 or newer, run:

```
go install github.com/segmentio/golines@latest
```

Otherwise, for older Go versions, run:

```
go install github.com/segmentio/golines@v0.9.0
```

Then, run:

```
golines [paths to format]
```

The paths can be either directories or individual files. If no paths are provided, then input is taken from `stdin` (as with `gofmt`).

By default, the results are printed to `stdout`. To overwrite the existing files in place, use the `-w` flag.

## Options

#options

Some other options are described in the sections below. Run `golines --help` to see all available flags and settings.

### Line length settings

#line-length-settings

By default, the tool tries to shorten lines that are longer than 100 columns and assumes that 1 tab = 4 columns. The latter can be changed via the `-m` and `-t` flags respectively.

#### Dry-run mode

#dry-run-mode

Running the tool with the `--dry-run` flag will show pretty, git-style diffs.

#### Comment shortening

#comment-shortening

Shortening long comment lines is harder than shortening code because comments can have arbitrary structure and format. `golines` includes some basic logic for shortening single-line (i.e., `//`-prefixed) comments, but this is turned off by default since the quality isn't great. To enable this feature anyway, run with the `--shorten-comments` flag.

#### Custom formatters

#custom-formatters

By default, the tool will use [goimports](https://godoc.org/golang.org/x/tools/cmd/goimports) as the base formatter (if found), otherwise it will revert to `gofmt`. An explicit formatter can be set via the `--base-formatter` flag; the command provided here should accept its input via `stdin` and write its output to `stdout`.

#### Generated files

#generated-files

By default, the tool will not format any files that look like they're generated. If you want to reformat these too, run with the flag `--ignore-generated=false`.

#### Chained method splitting

#chained-method-splitting

There are several possible ways to split lines that are part of [method chains](https://en.wikipedia.org/wiki/Method_chaining). The original approach taken by `golines` was to split on the args, e.g.:

```
myObj.Method(
	arg1,
	arg2,
	arg3,
).AnotherMethod(
	arg1,
	arg2,
).AThirdMethod(
	arg1,
	arg2,
)
```

Starting in version 0.3.0, the tool now splits on the dots by default, e.g.:

```
myObj.Method(arg1, arg2, arg3).
	AnotherMethod(arg1, arg2).
	AThirdMethod(arg1, arg2)
```

The original behavior can be used by running the tool with the `--no-chain-split-dots` flag.

#### Struct tag reformatting

#struct-tag-reformatting

In addition to shortening long lines, the tool also aligns struct tag keys; see the associated [before](/segmentio/golines/blob/master/_fixtures/struct_tags.go) and [after](/segmentio/golines/blob/master/_fixtures/struct_tags__exp.go) examples in the `_fixtures` directory. To turn this behavior off, run with `--no-reformat-tags`.

## Developer Tooling Integration

#developer-tooling-integration

### vim-go

#vim-go

Add the following lines to your vimrc, substituting `128` with your preferred line length:

```
let g:go_fmt_command = "golines"
let g:go_fmt_options = {
    \ 'golines': '-m 128',
    \ }
```

### Visual Studio Code

#visual-studio-code

1. Install the [Run on Save](https://marketplace.visualstudio.com/items?itemName=emeraldwalk.RunOnSave) extension
2. Go into the VSCode settings menu, scroll down to the section for the "Run on Save" extension, click the "Edit in settings.json" link
3. Set the `emeraldwalk.runonsave` key as follows (adding other flags to the `golines` command as desired):

```
    "emeraldwalk.runonsave": {
        "commands": [
            {
                "match": "\\.go$",
                "cmd": "golines ${file} -w"
            }
        ]
    }
```

1. Save the settings and restart VSCode

### Goland

#goland

1. Go into the Goland settings and click "Tools" -> "File Watchers" then click the plus to create a new file watcher
2. Set the following properties: 

  - Name:`golines`
  - File type:`Go files`
  - Scope:`Project Files`
  - Program:`golines`
  - Arguments:`$FilePath$ -w`
  - Output paths to refresh:`$FilePath$`

3. In the "Advanced Options" section uncheck the Auto-save edited files to trigger the watcher setting
4. Confirm by clicking OK
5. Activate your newly created file watcher in the Goland settings under "Tools" -> "Actions on save"

### Others

#others

Coming soon.

## How It Works

#how-it-works

For each input source file, `golines` runs through the following process:

1. Read the file, break it into lines
2. Add a specially-formatted annotation (comment) to each line that's longer than the configured maximum
3. Use [Dave Brophy's](https://github.com/dave) excellent [decorated syntax tree](https://github.com/dave/dst) library to parse the code plus added annotations
4. Do a depth-first traversal of the resulting tree, looking for nodes that have an annotation on them
5. If a node is part of a line that's too long, shorten it by altering the newlines around the node and/or its children
6. Repeat steps 2-5 until no more shortening can be done
7. Run the base formatter (e.g., `gofmt`) over the results, write these to either `stdout` or the source file

See [this blog post](https://yolken.net/blog/cleaner-go-code-golines) for more technical details.

## Limitations

#limitations

The tool has been tested on a variety of inputs, but it's not perfect. Among other examples, the handling of long lines in comments could be improved. If you see anything particularly egregious, please report via an issue.

## About

 A golang formatter that fixes long lines 

### Resources

[Readme](#readme-ov-file)

### License

[MIT license](#MIT-1-ov-file)

###  Uh oh! 

There was an error while loading. Please reload this page.

[Activity](/segmentio/golines/activity)[Custom properties](/segmentio/golines/custom-properties)

### Stars

[1.1k
        stars](/segmentio/golines/stargazers)

### Watchers

[23
        watching](/segmentio/golines/watchers)

### Forks

[75
        forks](/segmentio/golines/forks)[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fsegmentio%2Fgolines&report=segmentio+%28user%29)

## [Releases
      15](/segmentio/golines/releases)

[v0.13.0
        
          Latest
      
      Aug 21, 2025](/segmentio/golines/releases/tag/v0.13.0)[+ 14 releases](/segmentio/golines/releases)

## [Packages
      0](/orgs/segmentio/packages?repo_name=golines)

 No packages published 

###  Uh oh! 

There was an error while loading. Please reload this page.

## [Contributors
      23](/segmentio/golines/graphs/contributors)

- https://github.com/yolken-segment
- https://github.com/yolken
- https://github.com/mckern
- https://github.com/telemachus
- https://github.com/echarrod
- https://github.com/sjackman
- https://github.com/wdbetts
- https://github.com/urbanyeti
- https://github.com/falzm
- https://github.com/bhavanki
- https://github.com/chenrui333
- https://github.com/asaf-erlich
- https://github.com/kgritesh
- https://github.com/momaek

[+ 9 contributors](/segmentio/golines/graphs/contributors)

## Languages

- [Go
          99.5%](/segmentio/golines/search?l=go)
- [Makefile
          0.5%](/segmentio/golines/search?l=makefile)
