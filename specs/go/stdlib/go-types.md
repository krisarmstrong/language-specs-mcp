proposal: go/types: define identity of package-level Named types in terms of Package.Path equality Â· Issue #57497 Â· golang/go Â· GitHub[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation/[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgolang%2Fgo%2Fissues%2F57497)Appearance settings

- Platform

  - AI CODE CREATION

    - [GitHub CopilotWrite better code with AI](https://github.com/features/copilot)
    - [GitHub SparkBuild and deploy intelligent apps](https://github.com/features/spark)
    - [GitHub ModelsManage and compare prompts](https://github.com/features/models)
    - [MCP RegistryNewIntegrate external tools](https://github.com/mcp)

  - DEVELOPER WORKFLOWS

    - [ActionsAutomate any workflow](https://github.com/features/actions)
    - [CodespacesInstant dev environments](https://github.com/features/codespaces)
    - [IssuesPlan and track work](https://github.com/features/issues)
    - [Code ReviewManage code changes](https://github.com/features/code-review)

  - APPLICATION SECURITY

    - [GitHub Advanced SecurityFind and fix vulnerabilities](https://github.com/security/advanced-security)
    - [Code securitySecure your code as you build](https://github.com/security/advanced-security/code-security)
    - [Secret protectionStop leaks before they start](https://github.com/security/advanced-security/secret-protection)

  - EXPLORE

    - [Why GitHub](https://github.com/why-github)
    - [Documentation](https://docs.github.com)
    - [Blog](https://github.blog)
    - [Changelog](https://github.blog/changelog)
    - [Marketplace](https://github.com/marketplace)

[View all features](https://github.com/features)
- Solutions

  - BY COMPANY SIZE

    - [Enterprises](https://github.com/enterprise)
    - [Small and medium teams](https://github.com/team)
    - [Startups](https://github.com/enterprise/startups)
    - [Nonprofits](https://github.com/solutions/industry/nonprofits)

  - BY USE CASE

    - [App Modernization](https://github.com/solutions/use-case/app-modernization)
    - [DevSecOps](https://github.com/solutions/use-case/devsecops)
    - [DevOps](https://github.com/solutions/use-case/devops)
    - [CI/CD](https://github.com/solutions/use-case/ci-cd)
    - [View all use cases](https://github.com/solutions/use-case)

  - BY INDUSTRY

    - [Healthcare](https://github.com/solutions/industry/healthcare)
    - [Financial services](https://github.com/solutions/industry/financial-services)
    - [Manufacturing](https://github.com/solutions/industry/manufacturing)
    - [Government](https://github.com/solutions/industry/government)
    - [View all industries](https://github.com/solutions/industry)

[View all solutions](https://github.com/solutions)
- Resources

  - EXPLORE BY TOPIC

    - [AI](https://github.com/resources/articles?topic=ai)
    - [Software Development](https://github.com/resources/articles?topic=software-development)
    - [DevOps](https://github.com/resources/articles?topic=devops)
    - [Security](https://github.com/resources/articles?topic=security)
    - [View all topics](https://github.com/resources/articles)

  - EXPLORE BY TYPE

    - [Customer stories](https://github.com/customer-stories)
    - [Events & webinars](https://github.com/resources/events)
    - [Ebooks & reports](https://github.com/resources/whitepapers)
    - [Business insights](https://github.com/solutions/executive-insights)
    - [GitHub Skills](https://skills.github.com)

  - SUPPORT & SERVICES

    - [Documentation](https://docs.github.com)
    - [Customer support](https://support.github.com)
    - [Community forum](https://github.com/orgs/community/discussions)
    - [Trust center](https://github.com/trust-center)
    - [Partners](https://github.com/partners)

- Open Source

  - COMMUNITY

    - [GitHub SponsorsFund open source developers](https://github.com/sponsors)

  - PROGRAMS

    - [Security Lab](https://securitylab.github.com)
    - [Maintainer Community](https://maintainers.github.com)
    - [Accelerator](https://github.com/accelerator)
    - [Archive Program](https://archiveprogram.github.com)

  - REPOSITORIES

    - [Topics](https://github.com/topics)
    - [Trending](https://github.com/trending)
    - [Collections](https://github.com/collections)

- Enterprise

  - ENTERPRISE SOLUTIONS

    - [Enterprise platformAI-powered developer platform](https://github.com/enterprise)

  - AVAILABLE ADD-ONS

    - [GitHub Advanced SecurityEnterprise-grade security features](https://github.com/security/advanced-security)
    - [Copilot for BusinessEnterprise-grade AI features](https://github.com/features/copilot/copilot-business)
    - [Premium SupportEnterprise-grade 24/7 support](https://github.com/premium-support)

- [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

 Search Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

#  Provide feedback 

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted Cancel  Submit feedback 

#  Saved searches 

## Use saved searches to filter your results more quickly

NameQuery

 To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax). 

 Cancel  Create saved search [Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgolang%2Fgo%2Fissues%2F57497)[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=golang%2Fgo)Appearance settingsResetting focusYou signed in with another tab or window. Reload to refresh your session.You signed out in another tab or window. Reload to refresh your session.You switched accounts on another tab or window. Reload to refresh your session.Dismiss alert{{ message }}[golang](/golang)/[go](/golang/go)Public

- [Notifications](/login?return_to=%2Fgolang%2Fgo)You must be signed in to change notification settings
- [Fork
    18.7k](/login?return_to=%2Fgolang%2Fgo)
- [Star
          132k](/login?return_to=%2Fgolang%2Fgo)

- [Code](/golang/go)
- [Issues
          5k+](/golang/go/issues)
- [Pull requests
          366](/golang/go/pulls)
- [Discussions](/golang/go/discussions)
- [Actions](/golang/go/actions)
- [Projects
          5](/golang/go/projects)
- [Wiki](/golang/go/wiki)
- 

### 

[Security
          
  
  
    
  
    
      

              Uh oh!

              There was an error while loading. Please reload this page](/golang/go/security).

- [Insights](/golang/go/pulse)

Additional navigation options

- [Code](/golang/go)
- [Issues](/golang/go/issues)
- [Pull requests](/golang/go/pulls)
- [Discussions](/golang/go/discussions)
- [Actions](/golang/go/actions)
- [Projects](/golang/go/projects)
- [Wiki](/golang/go/wiki)
- [Security](/golang/go/security)
- [Insights](/golang/go/pulse)

# proposal: go/types: define identity of package-level Named types in terms of Package.Path equality#57497

[New issue](/login?return_to=)Copy link[New issue](/login?return_to=)Copy linkOpenOpen[proposal: go/types: define identity of package-level Named types in terms of Package.Path equality](#top)#57497Copy linkLabels[Proposal](https://github.com/golang/go/issues?q=state%3Aopen%20label%3A%22Proposal%22)Milestone[Proposal](https://github.com/golang/go/milestone/30)https://github.com/adonovan

## Description

https://github.com/adonovan[adonovan](https://github.com/adonovan)opened [on Dec 28, 2022](https://github.com/golang/go/issues/57497#issue-1513200470)Issue body actions

(Status: half-baked food for thought.)

Currently, the types.Identity function applied to two *Named types tests that they point to the same variable. This is the classic symbolic programming approach used in compilers since early Lisp days. However it makes for an inflexible library package interface because it requires that all possible pairs of Named types that might need to be compared for equality belong to the same "realm" of objects, where a realm is essentially the map used by a types.Importer that defines the canonical mapping of package paths to package objects.

Consider an application that wishes to type check hundreds of source packages, in parallel, using export data, and then perform assignability tests on pairs of types from different packages. Each source package has its own importer, and thus its own realm of Named objects, so it is not possible to intermingle objects from these realms correctly. For example, you can't ask whether a concrete type in one realm satisfies an interface type from another realm because, even though they might both possess a method f(*bytes.Buffer), they would not agree that the two Buffer types are the same.

This means that various relations that could easily be well defined over go/types data structures, including `types.Identity`, `types.Assignable`, and `types.MissingMethod`, and `types.LookupFieldOrMethod`, don't work as expected. The application described above must either load all packages of interest in a single realm (entailing redundant work, reduced parallelism, and increased peak memory usage), or find another way to encode the query without using go/types predicates.

Is this restriction essential? I wonder whether we could relax the notion of type identity used by the predicates mentioned above so that they work naturally across realms. Two Named types declared at package level would instead be considered identical iff their names are identical and the Paths of the Packages to which they belong are equal. Pointer identity would just be a fast special case.

Named types local to a function are trickier since there's no obviously ideal way to express the correspondence of the same declaration encountered by the type checker at two different times. Using source positions seems fragile. Perhaps something analogous to [DeBruijn indices](https://en.wikipedia.org/wiki/De_Bruijn_index) could work: a computed name for each local type based on the path up the scope tree to the top-level enclosing function, which of course has an Object.Id that is valid across realms.

Though local types are trickier, they are also less important, as the need to apply predicates (e.g. IsAssignable) to a pair of local types from different packages is rare--though nonetheless conceivably useful in a whole-program analysis.

It's worth noting that if we ignore local types for now, the four predicates above could probably be implemented as described entirely outside go/types, if we were to fork them and edit the object identity comparison.

[@griesemer](https://github.com/griesemer)[@findleyr](https://github.com/findleyr)[@mdempsky](https://github.com/mdempsky)[@timothy-king](https://github.com/timothy-king)[@zpavlinovic](https://github.com/zpavlinovic)[@dominikh](https://github.com/dominikh)

ðŸ‘€React with ðŸ‘€1dominikh

## Metadata

## Metadata

### Assignees

No one assigned

### Labels

[Proposal](https://github.com/golang/go/issues?q=state%3Aopen%20label%3A%22Proposal%22)

### Type

No type

### Projects

[Proposals](https://github.com/orgs/golang/projects/17)

Status

IncomingShow more project fields

### Milestone

- [ProposalNo due date](https://github.com/golang/go/milestone/30)

### Relationships

None yet

### Development

No branches or pull requests

## Issue actions

## Footer

https://github.com Â© 2026 GitHub, Inc. 

### Footer navigation

- [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
- [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
- [Security](https://github.com/security)
- [Status](https://www.githubstatus.com/)
- [Community](https://github.community/)
- [Docs](https://docs.github.com/)
- [Contact](https://support.github.com?tags=dotcom-footer)
-  Manage cookies 
-  Do not share my personal information 

 You canâ€™t perform that action at this time.
