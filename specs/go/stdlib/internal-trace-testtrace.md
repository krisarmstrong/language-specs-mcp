package testtrace // import "internal/trace/testtrace"


TYPES

type Expectation struct {
	// Has unexported fields.
}
    Expectation represents the expected result of some operation.

func ExpectSuccess() *Expectation
    ExpectSuccess returns an Expectation that trivially expects success.

func ParseExpectation(data []byte) (*Expectation, error)
    ParseExpectation parses the serialized form of an Expectation.

func ParseFile(testPath string) (io.Reader, version.Version, *Expectation, error)
    ParseFile parses a test file generated by the testgen package.

func (e *Expectation) Check(err error) error
    Check validates whether err conforms to the expectation. Returns an error if
    it does not conform.

    Conformance means that if failure is true, then err must be non-nil.
    If err is non-nil, then it must match errorMatcher.

type Validator struct {
	GoVersion version.Version

	// Has unexported fields.
}
    Validator is a type used for validating a stream of trace.Events.

func NewValidator() *Validator
    NewValidator creates a new Validator.

func (v *Validator) Event(ev trace.Event) error
    Event validates ev as the next event in a stream of trace.Events.

    Returns an error if validation fails.

func (v *Validator) SkipClockSnapshotChecks()
    SkipClockSnapshotChecks causes the validator to skip checks on the clock
    snapshots.

    Some platforms like Windows, with a small enough trace period, are unable
    to produce monotonically increasing timestamps due to very coarse clock
    granularity.

