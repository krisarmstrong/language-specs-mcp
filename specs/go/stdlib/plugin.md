runtime/race: doesn't support the plugin package · Issue #24245 · golang/go · GitHub[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation/[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgolang%2Fgo%2Fissues%2F24245)Appearance settings

- Platform

  - AI CODE CREATION

    - [GitHub CopilotWrite better code with AI](https://github.com/features/copilot)
    - [GitHub SparkBuild and deploy intelligent apps](https://github.com/features/spark)
    - [GitHub ModelsManage and compare prompts](https://github.com/features/models)
    - [MCP RegistryNewIntegrate external tools](https://github.com/mcp)

  - DEVELOPER WORKFLOWS

    - [ActionsAutomate any workflow](https://github.com/features/actions)
    - [CodespacesInstant dev environments](https://github.com/features/codespaces)
    - [IssuesPlan and track work](https://github.com/features/issues)
    - [Code ReviewManage code changes](https://github.com/features/code-review)

  - APPLICATION SECURITY

    - [GitHub Advanced SecurityFind and fix vulnerabilities](https://github.com/security/advanced-security)
    - [Code securitySecure your code as you build](https://github.com/security/advanced-security/code-security)
    - [Secret protectionStop leaks before they start](https://github.com/security/advanced-security/secret-protection)

  - EXPLORE

    - [Why GitHub](https://github.com/why-github)
    - [Documentation](https://docs.github.com)
    - [Blog](https://github.blog)
    - [Changelog](https://github.blog/changelog)
    - [Marketplace](https://github.com/marketplace)

[View all features](https://github.com/features)
- Solutions

  - BY COMPANY SIZE

    - [Enterprises](https://github.com/enterprise)
    - [Small and medium teams](https://github.com/team)
    - [Startups](https://github.com/enterprise/startups)
    - [Nonprofits](https://github.com/solutions/industry/nonprofits)

  - BY USE CASE

    - [App Modernization](https://github.com/solutions/use-case/app-modernization)
    - [DevSecOps](https://github.com/solutions/use-case/devsecops)
    - [DevOps](https://github.com/solutions/use-case/devops)
    - [CI/CD](https://github.com/solutions/use-case/ci-cd)
    - [View all use cases](https://github.com/solutions/use-case)

  - BY INDUSTRY

    - [Healthcare](https://github.com/solutions/industry/healthcare)
    - [Financial services](https://github.com/solutions/industry/financial-services)
    - [Manufacturing](https://github.com/solutions/industry/manufacturing)
    - [Government](https://github.com/solutions/industry/government)
    - [View all industries](https://github.com/solutions/industry)

[View all solutions](https://github.com/solutions)
- Resources

  - EXPLORE BY TOPIC

    - [AI](https://github.com/resources/articles?topic=ai)
    - [Software Development](https://github.com/resources/articles?topic=software-development)
    - [DevOps](https://github.com/resources/articles?topic=devops)
    - [Security](https://github.com/resources/articles?topic=security)
    - [View all topics](https://github.com/resources/articles)

  - EXPLORE BY TYPE

    - [Customer stories](https://github.com/customer-stories)
    - [Events & webinars](https://github.com/resources/events)
    - [Ebooks & reports](https://github.com/resources/whitepapers)
    - [Business insights](https://github.com/solutions/executive-insights)
    - [GitHub Skills](https://skills.github.com)

  - SUPPORT & SERVICES

    - [Documentation](https://docs.github.com)
    - [Customer support](https://support.github.com)
    - [Community forum](https://github.com/orgs/community/discussions)
    - [Trust center](https://github.com/trust-center)
    - [Partners](https://github.com/partners)

- Open Source

  - COMMUNITY

    - [GitHub SponsorsFund open source developers](https://github.com/sponsors)

  - PROGRAMS

    - [Security Lab](https://securitylab.github.com)
    - [Maintainer Community](https://maintainers.github.com)
    - [Accelerator](https://github.com/accelerator)
    - [Archive Program](https://archiveprogram.github.com)

  - REPOSITORIES

    - [Topics](https://github.com/topics)
    - [Trending](https://github.com/trending)
    - [Collections](https://github.com/collections)

- Enterprise

  - ENTERPRISE SOLUTIONS

    - [Enterprise platformAI-powered developer platform](https://github.com/enterprise)

  - AVAILABLE ADD-ONS

    - [GitHub Advanced SecurityEnterprise-grade security features](https://github.com/security/advanced-security)
    - [Copilot for BusinessEnterprise-grade AI features](https://github.com/features/copilot/copilot-business)
    - [Premium SupportEnterprise-grade 24/7 support](https://github.com/premium-support)

- [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

 Search Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

#  Provide feedback 

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted Cancel  Submit feedback 

#  Saved searches 

## Use saved searches to filter your results more quickly

NameQuery

 To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax). 

 Cancel  Create saved search [Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgolang%2Fgo%2Fissues%2F24245)[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=golang%2Fgo)Appearance settingsResetting focusYou signed in with another tab or window. Reload to refresh your session.You signed out in another tab or window. Reload to refresh your session.You switched accounts on another tab or window. Reload to refresh your session.Dismiss alert{{ message }}[golang](/golang)/[go](/golang/go)Public

- [Notifications](/login?return_to=%2Fgolang%2Fgo)You must be signed in to change notification settings
- [Fork
    18.7k](/login?return_to=%2Fgolang%2Fgo)
- [Star
          132k](/login?return_to=%2Fgolang%2Fgo)

- [Code](/golang/go)
- [Issues
          5k+](/golang/go/issues)
- [Pull requests
          366](/golang/go/pulls)
- [Discussions](/golang/go/discussions)
- [Actions](/golang/go/actions)
- [Projects
          5](/golang/go/projects)
- [Wiki](/golang/go/wiki)
- 

### 

[Security
          
  
  
    
  
    
      

              Uh oh!

              There was an error while loading. Please reload this page](/golang/go/security).

- [Insights](/golang/go/pulse)

Additional navigation options

- [Code](/golang/go)
- [Issues](/golang/go/issues)
- [Pull requests](/golang/go/pulls)
- [Discussions](/golang/go/discussions)
- [Actions](/golang/go/actions)
- [Projects](/golang/go/projects)
- [Wiki](/golang/go/wiki)
- [Security](/golang/go/security)
- [Insights](/golang/go/pulse)

# runtime/race: doesn't support the plugin package#24245

[New issue](/login?return_to=)Copy link[New issue](/login?return_to=)Copy linkOpenOpen[runtime/race: doesn't support the plugin package](#top)#24245Copy linkLabels[FeatureRequestIssues asking for a new feature that does not need a proposal.](https://github.com/golang/go/issues?q=state%3Aopen%20label%3A%22FeatureRequest%22)Issues asking for a new feature that does not need a proposal.[NeedsInvestigationSomeone must examine and confirm this is a valid issue and not a duplicate of an existing one.](https://github.com/golang/go/issues?q=state%3Aopen%20label%3A%22NeedsInvestigation%22)Someone must examine and confirm this is a valid issue and not a duplicate of an existing one.[RaceDetector](https://github.com/golang/go/issues?q=state%3Aopen%20label%3A%22RaceDetector%22)[compiler/runtimeIssues related to the Go compiler and/or runtime.](https://github.com/golang/go/issues?q=state%3Aopen%20label%3A%22compiler%2Fruntime%22)Issues related to the Go compiler and/or runtime.[help wanted](https://github.com/golang/go/issues?q=state%3Aopen%20label%3A%22help%20wanted%22)Milestone[Unplanned](https://github.com/golang/go/milestone/6)https://github.com/tiborvass

## Description

https://github.com/tiborvass[tiborvass](https://github.com/tiborvass)opened [on Mar 4, 2018](https://github.com/golang/go/issues/24245#issue-302123464)Issue body actions

#### What did you do?

```
// plugin/plugin.go

package main

import (
	"os"
	"time"
)

var counter int

func main() {
	os.Exit(Main())
}

func Main() int {
	go func() {
		counter++
	}()
	time.Sleep(500 * time.Millisecond)
	return counter
}
```

```
// plugin-runner.go

package main

import (
	"os"
	"plugin"
)

func main() {
	p, err := plugin.Open(os.Args[1])
	if err != nil {
		panic(err)
	}
	sym, err := p.Lookup("Main")
	if err != nil {
		panic(err)
	}
	f := sym.(func() int)
	_ = f()
}
```

```
$ go build -o plugin/plugin.so -race -buildmode=plugin plugin/plugin.go
$ go run -race plugin-runner.go plugin/plugin.so
```

#### What did you expect to see?

A `DATA RACE` output similar to this one:

```
$ go run -race plugin/plugin.go
==================
WARNING: DATA RACE
Read at 0x00000051da38 by main goroutine:
  main.Main()
      /go/src/github.com/tiborvass/goissues/plugin/race-nodetect/plugin/plugin.go:19 +0x5f
  main.main()
      /go/src/github.com/tiborvass/goissues/plugin/race-nodetect/plugin/plugin.go:11 +0x2f

Previous write at 0x00000051da38 by goroutine 6:
  main.Main.func1()
      /go/src/github.com/tiborvass/goissues/plugin/race-nodetect/plugin/plugin.go:16 +0x56

Goroutine 6 (finished) created at:
  main.Main()
      /go/src/github.com/tiborvass/goissues/plugin/race-nodetect/plugin/plugin.go:15 +0x42
  main.main()
      /go/src/github.com/tiborvass/goissues/plugin/race-nodetect/plugin/plugin.go:11 +0x2f
==================
exit status 1
```

#### What did you see instead?

No output. I reproduced it 100% on both linux and darwin.

#### System details

```
go version go1.10 linux/amd64
GOARCH="amd64"
GOBIN=""
GOCACHE="/root/.cache/go-build"
GOEXE=""
GOHOSTARCH="amd64"
GOHOSTOS="linux"
GOOS="linux"
GOPATH="/go"
GORACE=""
GOROOT="/usr/local/go"
GOTMPDIR=""
GOTOOLDIR="/usr/local/go/pkg/tool/linux_amd64"
GCCGO="gccgo"
CC="gcc"
CXX="g++"
CGO_ENABLED="1"
CGO_CFLAGS="-g -O2"
CGO_CPPFLAGS=""
CGO_CXXFLAGS="-g -O2"
CGO_FFLAGS="-g -O2"
CGO_LDFLAGS="-g -O2"
PKG_CONFIG="pkg-config"
GOGCCFLAGS="-fPIC -m64 -pthread -fmessage-length=0 -fdebug-prefix-map=/tmp/go-build269754766=/tmp/go-build -gno-record-gcc-switches"
GOROOT/bin/go version: go version go1.10 linux/amd64
GOROOT/bin/go tool compile -V: compile version go1.10
uname -sr: Linux 4.9.75-linuxkit-aufs
/lib/x86_64-linux-gnu/libc.so.6: GNU C Library (Debian GLIBC 2.24-11+deb9u1) stable release version 2.24, by Roland McGrath et al.
```

## Metadata

## Metadata

### Assignees

No one assigned

### Labels

[FeatureRequestIssues asking for a new feature that does not need a proposal.](https://github.com/golang/go/issues?q=state%3Aopen%20label%3A%22FeatureRequest%22)Issues asking for a new feature that does not need a proposal.[NeedsInvestigationSomeone must examine and confirm this is a valid issue and not a duplicate of an existing one.](https://github.com/golang/go/issues?q=state%3Aopen%20label%3A%22NeedsInvestigation%22)Someone must examine and confirm this is a valid issue and not a duplicate of an existing one.[RaceDetector](https://github.com/golang/go/issues?q=state%3Aopen%20label%3A%22RaceDetector%22)[compiler/runtimeIssues related to the Go compiler and/or runtime.](https://github.com/golang/go/issues?q=state%3Aopen%20label%3A%22compiler%2Fruntime%22)Issues related to the Go compiler and/or runtime.[help wanted](https://github.com/golang/go/issues?q=state%3Aopen%20label%3A%22help%20wanted%22)

### Type

No type

### Projects

No projects

### Milestone

- [Unplanned](https://github.com/golang/go/milestone/6)

### Relationships

None yet

### Development

No branches or pull requests

## Issue actions

## Footer

https://github.com © 2026 GitHub, Inc. 

### Footer navigation

- [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
- [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
- [Security](https://github.com/security)
- [Status](https://www.githubstatus.com/)
- [Community](https://github.community/)
- [Docs](https://docs.github.com/)
- [Contact](https://support.github.com?tags=dotcom-footer)
-  Manage cookies 
-  Do not share my personal information 

 You can’t perform that action at this time.
