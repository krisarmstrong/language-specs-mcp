ShellCheck: SC2213 – getopts specified `-n`, but it's not handled by this `case`.

# SC2213 – ShellCheck Wiki

[See this page on GitHub](https://github.com/koalaman/shellcheck/wiki/SC2213)

[Sitemap](index.html)

## getopts specified `-n`, but it's not handled by this `case`.

### Problematic code:

```
#cb1-1while getopts "vrn" n
#cb1-2do
#cb1-3  case "$n" in
#cb1-4    v) echo "Verbose" ;;
#cb1-5    r) echo "Recursive" ;;
#cb1-6    \?) usage;;
#cb1-7  esac
#cb1-8done
```

### Correct code:

```
#cb2-1while getopts "vrn" n
#cb2-2do
#cb2-3  case "$n" in
#cb2-4    v) echo "Verbose" ;;
#cb2-5    r) echo "Recursive" ;;
#cb2-6    n) echo "Dry-run" ;;    # -n handled here
#cb2-7    \?) usage;;
#cb2-8  esac
#cb2-9done
```

### Rationale:

You have a `while getopts` loop where the corresponding `case` statement fails to handle one of the flags.

Either add a case to handle the flag, or remove it from the `getopts` option string.

### Exceptions:

ShellCheck may not correctly recognize less canonical uses of `while getopts ..; do case ..;`, such as when modifying the variable before using it:

```
#cb3-1while getopts "rf-:" OPT; do
#cb3-2  if [ "$OPT" = "-" ]; then   # long option: reformulate OPT and OPTARG
#cb3-3    OPT="${OPTARG%%=*}"       # extract long option name
#cb3-4    OPTARG="${OPTARG#$OPT}"   # extract long option argument (may be empty)
#cb3-5    OPTARG="${OPTARG#=}"      # if long option argument, remove assigning `=`
#cb3-6  fi
#cb3-7
#cb3-8  case "$OPT" in
#cb3-9    r) ... ;;
#cb3-10    f) ... ;;
#cb3-11    my-long-option) ... ;;
#cb3-12  esac
#cb3-13done
```

In such cases you can do one of:

- [Ignore](Ignore) the warning.
- Use the external tool `getopt` (no "s") which supports long options natively.
- Rewrite to not modify the variable first, in this case by instead doing it in a `-)` branch.

[ShellCheck](https://www.shellcheck.net) is a static analysis tool for shell scripts. This page is part of its documentation.
