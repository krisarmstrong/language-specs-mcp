ShellCheck: SC2004 – `$`/`${}` is unnecessary on arithmetic variables.

# SC2004 – ShellCheck Wiki

[See this page on GitHub](https://github.com/koalaman/shellcheck/wiki/SC2004)

[Sitemap](index.html)

# `$`/`${}` is unnecessary on arithmetic variables.

### Problematic code:

```
#cb1-1echo $(($n + ${arr[i]}))
```

### Correct code:

```
#cb2-1echo $((n + arr[i]))
```

### Rationale:

The `$` or `${..}` on regular variables in arithmetic contexts is unnecessary, and can even lead to subtle bugs. This is because the contents of `$((..))` is first expanded into a string, and then evaluated as an expression:

```
#cb3-1$ a='1+1'
#cb3-2$ echo $(($a * 5))    # becomes 1+1*5
#cb3-36
#cb3-4$ echo $((a * 5))     # evaluates as (1+1)*5
#cb3-510
```

The `$` is unavoidable for special variables like `$1` vs `1`, `$#` vs `#`. It's also required when adding modifiers to parameters expansions, like `${#var}` or `${var%-}`. ShellCheck does not warn about these cases.

The `$` is also required (and not warned about) when you need to specify the base for a variable value:

```
#cb4-1$ a=09
#cb4-2$ echo $((a + 1))          # leading zero forces octal interpretation
#cb4-3bash: 09: value too great for base (error token is "09")
#cb4-4$ echo $((10#a + 1))
#cb4-5bash: 10#a: value too great for base (error token is "10#a")
#cb4-6$ echo $((10#$a + 1))
#cb4-710
```

[ShellCheck](https://www.shellcheck.net) is a static analysis tool for shell scripts. This page is part of its documentation.
