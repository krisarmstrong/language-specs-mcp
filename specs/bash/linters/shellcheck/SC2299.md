ShellCheck: SC2299 – Parameter expansions can't be nested. Use temporary variables.

# SC2299 – ShellCheck Wiki

[See this page on GitHub](https://github.com/koalaman/shellcheck/wiki/SC2299)

[Sitemap](index.html)

## Parameter expansions can't be nested. Use temporary variables.

### Problematic code:

```
#cb1-1path="/path/to/MyFile.mp3"
#cb1-2echo "Playing ${${path##*/}%.*}"    # Expect: Playing MyFile
```

### Correct code:

```
#cb2-1path="/path/to/MyFile.mp3"
#cb2-2tmp=${path##*/}
#cb2-3echo "Playing ${tmp%.*}"
```

### Rationale:

ShellCheck found what appears to be a nested parameter expansion. In the example, it was hoping to combine `${var##*/}` to strip the directory and `${var%.*}` to strip the extension.

Parameter expansions can't be nested. Use temporary variables instead, so that each parameter expansion only does a single operation.

Alternatively, if the goal is to dynamically generate and expand a variable name, see [SC2082](SC2082).

### Exceptions:

None

### Related resources:

- Help by adding links to BashFAQ, StackOverflow, man pages, POSIX, etc!

[ShellCheck](https://www.shellcheck.net) is a static analysis tool for shell scripts. This page is part of its documentation.
