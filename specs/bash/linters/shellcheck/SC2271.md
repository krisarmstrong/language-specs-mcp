ShellCheck: SC2271 – For indirection, use arrays, `declare "var$n=value"`, or (for sh) read/eval

# SC2271 – ShellCheck Wiki

[See this page on GitHub](https://github.com/koalaman/shellcheck/wiki/SC2271)

[Sitemap](index.html)

## For indirection, use arrays, `declare "var$n=value"`, or (for sh) read/eval

### Problematic code:

```
#cb1-1n=1
#cb1-2var$n="hello"
```

### Correct code:

For integer indexing in ksh/bash, consider using an indexed array:

```
#cb2-1n=1
#cb2-2var[n]="hello"
#cb2-3echo "${var[n]}"
```

For string indexing in ksh/bash, use an associative array:

```
#cb3-1typeset -A var
#cb3-2n="greeting"
#cb3-3var[$n]="hello"
#cb3-4echo "${var[$n]}"
```

If you actually need a variable with the constructed name in bash, use `declare`:

```
#cb4-1n="Foo"
#cb4-2declare "var$n=42"
#cb4-3echo "$varFoo"
```

For `sh`, with single line contents, consider `read`:

```
#cb5-1n="Foo"
#cb5-2read -r "var$n" << EOF
#cb5-3hello
#cb5-4EOF
#cb5-5echo "$varFoo"
```

or with careful escaping, `eval`:

```
#cb6-1n=Foo
#cb6-2eval "var$n='hello'"
#cb6-3echo "$varFoo"
```

### Rationale:

`var$n=value` is not a valid way of assigning to a dynamically created variable name in any shell. Please use one of the other methods to assign to names via expanded strings. [Wooledge BashFaq #6](https://mywiki.wooledge.org/BashFAQ/006) has significantly more information on the subject.

### Exceptions:

None

### Related resources:

- [Wooledge BashFaq
#6](https://mywiki.wooledge.org/BashFAQ/006): How can I use variable variables (indirect variables, pointers, references) or associative arrays?

[ShellCheck](https://www.shellcheck.net) is a static analysis tool for shell scripts. This page is part of its documentation.
