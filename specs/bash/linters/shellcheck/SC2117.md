ShellCheck: SC2117 – To run commands as another user, use `su -c` or `sudo`.

# SC2117 – ShellCheck Wiki

[See this page on GitHub](https://github.com/koalaman/shellcheck/wiki/SC2117)

[Sitemap](index.html)

## To run commands as another user, use `su -c` or `sudo`.

### Problematic code:

```
#cb1-1whoami
#cb1-2su
#cb1-3whoami
```

### Correct code:

```
#cb2-1whoami
#cb2-2sudo whoami
```

### Rationale:

It's commonly believed that `su` makes a session run as another user. In reality, it starts an entirely new shell, independent of the one currently running your script.

`su; whoami` will start a root shell and wait for it to exit before running `whoami`. It will not start a root shell and then proceed to run `whoami` in it.

To run commands as another user, use `sudo some command` or `su -c 'some command'`. `sudo` is preferred when available, as it doesn't require additional quoting and can be configured to run passwordless if desired.

### Exceptions

If you're aware of the above and want to e.g. start an interactive shell for a user, feel free to ignore this message.

[ShellCheck](https://www.shellcheck.net) is a static analysis tool for shell scripts. This page is part of its documentation.
