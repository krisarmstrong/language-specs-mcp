ShellCheck: SC2010 – Don't use `ls | grep`. Use a glob or a for loop with a condition to allow non-alphanumeric filenames.

# SC2010 – ShellCheck Wiki

[See this page on GitHub](https://github.com/koalaman/shellcheck/wiki/SC2010)

[Sitemap](index.html)

## Don't use `ls | grep`. Use a glob or a for loop with a condition to allow non-alphanumeric filenames.

### Problematic code:

```
#cb1-1ls /directory | grep mystring
```

or

```
#cb2-1rm $(ls | grep -v '\.c$')
```

### Correct code:

```
#cb3-1# BASH
#cb3-2shopt -s extglob
#cb3-3rm -- !(*.c)
#cb3-4
#cb3-5# POSIX
#cb3-6for f in ./*
#cb3-7do
#cb3-8  case $f in
#cb3-9    *.c) true;;
#cb3-10    *) rm "$f";;
#cb3-11  esac
#cb3-12done
```

### Rationale:

[Parsing ls](https://mywiki.wooledge.org/ParsingLs) is generally a bad idea because the output is fragile and human readable. To better handle non-alphanumeric filenames, use a glob. If you need more advanced matching than a glob can provide, use a `for` loop.

### Exceptions:

- `ls` has sorting options that are tricky to get right with other commands. If a specific order of files is needed, ls <sort options> | grep might be the best alternative.
- network shares like AFS behave much faster using ls

### Related resources:

- [BashFaq: How can I
find and safely handle file names containing newlines, spaces or
both?](https://mywiki.wooledge.org/BashFAQ/020)

[ShellCheck](https://www.shellcheck.net) is a static analysis tool for shell scripts. This page is part of its documentation.
