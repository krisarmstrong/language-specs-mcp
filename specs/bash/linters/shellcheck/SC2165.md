ShellCheck: SC2165 – This nested loop overrides the index variable of its parent.

# SC2165 – ShellCheck Wiki

[See this page on GitHub](https://github.com/koalaman/shellcheck/wiki/SC2165)

[Sitemap](index.html)

## This nested loop overrides the index variable of its parent.

And companion warning "This parent loop has its index variable overridden." in [SC2167](SC2167).

### Problematic code:

```
#cb1-1for((i=0; i<10; i++))
#cb1-2do
#cb1-3  for i in *
#cb1-4  do
#cb1-5    echo "$i"
#cb1-6  done
#cb1-7done
```

### Correct code:

```
#cb2-1for((i=0; i<10; i++))
#cb2-2do
#cb2-3  for j in *
#cb2-4  do
#cb2-5    echo "$j"
#cb2-6  done
#cb2-7done
```

### Rationale:

When nesting loops, especially arithmetic for loops, using the same loop variable can cause unexpected results.

In the problematic code, `i` will contain the last filename from the inner loop, which will be interpreted as a value in the next iteration out the outer loop. This results in either an infinite loop or a syntax error, depending on whether the last filename is a valid shell variable name.

In nested for-in loops, variable merely shadow each other and won't cause infinite loops or syntax errors, but reusing the variable name is rarely intentional.

### Exceptions:

None.

[ShellCheck](https://www.shellcheck.net) is a static analysis tool for shell scripts. This page is part of its documentation.
