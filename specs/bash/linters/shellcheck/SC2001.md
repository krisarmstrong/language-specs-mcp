ShellCheck: SC2001 – See if you can use `${variable//search/replace}` instead.

# SC2001 – ShellCheck Wiki

[See this page on GitHub](https://github.com/koalaman/shellcheck/wiki/SC2001)

[Sitemap](index.html)

## See if you can use `${variable//search/replace}` instead.

### Problematic code:

```
#cb1-1string="bwol" ; echo "$string" | sed -e "s/wo/ow/"
```

### Correct code:

```
#cb2-1string="bwol" ; echo "${string//wo/ow}"
```

Here is a demonstration of the different search/replace available in Bash:

```
#cb3-1var="foo foo"
#cb3-2# the following two echo's should be equivalent:
#cb3-3echo "$var" | sed 's/^foo/bar/g'
#cb3-4echo ${var/#foo/bar}
```

$varsed expressionbash equivalentresultfoo foos/foo/bar/${var/foo/bar}bar foofoo foos/foo/bar/g${var//foo/bar}bar barfoo foos/^foo/bar/${var/#foo/bar}bar foo-foo foos/^foo/bar/${var/#foo/bar}-foo foo-foo foos/foo$/bar/${var/%foo/bar}-foo bar-foo foo-s/foo$/bar/${var/%foo/bar}-foo foo-

### Rationale:

Let's assume somewhere earlier in your code, you have put data into a variable (Ex: $string). Now you want to search and replace inside the contents of $string and echo the contents out. You could pass this to sed as done in the example above, but for simple substitutions, a parameter expansion can do it with less overhead.

### Exceptions

Occasionally a more complex sed substitution is required. For example, getting the last character of a string.

```
#cb4-1string="bwol" ; echo "$string" | sed -e "s/^.*\(.\)$/\1/"
```

This is a bit simple for the example, and there are alternative ways of doing this in the shell, but this SC2001 flags on several of my crazy complex sed commands beyond this example's scope. Utilizing some of the more complex capabilities of sed is required occasionally, and it is safe to ignore SC2001.

### Related resources:

- Bash Manual: [Shell
Parameter Expansion](https://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)
- Wooledge BashGuide: [Parameter
Expansion](https://mywiki.wooledge.org/BashGuide/Parameters#Parameter_Expansion).
- Bash Hacker Wiki: [Parameter
Expansion](http://wiki.bash-hackers.org/syntax/pe)

[ShellCheck](https://www.shellcheck.net) is a static analysis tool for shell scripts. This page is part of its documentation.
