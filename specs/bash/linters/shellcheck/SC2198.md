ShellCheck: SC2198 – Arrays don't work as operands in `[ ]`. Use a loop (or concatenate with `*` instead of `@`).

# SC2198 – ShellCheck Wiki

[See this page on GitHub](https://github.com/koalaman/shellcheck/wiki/SC2198)

[Sitemap](index.html)

## Arrays don't work as operands in `[ ]`. Use a loop (or concatenate with `*` instead of `@`).

### Problematic code:

```
#cb1-1ext=png
#cb1-2allowedExt=(jpg bmp png)
#cb1-3[ "$ext" = "${allowedExt[@]}" ] && echo "Extension is valid"
```

### Correct code:

```
#cb2-1ext=png
#cb2-2allowedExt=(jpg bmp png)
#cb2-3for value in "${allowedExt[@]}"
#cb2-4do
#cb2-5  [ "$ext" = "$value" ] && echo "Extension is valid"
#cb2-6done
```

### Rationale:

Array expansions become a series of words in `[ .. ]`. Operators expect single words only.

The problematic code is equivalent to `[ "$ext" = jpg bmp png ]`, which is invalid syntax. A typical error message is `bash: [: too many arguments` or `dash: somefile: unexpected operator`.

Instead, use a `for` loop to iterate over values, and apply your condition to each.

Alternatively, if you want to concatenate all the values in the array into a single string for your test, use `"$*"` or `"${array[*]}"`.

### Exceptions:

If you are dynamically building an a test expression, make your array the only thing in the test expression. ShellCheck will not emit a warning for: `set -- 1 -lt 2; [ "$@" ]`

[ShellCheck](https://www.shellcheck.net) is a static analysis tool for shell scripts. This page is part of its documentation.
