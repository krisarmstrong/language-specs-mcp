ShellCheck: SC2128 – Expanding an array without an index only gives the element in the index 0.

# SC2128 – ShellCheck Wiki

[See this page on GitHub](https://github.com/koalaman/shellcheck/wiki/SC2128)

[Sitemap](index.html)

## Expanding an array without an index only gives the element in the index 0.

### Problematic code:

```
#cb1-1myarray=(foo bar)
#cb1-2for f in $myarray
#cb1-3do
#cb1-4  cat "$f"
#cb1-5done
```

### Correct code:

```
#cb2-1myarray=(foo bar)
#cb2-2for f in "${myarray[@]}"
#cb2-3do
#cb2-4  cat "$f"
#cb2-5done
```

### Rationale:

When referencing arrays, `$myarray` is equivalent to `${myarray[0]}` -- which is usually the first of multiple elements. This is also true for associative arrays. Therefore, if 0 (zero) is not a valid key, `$myarray` expands to an empty string.

To get all elements as separate parameters, use the index `@` (and make sure to double quote). In the example, `echo "${myarray[@]}"` is equivalent to `echo "foo" "bar"`.

To get all elements as a single parameter, concatenated by the first character in `IFS`, use the index `*`. In the example, `echo "${myarray[*]}"` is equivalent to `echo "foo bar"`.

### Bugs:

There is a [known
issue](https://github.com/koalaman/shellcheck/issues/1309) with this check's handling of `local` variables, causing ShellCheck to flag variables that were previously declared as arrays, even if they are in different scopes.

The easiest workaround is to simply use different variable names. Alternatively, you can [ignore](ignore) the check.

It is also possible to satisfy ShellCheck by declaring the `local` variable separately from assigning to it, e.g.:

```
#cb3-1foo () {
#cb3-2   local -a baz
#cb3-3   baz+=("foo" "bar")
#cb3-4   echo "${baz[@]}"
#cb3-5}
#cb3-6
#cb3-7bar () {
#cb3-8   local baz # ShellCheck gets confused if these lines are merged as local baz="qux"
#cb3-9   baz="qux"
#cb3-10   echo "$baz"
#cb3-11}
```

[ShellCheck](https://www.shellcheck.net) is a static analysis tool for shell scripts. This page is part of its documentation.
