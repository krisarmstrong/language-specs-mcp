ShellCheck: SC3065 – In POSIX sh, test -k is undefined.

# SC3065 – ShellCheck Wiki

[See this page on GitHub](https://github.com/koalaman/shellcheck/wiki/SC3065)

[Sitemap](index.html)

## In POSIX sh, test -k is undefined.

### Problematic code:

```
#cb1-1if [ -k file ]
#cb1-2then
#cb1-3  echo "File has sticky bit set"
#cb1-4fi
```

### Correct code:

```
#cb2-1if [ -n "$(find file -prune -perm /1000)" ]
#cb2-2then
#cb2-3  echo "File has sticky bit set"
#cb2-4fi
```

### Rationale:

`test -k file` and `[ -k file ]` are not defined by POSIX. To ensure compatibility with all target systems, use `find` instead.

### Exceptions:

None. If you are targeting a shell that supports `test -k`, specify it in the shebang.

### Related resources:

- Help by adding links to BashFAQ, StackOverflow, man pages, POSIX, etc!

[ShellCheck](https://www.shellcheck.net) is a static analysis tool for shell scripts. This page is part of its documentation.
