ShellCheck: SC2317 – Command appears to be unreachable. Check usage (or ignore if invoked indirectly).

# SC2317 – ShellCheck Wiki

[See this page on GitHub](https://github.com/koalaman/shellcheck/wiki/SC2317)

[Sitemap](index.html)

## Command appears to be unreachable. Check usage (or ignore if invoked indirectly).

### Problematic code:

```
#cb1-1usage() {
#cb1-2  echo >&2 "Usage: $0 -i input"
#cb1-3  exit 1
#cb1-4}     
#cb1-5if [ "$1" = "--help" ]
#cb1-6then
#cb1-7  usage
#cb1-8  exit 0   # Unreachable
#cb1-9fi
```

### Correct code:

```
#cb2-1usage() {
#cb2-2  echo >&2 "Usage: $0 -i input"
#cb2-3}     
#cb2-4if [ "$1" = "--help" ]
#cb2-5then
#cb2-6  usage
#cb2-7  exit 0
#cb2-8fi
```

### Rationale:

The problematic code wanted to exit with success if the user explicitly asked for `--help`. However, since the `usage` function already had an `exit 1`, this statement could never run.

One possible solution is to change `usage()` to only echo, and let callers be responsible for exiting.

### Exceptions:

ShellCheck may incorrectly believe that code is unreachable if it's invoked by variable name or in a trap. In such a case, please [Ignore](Ignore) the message.

Note in particular that since unreachable commands may come in clusters, it's useful to use ShellCheck's filewide or functionwide ignore directives. A `disable` directive before a function ignores the entire function:

```
#cb3-1#!/bin/bash
#cb3-2...
#cb3-3# shellcheck disable=SC2317  # Don't warn about unreachable commands in this function
#cb3-4start() {
#cb3-5  echo Starting
#cb3-6  /etc/init.d/foo start
#cb3-7}
#cb3-8"$1"
#cb3-9exit 0
```

A disable directive after the shebang, before any commands, will ignore the entire file:

```
#cb4-1#!/bin/bash
#cb4-2# Test script #1
#cb4-3# shellcheck disable=SC2317  # Don't warn about unreachable commands in this file
#cb4-4
#cb4-5echo "Temporarily disabled"
#cb4-6exit 0
#cb4-7
#cb4-8run-test1
#cb4-9run-test2
#cb4-10run-test3
```

Defined functions are assumed to be reachable when the script ends (not exits) since another file may source and invoke them.

### More Problematic Code

You have defined two functions in the same file you are sourcing whose names are the same but defined differently within their bodies. Then shellcheck will state that every line of the body of the earlier seen function definition will be unreachable which is how bash would operate when sourcing the file. It unclear what shellcheck would output if the earlier definition appeared in a difference file that was seen first. Apparently doing a quick test. It does NOT notice.

### Related resources:

- Help by adding links to BashFAQ, StackOverflow, man pages, POSIX, etc!

[ShellCheck](https://www.shellcheck.net) is a static analysis tool for shell scripts. This page is part of its documentation.
