ShellCheck: SC2245 – -d only applies to the first expansion of this glob. Use a loop to check any/all.

# SC2245 – ShellCheck Wiki

[See this page on GitHub](https://github.com/koalaman/shellcheck/wiki/SC2245)

[Sitemap](index.html)

## -d only applies to the first expansion of this glob. Use a loop to check any/all.

### Problematic code:

```
#cb1-1#!/bin/ksh
#cb1-2
#cb1-3if [ -f ksh* ]
#cb1-4then
#cb1-5  echo "The file exists"
#cb1-6fi
```

### Correct code:

```
#cb2-1#!/bin/ksh
#cb2-2
#cb2-3for f in ksh*
#cb2-4do
#cb2-5  if [ -f "$f" ]
#cb2-6  then
#cb2-7    echo "Found a matching file: $f"
#cb2-8  fi
#cb2-9done
```

### Rationale:

Ksh has the curious behavior of ignoring anything after an unrecognized flag to `test`/`[`, which means that file checking operators against globs will effectively apply the operator to the first expansion:

```
#cb3-1[ -f ksh* ]                              # This
#cb3-2[ -f ksh93u ksh93u.tar ksh93u.tar.gz ]   # Becomes this
#cb3-3[ -f ksh93u ]                            # And is interpreted like this
```

This is an issue when you have multiple matches for a glob. Instead of checking some or all, it only checks the first result and ignores the rest. To ensure that all results are considered (either to check that any or all results match the operator), use a loop explicitly.

If you really only want to match the first result of the glob expansion as sorted alphabetically in the current locale, you can make this intention explicit:

```
matches=( ksh* )
if [ -f "${matches[0]}" ]
then
  echo "The first result is a file"
fi
```

### Exceptions:

If you only care that entries exists, use `-e`. ShellCheck does not warn in this case, since all files resulting from glob expansion necessarily exist.

### Related resources:

- Help by adding links to BashFAQ, StackOverflow, man pages, POSIX, etc!

[ShellCheck](https://www.shellcheck.net) is a static analysis tool for shell scripts. This page is part of its documentation.
