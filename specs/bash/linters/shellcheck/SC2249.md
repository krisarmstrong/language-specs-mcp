ShellCheck: SC2249 – Consider adding a default `*)` case, even if it just exits with error.

# SC2249 – ShellCheck Wiki

[See this page on GitHub](https://github.com/koalaman/shellcheck/wiki/SC2249)

[Sitemap](index.html)

## Consider adding a default `*)` case, even if it just exits with error.

### Optional - `add-default-case`

This is an [optional](optional) rule, which means that it has a special "long name" and is not enabled by default. See the [optional](optional) page for more details. In short, you have to enable it with the long name instead of the "SC" code like you would with a normal rule:

#### `.shellcheckrc`

```
enable=add-default-case # SC2249
```

### Problematic code:

```
#cb2-1case "$1" in
#cb2-2  start) start_service ;;
#cb2-3  stop)  stop_service ;;
#cb2-4  restart|reload|force-reload)
#cb2-5    stop_service;
#cb2-6    start_service;;
#cb2-7esac
```

### Correct code:

```
#cb3-1case "$1" in
#cb3-2  start) start_service ;;
#cb3-3  stop)  stop_service ;;
#cb3-4  restart|reload|force-reload)
#cb3-5    stop_service;
#cb3-6    start_service;;
#cb3-7  *)
#cb3-8    echo >&2 "Invalid choice: $1"
#cb3-9    exit 1
#cb3-10esac
```

### Rationale:

ShellCheck found a `case` statement that may not be considering all possible cases. This may mean that only the [happy paths](https://en.wikipedia.org/wiki/Happy_path) are accounted for.

Consider adding a default case to handle other values. If you don't know what to do or don't believe it'll ever happen, exiting with an error is good, fail-fast practice.

The example is adapted from a real world Debian init script, which due to a missing default case reports success on any misspelled command (here with underscore instead of dash):

```
$ /etc/init.d/screen-cleanup force_reload && echo success
success
```

### Exceptions:

This suggestion only triggers in verbose mode (`-S verbose`).

If you don't have a default case because the default should be to take no action, consider adding a comment to other humans:

```
#cb5-1case "$(uname)" in
#cb5-2  CYGWIN*) cygwin=1;;
#cb5-3  MINGW*) mingw=1;;
#cb5-4  *) ;; # No special workarounds identified
#cb5-5esac
```

If you believe that it's impossible for the expression to have any other value, it's considered good practice to add the equivalent of an `assert(0)` to fail fast if this assumption should turn out to be incorrect in the current or future versions:

```
#cb6-1case "$result" in
#cb6-2  true)  proceed;;
#cb6-3  false) cancel;;
#cb6-4  *) echo >&2 "Submit bug report: '$result' should be true or false."
#cb6-5     exit 127
#cb6-6esac
```

### Related resources:

- Help by adding links to BashFAQ, StackOverflow, man pages, POSIX, etc!

[ShellCheck](https://www.shellcheck.net) is a static analysis tool for shell scripts. This page is part of its documentation.
