ShellCheck: SC2178 – Variable was used as an array but is now assigned a string.

# SC2178 – ShellCheck Wiki

[See this page on GitHub](https://github.com/koalaman/shellcheck/wiki/SC2178)

[Sitemap](index.html)

## Variable was used as an array but is now assigned a string.

### Problematic code:

```
#cb1-1flags[0]="-r"
#cb1-2flags[1]="--delete-after"
#cb1-3
#cb1-4if [ "$dryrun" ]
#cb1-5then
#cb1-6   flags="--dry-run"
#cb1-7fi
```

### Correct code:

```
#cb2-1flags[0]="-r"
#cb2-2flags[1]="--delete-after"
#cb2-3
#cb2-4if [ "$dryrun" ]
#cb2-5then
#cb2-6   flags=( "--dry-run" )
#cb2-7fi
```

### Rationale:

ShellCheck noticed that you have used a variable as an array, but then assign it a string. `array=foo` is equivalent to `array[0]=foo`, and leaves the rest of the elements unaffected.

In the incorrect code, `"${flags[@]}"` would contain `--dry-run``--delete-after`.

To set an array to only a single, given element, you should use `array=( foo )`.

In the correct code, `"${flags[@]}"` will contain `--dry-run` only.

Another possible cause is accidentally missing the `$` on a previous assignment: `var=(my command); var=bar` instead of `var=$(my command); var=bar`. If the variable is not intended to be an array, ensure that it's never assigned as one.

### Bugs:

There is a [known
issue](https://github.com/koalaman/shellcheck/issues/1309) with this check's handling of `local` variables, causing ShellCheck to flag variables that were previously declared as arrays, even if they are in different scopes.

The easiest workaround is to simply use different variable names. Alternatively, you can [ignore](ignore) the check.

It is also possible to satisfy ShellCheck by declaring the `local` variable separately from assigning to it, e.g.:

```
#cb3-1foo () {
#cb3-2   local -a baz
#cb3-3   baz+=("foo" "bar")
#cb3-4   echo "${baz[@]}"
#cb3-5}
#cb3-6
#cb3-7bar () {
#cb3-8   local baz # ShellCheck gets confused if these lines are merged as local baz="qux"
#cb3-9   baz="qux"
#cb3-10   echo "$baz"
#cb3-11}
```

[ShellCheck](https://www.shellcheck.net) is a static analysis tool for shell scripts. This page is part of its documentation.
