ShellCheck: SC3016 – In POSIX sh, unary `-v` (in place of `[ -n "${var+x}" ]`) is undefined.

# SC3016 – ShellCheck Wiki

[See this page on GitHub](https://github.com/koalaman/shellcheck/wiki/SC3016)

[Sitemap](index.html)

## In POSIX sh, unary `-v` (in place of `[ -n "${var+x}" ]`) is undefined.

### Problematic code:

```
#cb1-1#!/bin/sh
#cb1-2if [ -v STY ]
#cb1-3then
#cb1-4  echo "STY is set, you are using screen"
#cb1-5fi
```

### Correct code:

Either switch to bash or ksh, or use:

```
#cb2-1#!/bin/sh
#cb2-2if [ -n "${STY+x}" ]
#cb2-3then
#cb2-4  echo "STY is set, you are using screen"
#cb2-5fi
```

### Rationale:

Your script uses a shell feature not supported by the shebang. Either rewrite the script to be portable, or change the shebang to explicitly require a shell like Bash.

In this case, `[ -v variable ]`, which checks if a variable is set, is [not
specified by POSIX](https://pubs.opengroup.org/onlinepubs/9699919799/utilities/test.html). It can be replaced with the portable `[ -n "${variable+x}" ]`, which uses the "alternative value if set" [parameter
expansion](https://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_06_02) syntax to accomplish the same thing.

### Exceptions:

None

### Related resources:

- Help by adding links to BashFAQ, StackOverflow, man pages, POSIX, etc!

[ShellCheck](https://www.shellcheck.net) is a static analysis tool for shell scripts. This page is part of its documentation.
