ShellCheck: SC2103 – Use a `( subshell )` to avoid having to `cd` back.

# SC2103 – ShellCheck Wiki

[See this page on GitHub](https://github.com/koalaman/shellcheck/wiki/SC2103)

[Sitemap](index.html)

## Use a `( subshell )` to avoid having to `cd` back.

### Problematic code:

```
#cb1-1for dir in */
#cb1-2do
#cb1-3  cd "$dir"
#cb1-4  convert index.png index.jpg
#cb1-5  cd ..
#cb1-6done
```

### Correct code:

```
#cb2-1for dir in */
#cb2-2do
#cb2-3  (
#cb2-4  cd "$dir" || exit
#cb2-5  convert index.png index.jpg
#cb2-6  )
#cb2-7done
```

or

```
#cb3-1for dir in */
#cb3-2do
#cb3-3  cd "$dir" || exit
#cb3-4  convert index.png index.jpg
#cb3-5  cd ..
#cb3-6done
```

### Rationale:

When doing `cd dir; somestuff; cd ..`, `cd dir` can fail when permissions are lacking, if the dir was deleted, or if `dir` is actually a file.

In this case, `somestuff` will run in the wrong directory and `cd ..` will take you to an even more wrong directory. In a loop, this will likely cause the next `cd` to fail as well, propagating this error and running these commands far away from the intended directories.

Check `cd`s exit status and/or use subshells to limit the effects of `cd`.

### Exceptions

If you set variables you can't use a subshell. In that case, you should definitely check the exit status of `cd`, which will also silence this suggestion.

[ShellCheck](https://www.shellcheck.net) is a static analysis tool for shell scripts. This page is part of its documentation.
