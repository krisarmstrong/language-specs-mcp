ShellCheck: SC2013 – To read lines rather than words, pipe/redirect to a `while read` loop.

# SC2013 – ShellCheck Wiki

[See this page on GitHub](https://github.com/koalaman/shellcheck/wiki/SC2013)

[Sitemap](index.html)

## To read lines rather than words, pipe/redirect to a `while read` loop.

### Problematic code:

```
#cb1-1for line in $(cat file | grep -v '^ *#')
#cb1-2do
#cb1-3  echo "Line: $line"
#cb1-4done
```

### Correct code:

```
#cb2-1grep -v '^ *#' file | while IFS= read -r line
#cb2-2do
#cb2-3  echo "Line: $line"
#cb2-4done
```

or without a subshell (bash, zsh, ksh):

```
#cb3-1while IFS= read -r line
#cb3-2do
#cb3-3  echo "Line: $line"
#cb3-4done < <(grep -v '^ *#' file)
```

or without a subshell, with a pipe (more portable, but write a file on the filesystem):

```
#cb4-1mkfifo mypipe
#cb4-2grep -v '^ *#' file > mypipe &
#cb4-3while IFS= read -r line
#cb4-4do
#cb4-5  echo "Line: $line"
#cb4-6done < mypipe
#cb4-7rm mypipe
```

NOTE: `grep -v '^ *#'` is a placeholder example and not needed. To just loop through a file:

```
#cb5-1while IFS= read -r line
#cb5-2do
#cb5-3  echo "Line: $line"
#cb5-4done < file
#cb5-5# or: done <<< "$variable"
```

### Rationale:

For loops by default (subject to `$IFS`) read word by word. Additionally, glob expansion will occur.

Given this text file:

```
#cb6-1foo *
#cb6-2bar
```

The for loop will print:

```
#cb7-1Line: foo
#cb7-2Line: aardwark.jpg
#cb7-3Line: bullfrog.jpg
#cb7-4...
```

The while loop will print:

```
#cb8-1Line: foo *
#cb8-2Line: bar
```

### Exceptions

If you do want to read word by word, you can set `$IFS` appropriately and disable globbing with `set -f`, and then [ignore](ignore) this warning. Alternatively, you can pipe through `tr ' ' '\n'` to turn words into lines, and then use `while read`. In Bash/Ksh, you can also use a `while read -a` loop to get an array of words per line.

[ShellCheck](https://www.shellcheck.net) is a static analysis tool for shell scripts. This page is part of its documentation.
