ShellCheck: SC2046 – Quote this to prevent word splitting.

# SC2046 – ShellCheck Wiki

[See this page on GitHub](https://github.com/koalaman/shellcheck/wiki/SC2046)

[Sitemap](index.html)

## Quote this to prevent word splitting.

### Problematic code:

```
#cb1-1ls -l $(getfilename)
```

### Correct code:

```
#cb2-1# getfilename outputs 1 file
#cb2-2ls -l "$(getfilename)"
#cb2-3
#cb2-4# getfilename outputs multiple files, linefeed separated
#cb2-5getfilename | while IFS='' read -r line
#cb2-6do
#cb2-7    ls -l "$line"
#cb2-8done
```

### Rationale:

When command expansions are unquoted, word splitting and globbing will occur. This often manifests itself by breaking when filenames contain spaces.

Trying to fix it by adding quotes or escapes to the data will not work. Instead, quote the command substitution itself.

If the command substitution outputs multiple pieces of data, use a loop instead.

### Exceptions

In rare cases you actually want word splitting, such as in

```
#cb3-1# shellcheck disable=SC2046
#cb3-2gcc $(pkg-config --libs openssl) client.c
```

This is because `pkg-config` outputs `-lssl -lcrypto`, which you want to break up by spaces into `-lssl` and `-lcrypto`.

A bash alternative in these cases is to use `read -a` for words or `mapfile` for lines. ksh can also use `read -a`, or a `while read` loop for lines. In this case, since `pkg-config` outputs words, you could use:

```
#cb4-1# Read words from one line into an array in bash and ksh, then expand each as args
#cb4-2read -ra args < <(pkg-config --libs openssl)
#cb4-3gcc "${args[@]}" client.c # expand as args
#cb4-4
#cb4-5# Read lines into an array, then expand each as args
#cb4-6readarray -t file_args < <(find /etc/ -type f | grep some-check)
#cb4-7your-linter.sh "${file_args[@]}" # expand as args
```

[ShellCheck](https://www.shellcheck.net) is a static analysis tool for shell scripts. This page is part of its documentation.
