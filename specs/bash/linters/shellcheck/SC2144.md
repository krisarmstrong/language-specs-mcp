ShellCheck: SC2144 – `-e` doesn't work with globs. Use a `for` loop.

# SC2144 – ShellCheck Wiki

[See this page on GitHub](https://github.com/koalaman/shellcheck/wiki/SC2144)

[Sitemap](index.html)

## `-e` doesn't work with globs. Use a `for` loop.

### Problematic code:

```
#cb1-1if [ -e dir/*.mp3 ]
#cb1-2then
#cb1-3  echo "There are mp3 files."
#cb1-4fi
```

### Correct code:

```
#cb2-1for file in dir/*.mp3
#cb2-2do
#cb2-3  if [ -e "$file" ]
#cb2-4  then
#cb2-5    echo "There are mp3 files"
#cb2-6    break
#cb2-7  fi
#cb2-8done
```

### Rationale:

`[ -e file* ]` only works if there's 0 or 1 matches. If there are multiple, it becomes `[ -e file1 file2 ]`, and the test fails.

`[[ -e file* ]]` doesn't work at all.

Instead, use a for loop to expand the glob and check each result individually.

If you are looking for the existence of a directory, do:

```
#cb3-1for f in /path/to/your/files*; do
#cb3-2
#cb3-3    ## Check if the glob gets expanded to existing files.
#cb3-4    ## If not, f here will be exactly the pattern above
#cb3-5    ## and the exists test will evaluate to false.
#cb3-6    [ -e "$f" ] && echo "files do exist" || echo "files do not exist"
#cb3-7
#cb3-8    ## This is all we needed to know, so we can break after the first iteration
#cb3-9    break
#cb3-10done
```

### Exceptions

If you are sure there will only ever be exactly 0 or 1 matches -- and `nullglob` is not enabled -- then the test happens to work.

You may still want to consider making this assumption explicit and failing fast if it's ever violated:

```
#cb4-1files=( dir/file* )
#cb4-2[ "${#files[@]}" -ge 2 ] && exit 1
#cb4-3if [ -e "${files[0]}" ]
#cb4-4then 
#cb4-5  echo "The file exists"
#cb4-6else
#cb4-7  echo "No such file"
#cb4-8fi
```

### Related resources:

- [BashFaq: How can I
check whether a directory is empty or not? How do I check for any *.mpg
files, or count how many there are?](https://mywiki.wooledge.org/BashFAQ/004)
- [sh - Check if
a file exists with wildcard in shell script - Stack Overflow](https://stackoverflow.com/a/6364244/2309247)

[ShellCheck](https://www.shellcheck.net) is a static analysis tool for shell scripts. This page is part of its documentation.
