ShellCheck: SC2220 – Invalid flags are not handled. Add a `*)` case.

# SC2220 – ShellCheck Wiki

[See this page on GitHub](https://github.com/koalaman/shellcheck/wiki/SC2220)

[Sitemap](index.html)

## Invalid flags are not handled. Add a `*)` case.

### Problematic code:

```
#cb1-1#!/bin/sh
#cb1-2while getopts "vr" f
#cb1-3do
#cb1-4  case "$f" in
#cb1-5    v) echo "verbose" ;;
#cb1-6    r) echo "recursive" ;;
#cb1-7  esac
#cb1-8done
```

### Correct code:

```
#cb2-1#!/bin/sh
#cb2-2while getopts "vr" f
#cb2-3do
#cb2-4  case "$f" in
#cb2-5    v) echo "verbose" ;;
#cb2-6    r) echo "recursive" ;;
#cb2-7    *) echo "usage: $0 [-v] [-r]" >&2
#cb2-8       exit 1 ;;
#cb2-9  esac
#cb2-10done
```

### Rationale:

The `case` statement handling `getopts` arguments does not have a default branch to handle unknown flags.

When a flag is not recognized, such as if passing `-Z` to the example code, `getopts` will set the variable to a literal question mark `?`. This should be handled along with all the valid flags, usually by printing a usage message and exiting with failure.

Using a `\?)` or `?)` case will also match invalid flags, but`*)` would additionally match things like the empty string if the variable name was misspelled.

### Exceptions:

If your script's logic handles unrecognized flags in another way, e.g. after the `case` statement, you can ignore this warning.

[ShellCheck](https://www.shellcheck.net) is a static analysis tool for shell scripts. This page is part of its documentation.
