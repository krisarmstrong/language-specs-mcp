ShellCheck: SC2221 – This pattern always overrides a later one.

# SC2221 – ShellCheck Wiki

[See this page on GitHub](https://github.com/koalaman/shellcheck/wiki/SC2221)

[Sitemap](index.html)

## This pattern always overrides a later one.

### Problematic code:

```
#cb1-1case "$1" in
#cb1-2  -?) echo "Usage: $0 [-n]";;
#cb1-3  -n) echo "Hello World";;
#cb1-4   *) exit 1;;
#cb1-5esac
```

### Correct code:

```
#cb2-1case "$1" in
#cb2-2  -\?) echo "Usage: $0 [-n]";;
#cb2-3# '-?') echo "Usage: $0 [-n]";;  # Also valid
#cb2-4  -n) echo "Hello World";;
#cb2-5   *) exit 1;;
#cb2-6esac
```

### Rationale:

You have specified multiple patterns in a `case` statement, where one will always override the other. The pattern being overridden is indicated with a [SC2222](SC2222) warning.

In the example, `-?` actually matches a dash followed by any character, such as `-n`. This means that the later `-n` branch will never trigger. In this case, the correct solution is to escape the `-\?` so that it doesn't match `-n`.

Another common reason for this is accidentally duplicating a branch. In this case, fix or delete the duplicate branch.

### Exceptions:

None. One could argue that having `-*|--*) echo "Invalid flag";` is a readability issue, even though the second pattern follows from the first. In this case, you can either rearrange the pattern from most to least specific, i.e. `--*|-*)` or ignore the error.

When ignoring this error, remember that ShellCheck directives have to go in front of the `case` statement, and not in front of the branch:

```
# shellcheck disable=SC2221,SC2222
case "$1" in
  -n) ...;;
  # no directive here
  -*|--*) echo "Unknown flag" ;;
esac
```

[ShellCheck](https://www.shellcheck.net) is a static analysis tool for shell scripts. This page is part of its documentation.
