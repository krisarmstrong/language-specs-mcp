{"language": "sql", "generatedAt": "2026-01-06T18:23:22.391024+00:00", "entries": [{"path": "generation-checklist.md", "category": "spec", "name": "generation-checklist", "content": "# SQL Generation Checklist\n\n**Read this BEFORE writing SQL. Security and performance matter from the start.**\n\n## Critical: You Must Do These\n\n### 1. NEVER Concatenate User Input into Queries\n```sql\n-- DANGEROUS - SQL injection vulnerability\nSELECT * FROM users WHERE id = ' + userId + '\nSELECT * FROM users WHERE name = '\" + userName + \"'\"\n\n-- SAFE - Use parameterized queries (in application code)\n-- Java: PreparedStatement\n-- Python: cursor.execute(\"SELECT * FROM users WHERE id = ?\", (user_id,))\n-- Node.js: pool.query(\"SELECT * FROM users WHERE id = $1\", [userId])\n```\n\n### 2. Always Use Explicit Column Names in SELECT\n```sql\n-- BAD - fragile, unclear what's returned\nSELECT * FROM users\n\n-- GOOD - explicit columns\nSELECT id, name, email, created_at\nFROM users\n\n-- Especially important in INSERT\nINSERT INTO users (name, email, created_at)\nVALUES ('Alice', 'alice@test.com', NOW())\n```\n\n### 3. Use Appropriate JOIN Types\n```sql\n-- Know your JOINs:\n-- INNER JOIN - only matching rows from both tables\nSELECT u.name, o.total\nFROM users u\nINNER JOIN orders o ON u.id = o.user_id\n\n-- LEFT JOIN - all from left, matching from right (or NULL)\nSELECT u.name, o.total\nFROM users u\nLEFT JOIN orders o ON u.id = o.user_id\n\n-- Never use implicit joins (comma syntax)\n-- BAD\nSELECT * FROM users, orders WHERE users.id = orders.user_id\n```\n\n### 4. Use Transactions for Multiple Related Operations\n```sql\n-- GOOD - atomic operations\nBEGIN TRANSACTION;\n\nUPDATE accounts SET balance = balance - 100 WHERE id = 1;\nUPDATE accounts SET balance = balance + 100 WHERE id = 2;\n\nCOMMIT;\n\n-- On error\nROLLBACK;\n```\n\n### 5. Always Have a WHERE Clause for UPDATE/DELETE\n```sql\n-- DANGEROUS - updates ALL rows!\nUPDATE users SET status = 'inactive'\n\n-- SAFE - specific condition\nUPDATE users SET status = 'inactive'\nWHERE last_login < DATE_SUB(NOW(), INTERVAL 1 YEAR)\n\n-- Use LIMIT for safety during testing\nDELETE FROM logs\nWHERE created_at < '2020-01-01'\nLIMIT 1000\n```\n\n## Important: Strong Recommendations\n\n### 6. Use Meaningful Table Aliases\n```sql\n-- BAD - cryptic aliases\nSELECT a.x, b.y FROM foo a JOIN bar b ON a.id = b.fid\n\n-- GOOD - meaningful aliases\nSELECT u.name, o.total\nFROM users u\nJOIN orders o ON u.id = o.user_id\n```\n\n### 7. Use COALESCE for NULL Handling\n```sql\n-- BAD - NULL propagates unexpectedly\nSELECT name, middle_name || ' ' || last_name AS full_name\n-- If middle_name is NULL, entire expression is NULL\n\n-- GOOD - handle NULLs explicitly\nSELECT name,\n       COALESCE(middle_name, '') || ' ' || last_name AS full_name\nFROM users\n\n-- GOOD - default values\nSELECT COALESCE(discount, 0) AS discount\nFROM products\n```\n\n### 8. Use EXISTS Instead of IN for Subqueries\n```sql\n-- BAD - IN with subquery (less efficient for large datasets)\nSELECT * FROM orders\nWHERE user_id IN (SELECT id FROM users WHERE status = 'active')\n\n-- GOOD - EXISTS is often faster\nSELECT * FROM orders o\nWHERE EXISTS (\n    SELECT 1 FROM users u\n    WHERE u.id = o.user_id AND u.status = 'active'\n)\n```\n\n### 9. Use CTEs for Complex Queries\n```sql\n-- BAD - deeply nested subqueries\nSELECT * FROM (\n    SELECT * FROM (\n        SELECT user_id, SUM(amount) as total\n        FROM orders\n        GROUP BY user_id\n    ) subq1\n    WHERE total > 1000\n) subq2\n\n-- GOOD - CTEs are readable\nWITH user_totals AS (\n    SELECT user_id, SUM(amount) as total\n    FROM orders\n    GROUP BY user_id\n),\nhigh_value_users AS (\n    SELECT * FROM user_totals\n    WHERE total > 1000\n)\nSELECT u.name, hvp.total\nFROM users u\nJOIN high_value_users hvp ON u.id = hvp.user_id\n```\n\n### 10. Use CASE for Conditional Logic\n```sql\n-- GOOD - readable conditional logic\nSELECT\n    name,\n    CASE\n        WHEN score >= 90 THEN 'A'\n        WHEN score >= 80 THEN 'B'\n        WHEN score >= 70 THEN 'C'\n        ELSE 'F'\n    END AS grade\nFROM students\n\n-- GOOD - conditional aggregation\nSELECT\n    COUNT(*) AS total_orders,\n    SUM(CASE WHEN status = 'completed' THEN 1 ELSE 0 END) AS completed,\n    SUM(CASE WHEN status = 'pending' THEN 1 ELSE 0 END) AS pending\nFROM orders\n```\n\n## Performance\n\n### 11. Index Columns Used in WHERE, JOIN, ORDER BY\n```sql\n-- Create indexes for frequently queried columns\nCREATE INDEX idx_users_email ON users(email);\nCREATE INDEX idx_orders_user_id ON orders(user_id);\nCREATE INDEX idx_orders_created_at ON orders(created_at);\n\n-- Composite index for multi-column conditions\nCREATE INDEX idx_orders_user_status ON orders(user_id, status);\n```\n\n### 12. Avoid Functions on Indexed Columns in WHERE\n```sql\n-- BAD - function prevents index use\nSELECT * FROM users\nWHERE YEAR(created_at) = 2024\n\n-- GOOD - range query uses index\nSELECT * FROM users\nWHERE created_at >= '2024-01-01'\n  AND created_at < '2025-01-01'\n\n-- BAD\nWHERE LOWER(email) = 'alice@test.com'\n\n-- GOOD - store normalized, or use functional index\nWHERE email = 'alice@test.com'\n```\n\n### 13. Use LIMIT for Large Result Sets\n```sql\n-- GOOD - paginated results\nSELECT * FROM orders\nORDER BY created_at DESC\nLIMIT 20 OFFSET 0   -- Page 1\n\n-- For large offsets, use keyset pagination\nSELECT * FROM orders\nWHERE created_at < :last_seen_date\nORDER BY created_at DESC\nLIMIT 20\n```\n\n### 14. Use EXPLAIN to Analyze Queries\n```sql\n-- Check query execution plan\nEXPLAIN SELECT * FROM orders\nWHERE user_id = 123 AND status = 'pending';\n\n-- Look for: table scans, missing indexes, inefficient joins\n```\n\n## Data Integrity\n\n### 15. Use Constraints\n```sql\n-- GOOD - enforce data integrity\nCREATE TABLE users (\n    id SERIAL PRIMARY KEY,\n    email VARCHAR(255) NOT NULL UNIQUE,\n    status VARCHAR(20) NOT NULL DEFAULT 'active'\n        CHECK (status IN ('active', 'inactive', 'suspended')),\n    created_at TIMESTAMP NOT NULL DEFAULT NOW()\n);\n\n-- Foreign key constraint\nCREATE TABLE orders (\n    id SERIAL PRIMARY KEY,\n    user_id INTEGER NOT NULL REFERENCES users(id),\n    total DECIMAL(10,2) NOT NULL CHECK (total >= 0)\n);\n```\n\n### 16. Use Appropriate Data Types\n```sql\n-- GOOD - correct types\nCREATE TABLE products (\n    id SERIAL PRIMARY KEY,\n    name VARCHAR(255) NOT NULL,\n    price DECIMAL(10,2) NOT NULL,        -- Not FLOAT for money!\n    quantity INTEGER NOT NULL DEFAULT 0,\n    is_active BOOLEAN NOT NULL DEFAULT true,\n    metadata JSONB,                       -- PostgreSQL JSON\n    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW()\n);\n```\n\n---\n\n**Quick Reference - Copy This Mental Model:**\n- NEVER concatenate user input (parameterize!)\n- Explicit column names, not `SELECT *`\n- Know your JOIN types\n- Transactions for related operations\n- Always WHERE on UPDATE/DELETE\n- COALESCE for NULL handling\n- EXISTS over IN for subqueries\n- CTEs for complex queries\n- Index WHERE/JOIN/ORDER columns\n- No functions on indexed columns in WHERE\n- LIMIT for large results\n- EXPLAIN to analyze\n- Constraints for integrity\n- DECIMAL for money, not FLOAT\n"}, {"path": "patterns/idioms.md", "category": "patterns", "name": "patterns/idioms", "content": "# SQL Idioms\n\n## Explicit column lists\n\n```sql\nSELECT id, name FROM users;\n```\n\n## Use parameterized queries\n\nAvoid string concatenation for user input.\n"}, {"path": "formatters/overview.md", "category": "formatters", "name": "formatters/overview", "content": "# SQL Formatters\n\n## sqlfluff\n\nSee: https://docs.sqlfluff.com/en/stable/formatter.html\n"}, {"path": "formatters/sqlfluff.md", "category": "formatters", "name": "formatters/sqlfluff", "content": "# SQLFluff Configuration\n\nSQLFluff is an extensible and modular SQL linter and auto-formatter supporting 27+ dialects.\n\n## Configuration File Formats\n\nSQLFluff searches for configuration in this priority order:\n1. `setup.cfg`\n2. `tox.ini`\n3. `pep8.ini`\n4. `.sqlfluff`\n5. `pyproject.toml`\n\nThe first four use INI-style formatting; `pyproject.toml` uses TOML syntax.\n\n## Configuration File Locations\n\nConfiguration cascades from most general to most specific:\n- SQLFluff package defaults\n- User's OS-specific app config directory (`~/.config/sqlfluff` on macOS/Unix)\n- User's home directory\n- Directories between home and current working directory\n- Current working directory\n- Subdirectories toward the file being linted\n- Directory containing the file being linted\n\nLater files override earlier ones.\n\n## Section Structure\n\n**INI-style files (.sqlfluff, setup.cfg, etc.):**\n```ini\n[sqlfluff]\ndialect = snowflake\ntemplater = jinja\nmax_line_length = 120\n\n[sqlfluff:indentation]\nindented_joins = False\n\n[sqlfluff:rules:capitalisation.keywords]\ncapitalisation_policy = upper\n```\n\n**pyproject.toml:**\n```toml\n[tool.sqlfluff.core]\ndialect = \"snowflake\"\ntemplater = \"jinja\"\nmax_line_length = 120\n\n[tool.sqlfluff.indentation]\nindented_joins = false\n\n[tool.sqlfluff.rules.capitalisation.keywords]\ncapitalisation_policy = \"upper\"\n```\n\n## Core Settings\n\n| Option | Description | Default |\n|--------|-------------|---------|\n| `dialect` | SQL dialect (ansi, bigquery, mysql, postgres, snowflake, etc.) | ansi |\n| `templater` | Template engine (raw, jinja, python, placeholder, dbt) | jinja |\n| `max_line_length` | Maximum line length | 80 |\n| `exclude_rules` | Comma-separated rules to disable | - |\n| `rules` | Comma-separated rules to enable (overrides exclude) | - |\n| `processes` | Parallel processes (-1 for auto) | 1 |\n| `large_file_skip_byte_limit` | Skip files larger than this | 0 (disabled) |\n\n## Indentation Settings\n\n```ini\n[sqlfluff:indentation]\nindent_unit = space\ntab_space_size = 4\nindented_joins = False\nindented_ctes = False\nindented_using_on = True\nindented_on_contents = True\nallow_implicit_indents = True\n```\n\n## Rule Configuration\n\nRules are configured under `[sqlfluff:rules]` with rule-specific subsections:\n\n```ini\n[sqlfluff:rules:capitalisation.keywords]\ncapitalisation_policy = consistent\n# Options: consistent, upper, lower, capitalise\n\n[sqlfluff:rules:capitalisation.identifiers]\nextended_capitalisation_policy = consistent\n\n[sqlfluff:rules:aliasing.table]\naliasing = explicit\n\n[sqlfluff:rules:aliasing.column]\naliasing = explicit\n\n[sqlfluff:rules:convention.select_trailing_comma]\nselect_clause_trailing_comma = forbid\n```\n\n## Layout Configuration\n\n```ini\n[sqlfluff:layout:type:comma]\nspacing_before = touch\nline_position = trailing\n\n[sqlfluff:layout:type:binary_operator]\nline_position = leading\n\n[sqlfluff:layout:type:statement_terminator]\nspacing_before = touch\nline_position = trailing\n```\n\n## In-File Directives\n\nUse SQL comments to apply configuration to individual files:\n\n```sql\n-- sqlfluff:dialect:postgres\n-- sqlfluff:max_line_length:120\n-- sqlfluff:rules:capitalisation.keywords:capitalisation_policy:upper\n```\n\n## Disabling Rules\n\n**Disable for entire file:**\n```sql\n-- sqlfluff:noqa\nSELECT * FROM table\n```\n\n**Disable specific rules:**\n```sql\n-- sqlfluff:noqa: LT01, LT02\nSELECT * FROM table\n```\n\n**Disable for a range:**\n```sql\n-- sqlfluff:noqa:start\nSELECT * FROM table\n-- sqlfluff:noqa:end\n```\n\n**Disable inline:**\n```sql\nSELECT * FROM table  -- noqa: AM04\n```\n\n## .sqlfluffignore File\n\nExclude files using glob patterns:\n\n```\n# Ignore migrations\nmigrations/\n**/migrations/*.sql\n\n# Ignore generated files\n*.generated.sql\n\n# Ignore specific directories\ntest_data/\nvendor/\n```\n\n## Templating Configuration\n\n**Jinja templating:**\n```ini\n[sqlfluff:templater:jinja]\napply_dbt_builtins = True\nlibrary_path = sqlfluff_libs\n\n[sqlfluff:templater:jinja:context]\nmy_variable = value\n```\n\n**Placeholder templating:**\n```ini\n[sqlfluff:templater:placeholder]\nparam_style = colon\n# Options: colon (:name), numeric_colon (:1), pyformat (%(name)s),\n#          dollar ($name), question (?), numeric_dollar ($1), percent (%s),\n#          ampersand (&name)\n```\n\n## CLI Options\n\n```bash\n# Lint files\nsqlfluff lint path/to/sql/\n\n# Fix files automatically\nsqlfluff fix path/to/sql/\n\n# Parse and show structure\nsqlfluff parse path/to/file.sql\n\n# Show configuration\nsqlfluff rules\n\n# Specify dialect\nsqlfluff lint --dialect postgres path/to/sql/\n```\n\nSee: https://docs.sqlfluff.com/en/stable/configuration/index.html\n"}, {"path": "stdlib/overview.md", "category": "stdlib", "name": "stdlib/overview", "content": "# SQL Functions and Operators (PostgreSQL)\\n\\nSee: https://www.postgresql.org/docs/current/functions.html\n"}, {"path": "stdlib/sqlite/commands.md", "category": "stdlib", "name": "stdlib/sqlite/commands", "content": "Query Language Understood by SQLiteindex.html Small. Fast. Reliable.\nChoose any three. \n\n- [Home](index.html)\n- [Menu](javascript:void(0))\n- [About](about.html)\n- [Documentation](docs.html)\n- [Download](download.html)\n- [License](copyright.html)\n- [Support](support.html)\n- [Purchase](prosupport.html)\n- [Search](javascript:void(0))\n\n- [About](about.html)\n- [Documentation](docs.html)\n- [Download](download.html)\n- [Support](support.html)\n- [Purchase](prosupport.html)\n\nSearch DocumentationSearch Changelog\n\n# SQL As Understood By SQLite\n\nSQLite understands most of the standard SQL language. But it does [omit some features](omitted.html) while at the same time adding a few features of its own. This document attempts to describe precisely what parts of the SQL language SQLite does and does not support. A list of [SQL keywords](lang_keywords.html) is also provided. The SQL language syntax is described by [syntax diagrams](syntaxdiagrams.html). \n\nThe following syntax documentation topics are available:\n\n  - [aggregate functions](lang_aggfunc.html)\n  - [ALTER TABLE](lang_altertable.html)\n  - [ANALYZE](lang_analyze.html)\n  - [ATTACH DATABASE](lang_attach.html)\n  - [BEGIN TRANSACTION](lang_transaction.html)\n  - [comment](lang_comment.html)\n  - [COMMIT TRANSACTION](lang_transaction.html)\n  - [core functions](lang_corefunc.html)\n  - [CREATE INDEX](lang_createindex.html)\n  - [CREATE TABLE](lang_createtable.html)\n  - [CREATE TRIGGER](lang_createtrigger.html)\n  - [CREATE VIEW](lang_createview.html)\n  - [CREATE VIRTUAL TABLE](lang_createvtab.html)\n  - [date and time functions](lang_datefunc.html)\n  - [DELETE](lang_delete.html)\n  - [DETACH DATABASE](lang_detach.html)\n  - [DROP INDEX](lang_dropindex.html)\n  - [DROP TABLE](lang_droptable.html)\n  - [DROP TRIGGER](lang_droptrigger.html)\n  - [DROP VIEW](lang_dropview.html)\n  - [END TRANSACTION](lang_transaction.html)\n  - [EXPLAIN](lang_explain.html)\n  - [expression](lang_expr.html)\n  - [INDEXED BY](lang_indexedby.html)\n  - [INSERT](lang_insert.html)\n  - [JSON functions](json1.html)\n  - [keywords](lang_keywords.html)\n  - [math functions](lang_mathfunc.html)\n  - [ON CONFLICT clause](lang_conflict.html)\n  - [PRAGMA](pragma.html#syntax)\n  - [REINDEX](lang_reindex.html)\n  - [RELEASE SAVEPOINT](lang_savepoint.html)\n  - [REPLACE](lang_replace.html)\n  - [RETURNING clause](lang_returning.html)\n  - [ROLLBACK TRANSACTION](lang_transaction.html)\n  - [SAVEPOINT](lang_savepoint.html)\n  - [SELECT](lang_select.html)\n  - [UPDATE](lang_update.html)\n  - [UPSERT](lang_upsert.html)\n  - [VACUUM](lang_vacuum.html)\n  - [window functions](windowfunctions.html)\n  - [WITH clause](lang_with.html)\n\nThe routines [sqlite3_prepare_v2()](c3ref/prepare.html), [sqlite3_prepare()](c3ref/prepare.html), [sqlite3_prepare16()](c3ref/prepare.html), [sqlite3_prepare16_v2()](c3ref/prepare.html), [sqlite3_exec()](c3ref/exec.html), and [sqlite3_get_table()](c3ref/free_table.html) accept an SQL statement list (sql-stmt-list) which is a semicolon-separated list of statements.\n\n[sql-stmt-list:](syntax/sql-stmt-list.html)\n\nEach SQL statement in the statement list is an instance of the following:\n\n[sql-stmt:](syntax/sql-stmt.html)\n\nThis page was last updated on 2024-04-01 12:41:31Z\n"}, {"path": "stdlib/sqlite/functions-core.md", "category": "stdlib", "name": "stdlib/sqlite/functions-core", "content": "Built-In Scalar SQL Functionsindex.html Small. Fast. Reliable.\nChoose any three. \n\n- [Home](index.html)\n- [Menu](javascript:void(0))\n- [About](about.html)\n- [Documentation](docs.html)\n- [Download](download.html)\n- [License](copyright.html)\n- [Support](support.html)\n- [Purchase](prosupport.html)\n- [Search](javascript:void(0))\n\n- [About](about.html)\n- [Documentation](docs.html)\n- [Download](download.html)\n- [Support](support.html)\n- [Purchase](prosupport.html)\n\nSearch DocumentationSearch Changelog Built-In Scalar SQL Functions \n\n# 1. Overview\n\nThe core functions shown below are available by default. [Date & Time functions](lang_datefunc.html), [aggregate functions](lang_aggfunc.html), [window functions](windowfunctions.html), [math functions](lang_mathfunc.html), and [JSON functions](json1.html) are documented separately. An application may define additional functions written in C and added to the database engine using the [sqlite3_create_function()](c3ref/create_function.html) API.\n\n[simple-function-invocation:](syntax/simple-function-invocation.html)\n\n See the [functions within expressions](lang_expr.html#*funcinexpr) documentation for more information about how SQL function invocations fit into the context of an SQL expression. \n\n# 2. List Of Core Functions\n\n- [abs(X)](lang_corefunc.html#abs)\n- [changes()](lang_corefunc.html#changes)\n- [char(X1,X2,...,XN)](lang_corefunc.html#char)\n- [coalesce(X,Y,...)](lang_corefunc.html#coalesce)\n- [concat(X,...)](lang_corefunc.html#concat)\n- [concat_ws(SEP,X,...)](lang_corefunc.html#concat_ws)\n- [format(FORMAT,...)](lang_corefunc.html#format)\n- [glob(X,Y)](lang_corefunc.html#glob)\n- [hex(X)](lang_corefunc.html#hex)\n- [if(B1,V1,...)](lang_corefunc.html#iif)\n- [ifnull(X,Y)](lang_corefunc.html#ifnull)\n- [iif(B1,V1,...)](lang_corefunc.html#iif)\n- [instr(X,Y)](lang_corefunc.html#instr)\n- [last_insert_rowid()](lang_corefunc.html#last_insert_rowid)\n- [length(X)](lang_corefunc.html#length)\n- [like(X,Y)](lang_corefunc.html#like)\n- [like(X,Y,Z)](lang_corefunc.html#like)\n- [likelihood(X,Y)](lang_corefunc.html#likelihood)\n- [likely(X)](lang_corefunc.html#likely)\n- [load_extension(X)](lang_corefunc.html#load_extension)\n- [load_extension(X,Y)](lang_corefunc.html#load_extension)\n- [lower(X)](lang_corefunc.html#lower)\n- [ltrim(X)](lang_corefunc.html#ltrim)\n- [ltrim(X,Y)](lang_corefunc.html#ltrim)\n- [max(X,Y,...)](lang_corefunc.html#max_scalar)\n- [min(X,Y,...)](lang_corefunc.html#min_scalar)\n- [nullif(X,Y)](lang_corefunc.html#nullif)\n- [octet_length(X)](lang_corefunc.html#octet_length)\n- [printf(FORMAT,...)](lang_corefunc.html#printf)\n- [quote(X)](lang_corefunc.html#quote)\n- [random()](lang_corefunc.html#random)\n- [randomblob(N)](lang_corefunc.html#randomblob)\n- [replace(X,Y,Z)](lang_corefunc.html#replace)\n- [round(X)](lang_corefunc.html#round)\n- [round(X,Y)](lang_corefunc.html#round)\n- [rtrim(X)](lang_corefunc.html#rtrim)\n- [rtrim(X,Y)](lang_corefunc.html#rtrim)\n- [sign(X)](lang_corefunc.html#sign)\n- [soundex(X)](lang_corefunc.html#soundex)\n- [sqlite_compileoption_get(N)](lang_corefunc.html#sqlite_compileoption_get)\n- [sqlite_compileoption_used(X)](lang_corefunc.html#sqlite_compileoption_used)\n- [sqlite_offset(X)](lang_corefunc.html#sqlite_offset)\n- [sqlite_source_id()](lang_corefunc.html#sqlite_source_id)\n- [sqlite_version()](lang_corefunc.html#sqlite_version)\n- [substr(X,Y)](lang_corefunc.html#substr)\n- [substr(X,Y,Z)](lang_corefunc.html#substr)\n- [substring(X,Y)](lang_corefunc.html#substr)\n- [substring(X,Y,Z)](lang_corefunc.html#substr)\n- [total_changes()](lang_corefunc.html#total_changes)\n- [trim(X)](lang_corefunc.html#trim)\n- [trim(X,Y)](lang_corefunc.html#trim)\n- [typeof(X)](lang_corefunc.html#typeof)\n- [unhex(X)](lang_corefunc.html#unhex)\n- [unhex(X,Y)](lang_corefunc.html#unhex)\n- [unicode(X)](lang_corefunc.html#unicode)\n- [unistr(X)](lang_corefunc.html#unistr)\n- [unistr_quote(X)](lang_corefunc.html#unistr_quote)\n- [unlikely(X)](lang_corefunc.html#unlikely)\n- [upper(X)](lang_corefunc.html#upper)\n- [zeroblob(N)](lang_corefunc.html#zeroblob)\n\n# 3. Descriptions of built-in scalar SQL functions\n\nabs(X)\n\n The abs(X) function returns the absolute value of the numeric argument X. Abs(X) returns NULL if X is NULL. Abs(X) returns 0.0 if X is a string or blob that cannot be converted to a numeric value. If X is the integer -9223372036854775808 then abs(X) throws an integer overflow error since there is no equivalent positive 64-bit two's complement value. \n\nchanges()\n\n The changes() function returns the number of database rows that were changed or inserted or deleted by the most recently completed INSERT, DELETE, or UPDATE statement, exclusive of statements in lower-level triggers. The changes() SQL function is a wrapper around the [sqlite3_changes64()](c3ref/changes.html) C/C++ function and hence follows the same rules for counting changes. \n\nchar(X1,X2,...,XN)\n\n The char(X1,X2,...,XN) function returns a string composed of characters having the unicode code point values of integers X1 through XN, respectively. \n\ncoalesce(X,Y,...)\n\n The coalesce() function returns a copy of its first non-NULL argument, or NULL if all arguments are NULL. Coalesce() must have at least 2 arguments. \n\nconcat(X,...)\n\n The concat(...) function returns a string which is the concatenation of the string representation of all of its non-NULL arguments. If all arguments are NULL, then concat() returns an empty string. \n\nconcat_ws(SEP,X,...)\n\n The concat_ws(SEP,...) function returns a string that is the concatenation of all non-null arguments beyond the first argument, using the text value of the first argument as a separator. If the first argument is NULL, then concat_ws() returns NULL. If all arguments other than the first are NULL, then concat_ws() returns an empty string. \n\nformat(FORMAT,...)\n\n The format(FORMAT,...) SQL function works like the [sqlite3_mprintf()](c3ref/mprintf.html) C-language function and the printf() function from the standard C library. The first argument is a format string that specifies how to construct the output string using values taken from subsequent arguments. If the FORMAT argument is missing or NULL then the result is NULL. The %n format is silently ignored and does not consume an argument. The %p format is an alias for %X. The %z format is interchangeable with %s. If there are too few arguments in the argument list, missing arguments are assumed to have a NULL value, which is translated into 0 or 0.0 for numeric formats or an empty string for %s. See the [built-in printf()](printf.html) documentation for additional information. \n\nglob(X,Y)\n\n The glob(X,Y) function is equivalent to the expression \"Y GLOB X\". Note that the X and Y arguments are reversed in the glob() function relative to the infix [GLOB](lang_expr.html#glob) operator. Y is the string and X is the pattern. So, for example, the following expressions are equivalent: \n\n```\n\n     name GLOB '*helium*'\n     glob('*helium*',name)\n  \n```\n\nIf the [sqlite3_create_function()](c3ref/create_function.html) interface is used to override the glob(X,Y) function with an alternative implementation then the [GLOB](lang_expr.html#glob) operator will invoke the alternative implementation. \n\nhex(X)\n\n The hex() function interprets its argument as a BLOB and returns a string which is the upper-case hexadecimal rendering of the content of that blob. \n\n If the argument X in \"hex(X)\" is an integer or floating point number, then \"interprets its argument as a BLOB\" means that the binary number is first converted into a UTF8 text representation, then that text is interpreted as a BLOB. Hence, \"hex(12345678)\" renders as \"3132333435363738\" not the binary representation of the integer value \"0000000000BC614E\". \n\n See also: [unhex()](lang_corefunc.html#unhex)\n\nifnull(X,Y)\n\n The ifnull() function returns a copy of its first non-NULL argument, or NULL if both arguments are NULL. Ifnull() must have exactly 2 arguments. The ifnull() function is equivalent to [coalesce()](lang_corefunc.html#coalesce) with two arguments. \n\niif(B1,V1,...)\nif(B1,V1,...)\n\n The iif(B1,V1,...,BN,VN) function takes arguments in pairs. The first argument of each pair is a Boolean and the second argument is a value to return if the Boolean is true. The iif() function returns the value associated with the first true Boolean. If the number of arguments to iif() is odd, then the last argument is a value that returned if all prior Boolean arguments are false. If the number of arguments is even and all Boolean arguments are false, then NULL is returned. The iif() function requires at least two arguments. The iif() function is really a short-hand notation for a [CASE expression](lang_expr.html#case). For example, the iif(X,Y,Z) function is logically equivalent to and generates the same [bytecode](opcode.html) as the [CASE expression](lang_expr.html#case) \"CASE WHEN X THEN Y ELSE Z END\". The if() function is just an alternative spelling for iif(). \n\nThe iif() function uses short-circuit evaluation. Arguments are only evaluated if necessary to compute the final result. So, for example, if one of the value arguments involves an expensive computation (such as an elaborate subquery) but the corresponding Boolean is false, the expensive computation never occurs. Similarly, Boolean arguments past the first one that is true are never evaluated. \n\nThe iif() function originally required exactly three arguments. The two-argument version of iif() and the ability to spell the function as \"if()\" were features added in SQLite version 3.48.0 (2025-01-14) The ability to accept more than 3 arguments was added in SQLite version 3.49.0 (2025-02-06). \n\ninstr(X,Y)\n\n The instr(X,Y) function finds the first occurrence of string Y within string X and returns the number of prior characters plus 1, or 0 if Y is nowhere found within X. Or, if X and Y are both BLOBs, then instr(X,Y) returns one more than the number of bytes prior to the first occurrence of Y, or 0 if Y does not occur anywhere within X. If both arguments X and Y to instr(X,Y) are non-NULL and are not BLOBs then both are interpreted as strings. If either X or Y are NULL in instr(X,Y) then the result is NULL. \n\nlast_insert_rowid()\n\n The last_insert_rowid() function returns the [ROWID](lang_createtable.html#rowid) of the last row insert from the database connection which invoked the function. The last_insert_rowid() SQL function is a wrapper around the [sqlite3_last_insert_rowid()](c3ref/last_insert_rowid.html) C/C++ interface function. \n\nlength(X)\n\n For a string value X, the length(X) function returns the number of Unicode code points (not bytes) in input string X prior to the first U+0000 character. Since SQLite strings do not normally contain NUL characters, the length(X) function will usually return the total number of characters in the string X. For a blob value X, length(X) returns the number of bytes in the blob. If X is NULL then length(X) is NULL. If X is numeric then length(X) returns the length of a string representation of X. \n\n Note that for strings, the length(X) function returns the character or code-point length of the string, not the byte length. The character length is the number of characters in the string. The character length is always different from the byte length for UTF-16 strings, and can be different from the byte length for UTF-8 strings if the string contains multi-byte characters. Use the [octet_length()](lang_corefunc.html#octet_length) function to find the byte length of a string. \n\n For BLOB values, length(X) always returns the byte-length of the BLOB. \n\n For string values, length(X) must read the entire string into memory in order to compute the character length. But for BLOB values, reading the whole string into memory is not necessary as SQLite already knows how many bytes are in the BLOB. Hence, for multi-megabyte values, the length(X) function is usually much faster for BLOBs than for strings, since it does not need to load the value into memory. \n\nlike(X,Y)\nlike(X,Y,Z)\n\n The like() function is used to implement the \"Y LIKE X [ESCAPE Z]\" expression. If the optional ESCAPE clause is present, then the like() function is invoked with three arguments. Otherwise, it is invoked with two arguments only. Note that the X and Y parameters are reversed in the like() function relative to the infix [LIKE](lang_expr.html#like) operator. X is the pattern and Y is the string to match against that pattern. Hence, the following expressions are equivalent: \n\n```\n\n     name LIKE '%neon%'\n     like('%neon%',name)\n  \n```\n\nThe [sqlite3_create_function()](c3ref/create_function.html) interface can be used to override the like() function and thereby change the operation of the [LIKE](lang_expr.html#like) operator. When overriding the like() function, it may be important to override both the two and three argument versions of the like() function. Otherwise, different code may be called to implement the [LIKE](lang_expr.html#like) operator depending on whether or not an ESCAPE clause was specified. \n\nlikelihood(X,Y)\n\n The likelihood(X,Y) function returns argument X unchanged. The value Y in likelihood(X,Y) must be a floating point constant between 0.0 and 1.0, inclusive. The likelihood(X) function is a no-op that the code generator optimizes away so that it consumes no CPU cycles during run-time (that is, during calls to [sqlite3_step()](c3ref/step.html)). The purpose of the likelihood(X,Y) function is to provide a hint to the query planner that the argument X is a boolean that is true with a probability of approximately Y. The [unlikely(X)](lang_corefunc.html#unlikely) function is short-hand for likelihood(X,0.0625). The [likely(X)](lang_corefunc.html#likely) function is short-hand for likelihood(X,0.9375). \n\nlikely(X)\n\n The likely(X) function returns the argument X unchanged. The likely(X) function is a no-op that the code generator optimizes away so that it consumes no CPU cycles at run-time (that is, during calls to [sqlite3_step()](c3ref/step.html)). The purpose of the likely(X) function is to provide a hint to the query planner that the argument X is a boolean value that is usually true. The likely(X) function is equivalent to [likelihood](lang_corefunc.html#likelihood)(X,0.9375). See also: [unlikely(X)](lang_corefunc.html#unlikely). \n\nload_extension(X)\nload_extension(X,Y)\n\n The load_extension(X,Y) function loads [SQLite extensions](loadext.html) out of the shared library file named X using the entry point Y. The result of load_extension() is always a NULL. If Y is omitted then the default entry point name is used. The load_extension() function raises an exception if the extension fails to load or initialize correctly. \n\nThe load_extension() function will fail if the extension attempts to modify or delete an SQL function or collating sequence. The extension can add new functions or collating sequences, but cannot modify or delete existing functions or collating sequences because those functions and/or collating sequences might be used elsewhere in the currently running SQL statement. To load an extension that changes or deletes functions or collating sequences, use the [sqlite3_load_extension()](c3ref/load_extension.html) C-language API.\n\nFor security reasons, extension loading is disabled by default and must be enabled by a prior call to [sqlite3_enable_load_extension()](c3ref/enable_load_extension.html).\n\nlower(X)\n\n The lower(X) function returns a copy of string X with all ASCII characters converted to lower case. The default built-in lower() function works for ASCII characters only. To do case conversions on non-ASCII characters, load the ICU extension. \n\nltrim(X)\nltrim(X,Y)\n\n The ltrim(X,Y) function returns a string formed by removing any and all characters that appear in Y from the left side of X. If the Y argument is omitted, ltrim(X) removes spaces from the left side of X. \n\nmax(X,Y,...)\n\n The multi-argument max() function returns the argument with the maximum value, or return NULL if any argument is NULL. The multi-argument max() function searches its arguments from left to right for an argument that defines a collating function and uses that collating function for all string comparisons. If none of the arguments to max() define a collating function, then the BINARY collating function is used. Note that max() is a simple function when it has 2 or more arguments but operates as an [aggregate function](lang_aggfunc.html#max_agg) if given only a single argument. \n\nmin(X,Y,...)\n\n The multi-argument min() function returns the argument with the minimum value. The multi-argument min() function searches its arguments from left to right for an argument that defines a collating function and uses that collating function for all string comparisons. If none of the arguments to min() define a collating function, then the BINARY collating function is used. Note that min() is a simple function when it has 2 or more arguments but operates as an [aggregate function](lang_aggfunc.html#min_agg) if given only a single argument. \n\nnullif(X,Y)\n\n The nullif(X,Y) function returns its first argument if the arguments are different and NULL if the arguments are the same. The nullif(X,Y) function searches its arguments from left to right for an argument that defines a collating function and uses that collating function for all string comparisons. If neither argument to nullif() defines a collating function then the BINARY collating function is used. \n\noctet_length(X)\n\n The octet_length(X) function returns the number of bytes in the encoding of text string X. If X is NULL then octet_length(X) returns NULL. If X is a BLOB value, then octet_length(X) is the same as [length(X)](lang_corefunc.html#length). If X is a numeric value, then octet_length(X) returns the number of bytes in a text rendering of that number. \n\n Because octet_length(X) returns the number of bytes in X, not the number of characters or code-points, the value returned depends on the database encoding. The octet_length() function can return different answers for the same input string if the database encoding is UTF16 instead of UTF8. \n\n If argument X is a table column and the value is of type text or blob, then octet_length(X) avoids reading the content of X from disk, as the byte length can be computed from metadata. Thus, octet_length(X) is efficient even if X is a column containing a multi-megabyte text or blob value. \n\nprintf(FORMAT,...)\n\n The printf() SQL function is an alias for the [format() SQL function](lang_corefunc.html#format). The format() SQL function was originally named printf(). But the name was later changed to format() for compatibility with other database engines. The printf() name is retained as an alias so as not to break legacy code. \n\nquote(X)\n\n The quote(X) function returns the text of an SQL literal which is the value of its argument suitable for inclusion into an SQL statement. Strings are surrounded by single-quotes with escapes on interior quotes as needed. BLOBs are encoded as hexadecimal literals. Strings with embedded NUL characters cannot be represented as string literals in SQL and hence the returned string literal is truncated prior to the first NUL. \n\n The [unistr_quote(X)](lang_corefunc.html#unistr_quote) function works like quote(X) except that it also escapes control characters. \n\nrandom()\n\n The random() function returns a pseudo-random integer between -9223372036854775807 and +9223372036854775807. \n\n The random() function deliberately avoids generating -9223372036854775808 so that its value can always be passed to [abs()](lang_corefunc.html#abs). The random() function has behaved this way since version 3.3.5 (circa 2006) but this documentation incorrectly stated that -9223372036854775808 was a possible result until 2025-07-25. \n\nrandomblob(N)\n\n The randomblob(N) function return an N-byte blob containing pseudo-random bytes. If N is less than 1 then a 1-byte random blob is returned. \n\nHint: applications can generate globally unique identifiers using this function together with [hex()](lang_corefunc.html#hex) and/or [lower()](lang_corefunc.html#lower) like this:\n\n hex(randomblob(16))\n lower(hex(randomblob(16))) \n\nreplace(X,Y,Z)\n\n The replace(X,Y,Z) function returns a string formed by substituting string Z for every occurrence of string Y in string X. The [BINARY](datatype3.html#collation) collating sequence is used for comparisons. If Y is an empty string then return X unchanged. If Z is not initially a string, it is cast to a UTF-8 string prior to processing. \n\nround(X)\nround(X,Y)\n\n The round(X,Y) function returns a floating-point value X rounded to Y digits to the right of the decimal point. If the Y argument is omitted or negative, it is taken to be 0. \n\nrtrim(X)\nrtrim(X,Y)\n\n The rtrim(X,Y) function returns a string formed by removing any and all characters that appear in Y from the right side of X. If the Y argument is omitted, rtrim(X) removes spaces from the right side of X. \n\nsign(X)\n\n The sign(X) function returns -1, 0, or +1 if the argument X is a numeric value that is negative, zero, or positive, respectively. If the argument to sign(X) is NULL or is a string or blob that cannot be losslessly converted into a number, then sign(X) returns NULL. \n\nsoundex(X)\n\n The soundex(X) function returns a string that is the soundex encoding of the string X. The string \"?000\" is returned if the argument is NULL or contains no ASCII alphabetic characters. This function is omitted from SQLite by default. It is only available if the [SQLITE_SOUNDEX](compile.html#soundex) compile-time option is used when SQLite is built. \n\nsqlite_compileoption_get(N)\n\n The sqlite_compileoption_get() SQL function is a wrapper around the [sqlite3_compileoption_get()](c3ref/compileoption_get.html) C/C++ function. This routine returns the N-th compile-time option used to build SQLite or NULL if N is out of range. See also the [compile_options pragma](pragma.html#pragma_compile_options). \n\nsqlite_compileoption_used(X)\n\n The sqlite_compileoption_used() SQL function is a wrapper around the [sqlite3_compileoption_used()](c3ref/compileoption_get.html) C/C++ function. When the argument X to sqlite_compileoption_used(X) is a string which is the name of a compile-time option, this routine returns true (1) or false (0) depending on whether or not that option was used during the build. \n\nsqlite_offset(X)\n\n The sqlite_offset(X) function returns the byte offset in the database file for the beginning of the record from which value would be read. If X is not a column in an ordinary table, then sqlite_offset(X) returns NULL. The value returned by sqlite_offset(X) might reference either the original table or an index, depending on the query. If the value X would normally be extracted from an index, the sqlite_offset(X) returns the offset to the corresponding index record. If the value X would be extracted from the original table, then sqlite_offset(X) returns the offset to the table record. \n\nThe sqlite_offset(X) SQL function is only available if SQLite is built using the [-DSQLITE_ENABLE_OFFSET_SQL_FUNC](compile.html#enable_offset_sql_func) compile-time option. \n\nsqlite_source_id()\n\n The sqlite_source_id() function returns a string that identifies the specific version of the source code that was used to build the SQLite library. The string returned by sqlite_source_id() is the date and time that the source code was checked in followed by the SHA3-256 hash for that check-in. This function is an SQL wrapper around the [sqlite3_sourceid()](c3ref/libversion.html) C interface. \n\nsqlite_version()\n\n The sqlite_version() function returns the version string for the SQLite library that is running. This function is an SQL wrapper around the [sqlite3_libversion()](c3ref/libversion.html) C-interface. \n\nsubstr(X,Y,Z)\nsubstr(X,Y)\nsubstring(X,Y,Z)\nsubstring(X,Y)\n\n The substr(X,Y,Z) function returns a substring of input string X that begins with the Y-th character and which is Z characters long. If Z is omitted then substr(X,Y) returns all characters through the end of the string X beginning with the Y-th. The left-most character of X is number 1. If Y is negative then the first character of the substring is found by counting from the right rather than the left. If Z is negative then the abs(Z) characters preceding the Y-th character are returned. If X is a string then characters indices refer to actual UTF-8 characters. If X is a BLOB then the indices refer to bytes. \n\n \"substring()\" is an alias for \"substr()\" beginning with SQLite version 3.34. \n\ntotal_changes()\n\n The total_changes() function returns the number of row changes caused by INSERT, UPDATE or DELETE statements since the current database connection was opened. This function is a wrapper around the [sqlite3_total_changes64()](c3ref/total_changes.html) C/C++ interface. \n\ntrim(X)\ntrim(X,Y)\n\n The trim(X,Y) function returns a string formed by removing any and all characters that appear in Y from both ends of X. If the Y argument is omitted, trim(X) removes spaces from both ends of X. \n\ntypeof(X)\n\n The typeof(X) function returns a string that indicates the [datatype](datatype3.html) of the expression X: \"null\", \"integer\", \"real\", \"text\", or \"blob\". \n\nunhex(X)\nunhex(X,Y)\n\n The unhex(X,Y) function returns a BLOB value which is the decoding of the hexadecimal string X. If X contains any characters that are not hexadecimal digits and which are not in Y, then unhex(X,Y) returns NULL. If Y is omitted, it is understood to be an empty string and hence X must be a pure hexadecimal string. All hexadecimal digits in X must occur in pairs, with both digits of each pair beginning immediately adjacent to one another, or else unhex(X,Y) returns NULL. If either parameter X or Y is NULL, then unhex(X,Y) returns NULL. The X input may contain an arbitrary mix of upper and lower case hexadecimal digits. Hexadecimal digits in Y have no affect on the translation of X. Only characters in Y that are not hexadecimal digits are ignored in X. \n\n See also: [hex()](lang_corefunc.html#hex)\n\nunicode(X)\n\n The unicode(X) function returns the numeric unicode code point corresponding to the first character of the string X. If the argument to unicode(X) is not a string then the result is unspecified. \n\nunistr(X)\n\n The unistr(X) function interprets backslash escapes in input string X and returns a new string with those escapes converted into the actual Unicode codepoints that they represent. This function, added in SQLite version 3.50.0 (2025-05-29), is intended to work the same as in PostgreSQL, SQL Server, and Oracle. The PostgreSQL documentation says: \"Unicode characters can be specified as \\XXXX (4 hexadecimal digits), \\+XXXXXX (6 hexadecimal digits), \\uXXXX (4 hexadecimal digits), or \\UXXXXXXXX (8 hexadecimal digits). To specify a backslash, write two backslashes. All other characters are taken literally.\" \n\nunistr_quote(X)\n\n The unistr_quote(X) function returns the text of an SQL literal or constant expression that encodes the value of its argument X and is suitable for inclusion into an SQL statement. In most cases, the output of unistr_quote(X) is identical to [quote(X)](lang_corefunc.html#quote). However, if X is text that contains control characters in the range U+0001 through U+001f, then those characters and any \"\\\" characters in X are escaped using JSON-style backslash escapes and the entire output is enclosed within \"[unistr](lang_corefunc.html#unistr)(..)\". This makes the resulting text safe for display on devices that interpret [ANSI escape codes](https://en.wikipedia.org/wiki/ANSI_escape_code). \n\nunlikely(X)\n\n The unlikely(X) function returns the argument X unchanged. The unlikely(X) function is a no-op that the code generator optimizes away so that it consumes no CPU cycles at run-time (that is, during calls to [sqlite3_step()](c3ref/step.html)). The purpose of the unlikely(X) function is to provide a hint to the query planner that the argument X is a boolean value that is usually not true. The unlikely(X) function is equivalent to [likelihood](lang_corefunc.html#likelihood)(X, 0.0625). \n\nupper(X)\n\n The upper(X) function returns a copy of input string X in which all lower-case ASCII characters are converted to their upper-case equivalent. \n\nzeroblob(N)\n\n The zeroblob(N) function returns a BLOB consisting of N bytes of 0x00. SQLite manages these zeroblobs very efficiently. Zeroblobs can be used to reserve space for a BLOB that is later written using [incremental BLOB I/O](c3ref/blob_open.html). This SQL function is implemented using the [sqlite3_result_zeroblob()](c3ref/result_blob.html) routine from the C/C++ interface. \n\nThis page was last updated on 2025-11-13 07:12:58Z\n"}, {"path": "stdlib/sqlite/functions-aggregate.md", "category": "stdlib", "name": "stdlib/sqlite/functions-aggregate", "content": "Built-in Aggregate Functionsindex.html Small. Fast. Reliable.\nChoose any three. \n\n- [Home](index.html)\n- [Menu](javascript:void(0))\n- [About](about.html)\n- [Documentation](docs.html)\n- [Download](download.html)\n- [License](copyright.html)\n- [Support](support.html)\n- [Purchase](prosupport.html)\n- [Search](javascript:void(0))\n\n- [About](about.html)\n- [Documentation](docs.html)\n- [Download](download.html)\n- [Support](support.html)\n- [Purchase](prosupport.html)\n\nSearch DocumentationSearch Changelog Built-in Aggregate Functions \n\n# 1. Syntax\n\n[aggregate-function-invocation:](syntax/aggregate-function-invocation.html)hide\n\n[expr:](syntax/expr.html)show\n\n[function-arguments:](syntax/function-arguments.html)show\n\n[literal-value:](syntax/literal-value.html)show\n\n[over-clause:](syntax/over-clause.html)show\n\n[frame-spec:](syntax/frame-spec.html)show\n\n[raise-function:](syntax/raise-function.html)show\n\n[select-stmt:](syntax/select-stmt.html)show\n\n[common-table-expression:](syntax/common-table-expression.html)show\n\n[compound-operator:](syntax/compound-operator.html)show\n\n[join-clause:](syntax/join-clause.html)show\n\n[join-constraint:](syntax/join-constraint.html)show\n\n[join-operator:](syntax/join-operator.html)show\n\n[result-column:](syntax/result-column.html)show\n\n[table-or-subquery:](syntax/table-or-subquery.html)show\n\n[window-defn:](syntax/window-defn.html)show\n\n[frame-spec:](syntax/frame-spec.html)show\n\n[type-name:](syntax/type-name.html)show\n\n[signed-number:](syntax/signed-number.html)show\n\n[filter-clause:](syntax/filter-clause.html)show\n\n[ordering-term:](syntax/ordering-term.html)show\n\n The aggregate functions shown below are available by default. There are two more aggregates grouped with the [JSON SQL functions](json1.html). Applications can define custom aggregate functions using the [sqlite3_create_function()](c3ref/create_function.html) interface.\n\n In any aggregate function that takes a single argument, that argument can be preceded by the keyword DISTINCT. In such cases, duplicate elements are filtered before being passed into the aggregate function. For example, the function \"count(distinct X)\" will return the number of distinct values of column X instead of the total number of non-null values in column X. \n\n If a FILTER clause is provided, then only rows for which the expr is true are included in the aggregate. \n\n If an ORDER BY clause is provided, that clause determines the order in which the inputs to the aggregate are processed. For aggregate functions like max() and count(), the input order does not matter. But for things like [string_agg()](lang_aggfunc.html#group_concat) and [json_group_object()](json1.html#jgroupobject), the ORDER BY clause will make a difference in the result. If no ORDER BY clause is specified, the inputs to the aggregate occur in an arbitrary order that might change from one invocation to the next. \n\n See also: [scalar functions](lang_corefunc.html) and [window functions](windowfunctions.html). \n\n# 2. List of built-in aggregate functions\n\n- [avg(X)](lang_aggfunc.html#avg)\n- [count(*)](lang_aggfunc.html#count)\n- [count(X)](lang_aggfunc.html#count)\n- [group_concat(X)](lang_aggfunc.html#group_concat)\n- [group_concat(X,Y)](lang_aggfunc.html#group_concat)\n- [max(X)](lang_aggfunc.html#max_agg)\n- [median(X)](lang_aggfunc.html#median)\n- [min(X)](lang_aggfunc.html#min_agg)\n- [percentile(Y,P)](lang_aggfunc.html#percentile)\n- [percentile_cont(Y,P)](lang_aggfunc.html#percentile_cont)\n- [percentile_disc(Y,P)](lang_aggfunc.html#percentile_disc)\n- [string_agg(X,Y)](lang_aggfunc.html#group_concat)\n- [sum(X)](lang_aggfunc.html#sumunc)\n- [total(X)](lang_aggfunc.html#sumunc)\n\n# 3. Descriptions of built-in aggregate functions\n\navg(X)\n\n The avg() function returns the average value of all non-NULL X within a group. String and BLOB values that do not look like numbers are interpreted as 0. The result of avg() is always a floating point value whenever there is at least one non-NULL input even if all inputs are integers. The result of avg() is NULL if there are no non-NULL inputs. The result of avg() is computed as [total()](lang_aggfunc.html#sumunc)/[count()](lang_aggfunc.html#count) so all of the constraints that apply to [total()](lang_aggfunc.html#sumunc) also apply to avg(). \n\ncount(X)\ncount(*)\n\n The count(X) function returns a count of the number of times that X is not NULL in a group. The count(*) function (with no arguments) returns the total number of rows in the group. \n\ngroup_concat(X)\ngroup_concat(X,Y)\nstring_agg(X,Y)\n\n The group_concat() function returns a string which is the concatenation of all non-NULL values of X. If parameter Y is present then it is used as the separator between instances of X. A comma (\",\") is used as the separator if Y is omitted. \n\n The string_agg(X,Y) function is an alias for group_concat(X,Y). String_agg() is compatible with PostgreSQL and SQL-Server and group_concat() is compatible with MySQL. \n\n The order of the concatenated elements is arbitrary unless an ORDER BY argument is included immediately after the last parameter. \n\nmax(X)\n\n The max() aggregate function returns the maximum value of all values in the group. The maximum value is the value that would be returned last in an ORDER BY on the same column. Aggregate max() returns NULL if and only if there are no non-NULL values in the group. \n\nmedian(X)\n\n The median() function returns the median value of all non-NULL X within a group. The median(X) function is equivalent to [percentile_cont(X,0.5)](lang_aggfunc.html#percentile_cont). See separate documentation on the [percentile extension](percentile.html) for additional information. \n\n The median() function is available since SQLite version 3.51.0 (2025-11-04) if [the amalgamation](amalgamation.html) is compiled using [-DSQLITE_ENABLE_PERCENTILE](compile.html#enable_percentile), or as a [loadable extension](loadext.html) in prior versions of SQLite. \n\nmin(X)\n\n The min() aggregate function returns the minimum non-NULL value of all values in the group. The minimum value is the first non-NULL value that would appear in an ORDER BY of the column. Aggregate min() returns NULL if and only if there are no non-NULL values in the group. \n\npercentile(Y,P)\n\n The percentile(Y,P) aggregate function computes an answer X which is a value that is greater than or equal to P percent of the non-NULL inputs and which is less than or equal to 100-P percent of the inputs. The parameter P must be a number between 0.0 and 100.0. The value of P must be the same for all terms of the aggregate and may not be NULL. Y inputs must be either NULL or numeric. NULL values for Y are ignored. Any non-NULL Y input that is not numeric causes an error to be raised. \n\n The percentile(Y,P) function is equivalent to [percentile_cont(Y,p/100.0)](lang_aggfunc.html#percentile_cont). See separate documentation on the [percentile extension](percentile.html) for additional information. \n\n The percentile() function is available since SQLite version 3.51.0 (2025-11-04) if [the amalgamation](amalgamation.html) is compiled using [-DSQLITE_ENABLE_PERCENTILE](compile.html#enable_percentile), or as a [loadable extension](loadext.html) in prior versions of SQLite. \n\npercentile_cont(Y,P)\n\n The percentile(Y,P) aggregate function computes an answer X which is a value that is greater than or equal to fraction P of the non-NULL inputs and which is less than or equal to fraction 1.0-P of the inputs. The parameter P must be a number between 0.0 and 1.0. The value of P must be the same for all terms of the aggregate and may not be NULL. Y inputs must be either NULL or numeric. NULL values for Y are ignored. Any non-NULL Y input that is not numeric causes an error to be raised. The percentile_cont(Y,P) function works like [percentile(Y,P)](lang_aggfunc.html#percentile) except that the P value spans the range of 0.0 to 1.0 instead of 0.0 to 100.0. Thus the result of percentile_cont(Y,P) is the same as [percentile(Y,P*100)](lang_aggfunc.html#percentile). See separate documentation on the [percentile extension](percentile.html) for additional information. \n\n The percentile_cont() function is available since SQLite version 3.51.0 (2025-11-04) if [the amalgamation](amalgamation.html) is compiled using [-DSQLITE_ENABLE_PERCENTILE](compile.html#enable_percentile), or as a [loadable extension](loadext.html) in prior versions of SQLite. \n\npercentile_disc(Y,P)\n\n The percentile_disc(Y,P) function works like [percentile_cont(Y,P)](lang_aggfunc.html#percentile_cont) except that instead of doing a weighted average of the closest available inputs, it always returns a value that is one of the input values - the smaller of the two possible choices. See separate documentation on the [percentile extension](percentile.html) for additional information. \n\n The percentile_cont() function is available since SQLite version 3.51.0 (2025-11-04) if [the amalgamation](amalgamation.html) is compiled using [-DSQLITE_ENABLE_PERCENTILE](compile.html#enable_percentile), or as a [loadable extension](loadext.html) in prior versions of SQLite. \n\nsum(X)\ntotal(X)\n\n The sum() and total() aggregate functions return the sum of all non-NULL values in the group. If there are no non-NULL input rows then sum() returns NULL but total() returns 0.0. NULL is not normally a helpful result for the sum of no rows but the SQL standard requires it and most other SQL database engines implement sum() that way so SQLite does it in the same way in order to be compatible. The non-standard total() function is provided as a convenient way to work around this design problem in the SQL language.\n\nThe result of total() is always a floating point value. The result of sum() is an integer value if all non-NULL inputs are integers. If any input to sum() is neither an integer nor a NULL, then sum() returns a floating point value which is an approximation of the mathematical sum.\n\nSum() will throw an \"integer overflow\" exception if all inputs are integers or NULL and an integer overflow occurs at any point during the computation. No overflow error is ever raised if any prior input was a floating point value. Total() never throws an integer overflow. \n\nWhen summing floating-point values, if the magnitudes of the values differ wildly then the resulting sum might be imprecise due to the fact that [IEEE 754 floating point values are approximations](floatingpoint.html#fpapprox). Use the decimal_sum(X) aggregate in the [decimal extension](floatingpoint.html#decext) to obtain an exact summation of floating point numbers. Consider this test case: \n\n```\n\nCREATE TABLE t1(x REAL);\nINSERT INTO t1 VALUES(1.55e+308),(1.23),(3.2e-16),(-1.23),(-1.55e308);\nSELECT sum(x), decimal_sum(x) FROM t1;\n```\n\nThe large values \u00b11.55e+308 cancel each other out, but the cancellation does not occur until the end of the sum and in the meantime the large +1.55e+308 swamps the tiny 3.2e-16 value. The end result is an imprecise result for the sum(). The decimal_sum() aggregate generates an exact answer, at the cost of additional CPU and memory usage. Note also that decimal_sum() is not built into the SQLite core; it is a [loadable extension](loadext.html). \n\nIf sum of inputs is too large to represent as a IEEE 754 floating point value, then a +Infinity or -Infinity result may be returned. If very large values with differing signs are used such that the SUM() or TOTAL() function is unable to determine if the correct result is +Infinity or -Infinity or some other value in between, then the result is NULL. Hence, for example, the following query returns NULL: \n\n```\n\nWITH t1(x) AS (VALUES(1.0),(-9e+999),(2.0),(+9e+999),(3.0))\n SELECT sum(x) FROM t1;\n```\n\nThis page was last updated on 2025-11-13 07:12:58Z\n"}, {"path": "stdlib/sqlite/functions-date.md", "category": "stdlib", "name": "stdlib/sqlite/functions-date", "content": "Date And Time Functionsindex.html Small. Fast. Reliable.\nChoose any three. \n\n- [Home](index.html)\n- [Menu](javascript:void(0))\n- [About](about.html)\n- [Documentation](docs.html)\n- [Download](download.html)\n- [License](copyright.html)\n- [Support](support.html)\n- [Purchase](prosupport.html)\n- [Search](javascript:void(0))\n\n- [About](about.html)\n- [Documentation](docs.html)\n- [Download](download.html)\n- [Support](support.html)\n- [Purchase](prosupport.html)\n\nSearch DocumentationSearch Changelog Date And Time Functions Table Of Contents[1. Overview](#overview)[2. Time Values](#time_values)[3. Modifiers](#modifiers)[4. Examples](#examples)[5. Caveats And Bugs](#caveats_and_bugs)\n\n# 1. Overview\n\n SQLite supports seven [scalar](lang_corefunc.html) date and time functions as follows: \n\n1. date(time-value, modifier, modifier, ...)\n2. time(time-value, modifier, modifier, ...)\n3. datetime(time-value, modifier, modifier, ...)\n4. julianday(time-value, modifier, modifier, ...)\n5. unixepoch(time-value, modifier, modifier, ...)\n6. strftime(format, time-value, modifier, modifier, ...)\n7. timediff(time-value, time-value)\n\n The first six date and time functions take an optional [time-value](lang_datefunc.html#tmval) as an argument, followed by zero or more [modifiers](lang_datefunc.html#dtmods). The strftime() function also takes a format string as its first argument. The timediff() function takes exactly two arguments which are both [time-values](lang_datefunc.html#tmval). \n\n SQLite does not have a dedicated date/time datatype. Instead, date and time values can be stored as any of the following: \n\n[ISO-8601](http://en.wikipedia.org/wiki/ISO_8601)A text string that is one of the ISO 8601 date/time values shown in [items 1 through 10 below](#tmval). Example: '2025-05-29 14:16:00'[Julian\u00a0day\u00a0number](http://en.wikipedia.org/wiki/Julian_day)The number of days including fractional days since -4713-11-24 12:00:00 Example: 2460825.09444444[Unix timestamp](https://en.wikipedia.org/wiki/Unix_time)The number of seconds including fractional seconds since 1970-01-01 00:00:00 Example: 1748528160\n\n These three formats are collectively known as [time-values](lang_datefunc.html#tmval). All of the date time functions accept time-values as either ISO-8601 text or as Julian day numbers. They can also be made to accept unix timestamps by adding optional modifier arguments ['auto'](lang_datefunc.html#automod) or ['unixepoch'](lang_datefunc.html#jdmod). Since the timediff() function does not accept modifiers, it can only use ISO-8601 and julian day number time-values. \n\n The date() function returns the date as text in this format: YYYY-MM-DD. \n\n The time() function returns the time as text in formatted as HH:MM:SS or as HH:MM:SS.SSS if the [subsec modifier](lang_datefunc.html#subsec) is used. \n\n The datetime() function returns the date and time formatted as YYYY-MM-DD HH:MM:SS or as YYYY-MM-DD HH:MM:SS.SSS if the [subsec modifier](lang_datefunc.html#subsec) is used. \n\n The julianday() function returns the [Julian day](http://en.wikipedia.org/wiki/Julian_day) - the fractional number of days since noon in Greenwich on November 24, 4714 B.C. ([Proleptic Gregorian calendar](http://en.wikipedia.org/wiki/Proleptic_Gregorian_calendar)). \n\n The unixepoch() function returns a unix timestamp - the number of seconds since 1970-01-01 00:00:00 UTC. The unixepoch() function normally returns an integer number of seconds, but with the optional [subsec modifier](lang_datefunc.html#subsec) it will return a floating point number which is the fractional number of seconds. \n\n The strftime() function returns the date formatted according to the format string specified as the first argument. The format string supports the most common substitutions found in the [strftime() function](http://opengroup.org/onlinepubs/007908799/xsh/strftime.html) from the standard C library plus two new substitutions, %f and %J. The following is a complete list of valid strftime() substitutions as of version 3.46.0 (2024-05-23). Earlier versions of SQLite might not support all substitutions. If an undefined or unsupported substitution is seen, the result is NULL. \n\n %d  day of month: 01-31  %e  day of month without leading zero: 1-31  %f  fractional seconds: SS.SSS  %F  ISO 8601 date: YYYY-MM-DD  %G  ISO 8601 year corresponding to %V  %g  2-digit ISO 8601 year corresponding to %V  %H  hour: 00-24  %I  hour for 12-hour clock: 01-12  %j  day of year: 001-366  %J  Julian day number (fractional)  %k  hour without leading zero: 0-24  %l  %I without leading zero: 1-12  %m  month: 01-12  %M  minute: 00-59  %p  \"AM\" or \"PM\" depending on the hour  %P  \"am\" or \"pm\" depending on the hour  %R  ISO 8601 time: HH:MM  %s  seconds since 1970-01-01  %S  seconds: 00-59  %T  ISO 8601 time: HH:MM:SS  %U  week of year (00-53) - week 01 starts on the first Sunday  %u  day of week 1-7 with Monday==1  %V  ISO 8601 week of year  %w  day of week 0-6 with Sunday==0  %W  week of year (00-53) - week 01 starts on the first Monday  %Y  year: 0000-9999  %%  % \n\n Other date and time functions can be expressed in terms of strftime(): \n\nFunctionEquivalent strftime() date(...)  strftime('%F', ...)  time(...)  strftime('%T', ...)  datetime(...)  strftime('%F %T', ...)  julianday(...) CAST(strftime('%J', ...) as REAL) unixepoch(...) CAST(strftime('%s', ...) as INT)\n\n The date(), time(), and datetime() functions all return text, and so their strftime() equivalents are exact. However, the julianday() and unixepoch() functions return numeric values. Their strftime() equivalents return a string that is the text representation of the corresponding number. \n\n The main reasons for providing functions other than strftime() are for convenience and for efficiency. The julianday() and unixepoch() functions return real and integer values respectively, and do not incur the format conversion costs or inexactitude resulting from use of the '%J' or '%s' format specifiers with the strftime() function. \n\n The timediff(A,B) function returns a string that describes the amount of time that must be added to B in order to reach time A. The format of the timediff() result is designed to be human-readable. The format is: \n\n (+|-)YYYY-MM-DD HH:MM:SS.SSS \n\n This time difference string is also an allowed modifier for the other date/time functions. The following invariant holds for time-values A and B: \n\n datetime(A) = datetime(B, timediff(A,B)) \n\n The length of months and years vary. February is shorter than March. Leap years are longer than non-leap years. The output from timediff() takes this all into account. The timediff() function is intended to provide a human-friendly description of the time span. If you want to know the number of days or seconds between two dates, A and B, then you can always do one of these: \n\n SELECT julianday(B) - julianday(A);\n SELECT unixepoch(B) - unixepoch(A); \n\n The timediff(A,B) might return the same result even for values A and B that span a different number of days - depending on the starting date. For example, both of the following two timediff() calls return the same result (\"-0000-01-00 00:00:00.000\") even though the first timespan is 28 days and the seconds is 31 days: \n\n SELECT timediff('2023-02-15','2023-03-15');\n SELECT timediff('2023-03-15','2023-04-15'); \n\n Summary: If you want a human-friendly time span, use timediff(). If you want a precise time difference (in days or seconds) use the difference between two julianday() or unixepoch() calls. \n\n# 2. Time Values\n\nA time-value can be in any of the following formats shown below. The value is usually a string, though it can be an integer or floating point number in the case of format 12. \n\n1. YYYY-MM-DD\n2. YYYY-MM-DD HH:MM\n3. YYYY-MM-DD HH:MM:SS\n4. YYYY-MM-DD HH:MM:SS.SSS\n5. YYYY-MM-DDTHH:MM\n6. YYYY-MM-DDTHH:MM:SS\n7. YYYY-MM-DDTHH:MM:SS.SSS\n8. HH:MM\n9. HH:MM:SS\n10. HH:MM:SS.SSS\n11. now\n12. DDDDDDDDDD\n\n In formats 5 through 7, the \"T\" is a literal character separating the date and the time, as required by [ISO-8601](http://www.w3c.org/TR/NOTE-datetime). Formats 8 through 10 that specify only a time assume a date of 2000-01-01. Format 11, the string 'now', is converted into the current date and time as obtained from the xCurrentTime method of the [sqlite3_vfs](c3ref/vfs.html) object in use. The 'now' argument to date and time functions always returns exactly the same value for multiple invocations within the same [sqlite3_step()](c3ref/step.html) call. [Universal Coordinated Time (UTC)](http://en.wikipedia.org/wiki/Coordinated_Universal_Time) is used. Format 12 is the [Julian day number](http://en.wikipedia.org/wiki/Julian_day) expressed as an integer or floating point value. Format 12 might also be interpreted as a unix timestamp if it is immediately followed either the ['auto'](lang_datefunc.html#automod) or ['unixepoch'](lang_datefunc.html#jdmod) modifier. \n\n Formats 2 through 10 may be optionally followed by a timezone indicator of the form \"[+-]HH:MM\" or just \"Z\". The date and time functions use UTC or \"zulu\" time internally, and so the \"Z\" suffix is a no-op. Any non-zero \"HH:MM\" suffix is subtracted from the indicated date and time in order to compute zulu time. For example, all of the following time-values are equivalent: \n\n 2013-10-07 08:23:19.120\n 2013-10-07T08:23:19.120Z\n 2013-10-07 04:23:19.120-04:00\n 2456572.84952685 \n\n In formats 4, 7, and 10, the fractional seconds value SS.SSS can have one or more digits following the decimal point. Exactly three digits are shown in the examples because only the first three digits are significant to the result, but the input string can have fewer or more than three digits and the date/time functions will still operate correctly. Similarly, format 12 is shown with 10 significant digits, but the date/time functions will really accept as many or as few digits as are necessary to represent the Julian day number. \n\n[ISO-8601](http://www.w3c.org/TR/NOTE-datetime) supports a wide variety of alternative date/time formats, but SQLite only supports the ones specifically enumerated above. \n\n In all functions other than timediff(), the time-value (and all modifiers) may be omitted, in which case a time value of 'now' is assumed. \n\n# 3. Modifiers\n\nFor all date/time functions other than timediff(), the time-value argument can be followed by zero or more modifiers that alter date and/or time. Each modifier is a transformation that is applied to the time-value to its left. Modifiers are applied from left to right; order is important. The available modifiers are as follows.\n\n1.  NNN days \n2.  NNN hours \n3.  NNN minutes \n4.  NNN seconds \n5.  NNN months \n6.  NNN years \n7.  \u00b1HH:MM \n8.  \u00b1HH:MM:SS \n9.  \u00b1HH:MM:SS.SSS \n10.  \u00b1YYYY-MM-DD \n11.  \u00b1YYYY-MM-DD HH:MM \n12.  \u00b1YYYY-MM-DD HH:MM:SS \n13.  \u00b1YYYY-MM-DD HH:MM:SS.SSS \n14.  ceiling \n15.  floor \n16.  start of month \n17.  start of year \n18.  start of day \n19.  weekday N \n20.  unixepoch \n21.  julianday \n22.  auto \n23.  localtime \n24.  utc \n25.  subsec \n26.  subsecond \n\nThe first thirteen modifiers (1 through 13) add the specified amount of time to the date and time specified by the arguments to its left. The 's' character at the end of the modifier names in 1 through 6 is optional. The NNN value can be any floating point number, with an optional '+' or '-' prefix. \n\nThe time shift modifiers (7 through 13) move the time-value by the number of years, months, days, hours, minutes, and/or seconds specified. An initial \"+\" or \"-\" is required for formats 10 through 13 but is optional for formats 7, 8, and 9. The changes are applied from left to right. First the year is shifted by YYYY, then the month by MM, and then day by DD, and so forth. The timediff(A,B) function returns a time shift in format 13 that shifts the time-value B into A.\n\nBecause the length of a month or year changes from one month or year to the next, ambiguities can arise when shifting a date by months and/or years. For example, what is the date one year after 2024-02-29? Is it 2025-02-28 or 2025-03-01? Or what is the date that is two months after 2023-12-31? Is it 2024-02-29 or 2024-03-02? There is no consensus on how to resolve this ambiguity, so the \"ceiling\" and \"floor\" modifiers (14 and 15) are available to let the programmer decide. If the next modifier after a time shift is \"ceiling\", then any ambiguity in the date is resolved by choosing the later date. The \"floor\" modifier resolves ambiguities by resolving to the last day of the previous month. The default behavior is \"ceiling\". \n\nThe \"start of\" modifiers (16 through 18) shift the date backwards to the beginning of the subject month, year or day.\n\nThe \"weekday\" modifier advances the date forward, if necessary, to the next date where the weekday number is N. Sunday is 0, Monday is 1, and so forth. If the date is already on the desired weekday, the \"weekday\" modifier leaves the date unchanged. \n\nThe \"unixepoch\" modifier (20) only works if it immediately follows a time-value in the DDDDDDDDDD format. This modifier causes the DDDDDDDDDD to be interpreted not as a Julian day number as it normally would be, but as [Unix Time](http://en.wikipedia.org/wiki/Unix_time) - the number of seconds since 1970. If the \"unixepoch\" modifier does not follow a time-value of the form DDDDDDDDDD which expresses the number of seconds since 1970 or if other modifiers separate the \"unixepoch\" modifier from prior DDDDDDDDDD then the behavior is undefined. \n\nThe \"julianday\" modifier must immediately follow the initial time-value which must be of the form DDDDDDDDD. Any other use of the 'julianday' modifier is an error and causes the function to return NULL. The 'julianday' modifier forces the time-value number to be interpreted as a julian-day number. As this is the default behavior, the 'julianday' modifier is scarcely more than a no-op. The only difference is that adding 'julianday' forces the DDDDDDDDD time-value format, and causes a NULL to be returned if any other time-value format is used. \n\nThe \"auto\" modifier must immediately follow the initial time-value. If the time-value is numeric (the DDDDDDDDDD format) then the 'auto' modifier causes the time-value to be interpreted as either a julian day number or a unix timestamp, depending on its magnitude. If the value is between 0.0 and 5373484.499999, then it is interpreted as a julian day number (corresponding to dates between -4713-11-24 12:00:00 and 9999-12-31 23:59:59, inclusive). For numeric values outside of the range of valid julian day numbers, but within the range of -210866760000 to 253402300799, the 'auto' modifier causes the value to be interpreted as a unix timestamp. Other numeric values are out of range and cause a NULL return. The 'auto' modifier is a no-op for ISO 8601 text time-values. The \"auto\" modifier is designed to work with time-values even in cases where it is not known which time-value format is stored in the database file, or in cases where the same column stores time-values in different formats on different rows. The 'auto' modifier will automatically select the appropriate format. However, there is some ambiguity. Unix timestamps for the first 63 days of 1970 will be interpreted as julian day numbers. The 'auto' modifier is very useful when the dataset is guaranteed to contain no dates within that range, but should be avoided for applications that might make use of dates in the opening months of 1970. \n\nThe \"localtime\" modifier assumes the time-value to its left is in Universal Coordinated Time (UTC) and adjusts that time value so that it is in localtime. If \"localtime\" follows a time that is not UTC, then the behavior is undefined. The \"utc\" modifier is the opposite of \"localtime\". \"utc\" assumes that the time-value to its left is in the local timezone and adjusts that time-value to be in UTC. If the time to the left is not in localtime, then the result of \"utc\" is undefined.\n\n The \"subsecond\" modifier (which may be abbreviated as just \"subsec\") increases the resolution of the output for [datetime()](lang_datefunc.html#dttm), [time()](lang_datefunc.html#dttm), and [unixepoch()](lang_datefunc.html#uepch), and for the \"%s\" format string in [strftime()](lang_datefunc.html#strftm). The \"subsecond\" modifier has no effect on other date/time functions. The current implemention increases the resolution from seconds to milliseconds, but this might increase to a higher resolution in future releases of SQLite. When \"subsec\" is used with [datetime()](lang_datefunc.html#dttm) or [time()](lang_datefunc.html#dttm), the seconds field at the end is followed by a decimal point and one or more digits to show fractional seconds. When \"subsec\" is used with [unixepoch()](lang_datefunc.html#uepch), the result is a floating point value which is the number of seconds and fractional seconds since 1970-01-01. The \"subsecond\" and \"subsec\" modifiers have the special property that they can occur as the first argument to date/time functions (or as the first argument after the format string for strftime()). When this happens, the time-value that is normally in the first argument is understood to be \"now\". For example, a short cut to get the current time in seconds since 1970 with millisecond precision is to say: \n\n SELECT unixepoch('subsec'); \n\n# 4. Examples\n\nCompute the current date.\n\nSELECT date();\n\nCompute the last day of the current month.\n\nSELECT date('now','start of month','+1 month','-1 day'); \n\nCompute the date and time given a unix timestamp 1092941466.\n\n SELECT datetime(1092941466, 'unixepoch');\n SELECT datetime(1092941466, 'auto'); -- Does not work for early 1970! \n\nCompute the date and time given a unix timestamp 1092941466, and compensate for your local timezone.\n\n SELECT datetime(1092941466, 'unixepoch', 'localtime'); \n\nCompute the current unix timestamp.\n\n SELECT unixepoch();\n SELECT strftime('%s'); \n\nCompute the number of days since the signing of the US Declaration of Independence.\n\n SELECT julianday('now') - julianday('1776-07-04'); \n\nCompute the number of seconds since a particular moment in 2004:\n\n SELECT unixepoch() - unixepoch('2004-01-01 02:34:56'); \n\n Compute the date of the first Tuesday in October for the current year. \n\n SELECT date('now','start of year','+9 months','weekday 2'); \n\nCompute the time since the unix epoch in seconds with millisecond precision:\n\n SELECT (julianday('now') - 2440587.5)*86400.0;\n SELECT unixepoch('now','subsec'); \n\nCompute how old Abraham Lincoln would be if he were still alive today:\n\n SELECT timediff('now','1809-02-12'); \n\n# 5. Caveats And Bugs\n\nThe computation of local time depends heavily on the whim of politicians and is thus difficult to get correct for all locales. In this implementation, the standard C library function localtime_r() is used to assist in the calculation of local time. The localtime_r() C function normally only works for years between 1970 and 2037. For dates outside this range, SQLite attempts to map the year into an equivalent year within this range, do the calculation, then map the year back.\n\nThese functions only work for dates between 0000-01-01 00:00:00 and 9999-12-31 23:59:59 (julian day numbers 1721059.5 through 5373484.5). For dates outside that range, the results of these functions are undefined.\n\nNon-Vista Windows platforms only support one set of DST rules. Vista only supports two. Therefore, on these platforms, historical DST calculations will be incorrect. For example, in the US, in 2007 the DST rules changed. Non-Vista Windows platforms apply the new 2007 DST rules to all previous years as well. Vista does somewhat better getting results correct back to 1986, when the rules were also changed.\n\nAll internal computations assume the [Gregorian calendar](http://en.wikipedia.org/wiki/Gregorian_calendar) system. They also assume that every day is exactly 86400 seconds in duration; no leap seconds are incorporated.\n\nThis page was last updated on 2025-11-13 07:12:58Z\n"}, {"path": "stdlib/postgres/commands.md", "category": "stdlib", "name": "stdlib/postgres/commands", "content": "PostgreSQL: Documentation: 18: Part II. The SQL Language/\n\n- [Home](/)\n- [About](/about/)\n- [Download](/download/)\n- [Documentation](/docs/)\n- [Community](/community/)\n- [Developers](/developer/)\n- [Support](/support/)\n- [Donate](/about/donate/)\n- [Your account](/account/)\n\nNovember 13, 2025: [PostgreSQL 18.1, 17.7, 16.11, 15.15, 14.20, and 13.23 Released!](/about/news/postgresql-181-177-1611-1515-1420-and-1323-released-3171/)[Documentation](/docs/) \u2192 [PostgreSQL 18](/docs/18/index.html) Supported Versions: [Current](/docs/current/sql.html) ([18](/docs/18/sql.html)) / [17](/docs/17/sql.html) / [16](/docs/16/sql.html) / [15](/docs/15/sql.html) / [14](/docs/14/sql.html) Development Versions: [devel](/docs/devel/sql.html) Unsupported versions: [13](/docs/13/sql.html) / [12](/docs/12/sql.html) / [11](/docs/11/sql.html) / [10](/docs/10/sql.html) / [9.6](/docs/9.6/sql.html) / [9.5](/docs/9.5/sql.html) / [9.4](/docs/9.4/sql.html) / [9.3](/docs/9.3/sql.html) / [9.2](/docs/9.2/sql.html) / [9.1](/docs/9.1/sql.html) / [9.0](/docs/9.0/sql.html) / [8.4](/docs/8.4/sql.html) / [8.3](/docs/8.3/sql.html) / [8.2](/docs/8.2/sql.html) / [8.1](/docs/8.1/sql.html) / [8.0](/docs/8.0/sql.html) / [7.4](/docs/7.4/sql.html) / [7.1](/docs/7.1/sql.html)Part II. The SQL Language[Prev](tutorial-conclusion.html)[Up](index.html)PostgreSQL 18.1 Documentation[Home](index.html)[Next](sql-syntax.html)\n\n# Part II. The SQL Language\n\nThis part describes the use of the SQL language in PostgreSQL. We start with describing the general syntax of SQL, then how to create tables, how to populate the database, and how to query it. The middle part lists the available data types and functions for use in SQL commands. Lastly, we address several aspects of importance for tuning a database.\n\nThe information is arranged so that a novice user can follow it from start to end and gain a full understanding of the topics without having to refer forward too many times. The chapters are intended to be self-contained, so that advanced users can read the chapters individually as they choose. The information is presented in narrative form with topical units. Readers looking for a complete description of a particular command are encouraged to review the [Part\u00a0VI](reference.html).\n\nReaders should know how to connect to a PostgreSQL database and issue SQL commands. Readers that are unfamiliar with these issues are encouraged to read [Part\u00a0I](tutorial.html) first. SQL commands are typically entered using the PostgreSQL interactive terminal psql, but other programs that have similar functionality can be used as well.\n\nTable of Contents\n\n[4. SQL Syntax](sql-syntax.html)[4.1. Lexical Structure](sql-syntax-lexical.html)[4.2. Value Expressions](sql-expressions.html)[4.3. Calling Functions](sql-syntax-calling-funcs.html)[5. Data Definition](ddl.html)[5.1. Table Basics](ddl-basics.html)[5.2. Default Values](ddl-default.html)[5.3. Identity Columns](ddl-identity-columns.html)[5.4. Generated Columns](ddl-generated-columns.html)[5.5. Constraints](ddl-constraints.html)[5.6. System Columns](ddl-system-columns.html)[5.7. Modifying Tables](ddl-alter.html)[5.8. Privileges](ddl-priv.html)[5.9. Row Security Policies](ddl-rowsecurity.html)[5.10. Schemas](ddl-schemas.html)[5.11. Inheritance](ddl-inherit.html)[5.12. Table Partitioning](ddl-partitioning.html)[5.13. Foreign Data](ddl-foreign-data.html)[5.14. Other Database Objects](ddl-others.html)[5.15. Dependency Tracking](ddl-depend.html)[6. Data Manipulation](dml.html)[6.1. Inserting Data](dml-insert.html)[6.2. Updating Data](dml-update.html)[6.3. Deleting Data](dml-delete.html)[6.4. Returning Data from Modified Rows](dml-returning.html)[7. Queries](queries.html)[7.1. Overview](queries-overview.html)[7.2. Table Expressions](queries-table-expressions.html)[7.3. Select Lists](queries-select-lists.html)[7.4. Combining Queries (UNION, INTERSECT, EXCEPT)](queries-union.html)[7.5. Sorting Rows (ORDER BY)](queries-order.html)[7.6. LIMIT and OFFSET](queries-limit.html)[7.7. VALUES Lists](queries-values.html)[7.8. WITH Queries (Common Table Expressions)](queries-with.html)[8. Data Types](datatype.html)[8.1. Numeric Types](datatype-numeric.html)[8.2. Monetary Types](datatype-money.html)[8.3. Character Types](datatype-character.html)[8.4. Binary Data Types](datatype-binary.html)[8.5. Date/Time Types](datatype-datetime.html)[8.6. Boolean Type](datatype-boolean.html)[8.7. Enumerated Types](datatype-enum.html)[8.8. Geometric Types](datatype-geometric.html)[8.9. Network Address Types](datatype-net-types.html)[8.10. Bit String Types](datatype-bit.html)[8.11. Text Search Types](datatype-textsearch.html)[8.12. UUID Type](datatype-uuid.html)[8.13. XML Type](datatype-xml.html)[8.14. JSON Types](datatype-json.html)[8.15. Arrays](arrays.html)[8.16. Composite Types](rowtypes.html)[8.17. Range Types](rangetypes.html)[8.18. Domain Types](domains.html)[8.19. Object Identifier Types](datatype-oid.html)[8.20. pg_lsn Type](datatype-pg-lsn.html)[8.21. Pseudo-Types](datatype-pseudo.html)[9. Functions and Operators](functions.html)[9.1. Logical Operators](functions-logical.html)[9.2. Comparison Functions and Operators](functions-comparison.html)[9.3. Mathematical Functions and Operators](functions-math.html)[9.4. String Functions and Operators](functions-string.html)[9.5. Binary String Functions and Operators](functions-binarystring.html)[9.6. Bit String Functions and Operators](functions-bitstring.html)[9.7. Pattern Matching](functions-matching.html)[9.8. Data Type Formatting Functions](functions-formatting.html)[9.9. Date/Time Functions and Operators](functions-datetime.html)[9.10. Enum Support Functions](functions-enum.html)[9.11. Geometric Functions and Operators](functions-geometry.html)[9.12. Network Address Functions and Operators](functions-net.html)[9.13. Text Search Functions and Operators](functions-textsearch.html)[9.14. UUID Functions](functions-uuid.html)[9.15. XML Functions](functions-xml.html)[9.16. JSON Functions and Operators](functions-json.html)[9.17. Sequence Manipulation Functions](functions-sequence.html)[9.18. Conditional Expressions](functions-conditional.html)[9.19. Array Functions and Operators](functions-array.html)[9.20. Range/Multirange Functions and Operators](functions-range.html)[9.21. Aggregate Functions](functions-aggregate.html)[9.22. Window Functions](functions-window.html)[9.23. Merge Support Functions](functions-merge-support.html)[9.24. Subquery Expressions](functions-subquery.html)[9.25. Row and Array Comparisons](functions-comparisons.html)[9.26. Set Returning Functions](functions-srf.html)[9.27. System Information Functions and Operators](functions-info.html)[9.28. System Administration Functions](functions-admin.html)[9.29. Trigger Functions](functions-trigger.html)[9.30. Event Trigger Functions](functions-event-triggers.html)[9.31. Statistics Information Functions](functions-statistics.html)[10. Type Conversion](typeconv.html)[10.1. Overview](typeconv-overview.html)[10.2. Operators](typeconv-oper.html)[10.3. Functions](typeconv-func.html)[10.4. Value Storage](typeconv-query.html)[10.5. UNION, CASE, and Related Constructs](typeconv-union-case.html)[10.6. SELECT Output Columns](typeconv-select.html)[11. Indexes](indexes.html)[11.1. Introduction](indexes-intro.html)[11.2. Index Types](indexes-types.html)[11.3. Multicolumn Indexes](indexes-multicolumn.html)[11.4. Indexes and ORDER BY](indexes-ordering.html)[11.5. Combining Multiple Indexes](indexes-bitmap-scans.html)[11.6. Unique Indexes](indexes-unique.html)[11.7. Indexes on Expressions](indexes-expressional.html)[11.8. Partial Indexes](indexes-partial.html)[11.9. Index-Only Scans and Covering Indexes](indexes-index-only-scans.html)[11.10. Operator Classes and Operator Families](indexes-opclass.html)[11.11. Indexes and Collations](indexes-collations.html)[11.12. Examining Index Usage](indexes-examine.html)[12. Full Text Search](textsearch.html)[12.1. Introduction](textsearch-intro.html)[12.2. Tables and Indexes](textsearch-tables.html)[12.3. Controlling Text Search](textsearch-controls.html)[12.4. Additional Features](textsearch-features.html)[12.5. Parsers](textsearch-parsers.html)[12.6. Dictionaries](textsearch-dictionaries.html)[12.7. Configuration Example](textsearch-configuration.html)[12.8. Testing and Debugging Text Search](textsearch-debugging.html)[12.9. Preferred Index Types for Text Search](textsearch-indexes.html)[12.10. psql Support](textsearch-psql.html)[12.11. Limitations](textsearch-limitations.html)[13. Concurrency Control](mvcc.html)[13.1. Introduction](mvcc-intro.html)[13.2. Transaction Isolation](transaction-iso.html)[13.3. Explicit Locking](explicit-locking.html)[13.4. Data Consistency Checks at the Application Level](applevel-consistency.html)[13.5. Serialization Failure Handling](mvcc-serialization-failure-handling.html)[13.6. Caveats](mvcc-caveats.html)[13.7. Locking and Indexes](locking-indexes.html)[14. Performance Tips](performance-tips.html)[14.1. Using EXPLAIN](using-explain.html)[14.2. Statistics Used by the Planner](planner-stats.html)[14.3. Controlling the Planner with Explicit JOIN Clauses](explicit-joins.html)[14.4. Populating a Database](populate.html)[14.5. Non-Durable Settings](non-durability.html)[15. Parallel Query](parallel-query.html)[15.1. How Parallel Query Works](how-parallel-query-works.html)[15.2. When Can Parallel Query Be Used?](when-can-parallel-query-be-used.html)[15.3. Parallel Plans](parallel-plans.html)[15.4. Parallel Safety](parallel-safety.html)[Prev](tutorial-conclusion.html)[Up](index.html)[Next](sql-syntax.html)3.7. Conclusion [Home](index.html) Chapter 4. SQL Syntax\n\n## Submit correction\n\n If you see anything in the documentation that is not correct, does not match your experience with the particular feature or requires further clarification, please use [this form](/account/comments/new/18/sql.html/) to report a documentation issue. \n\n[Policies](/about/policies/) | [Code of Conduct](/about/policies/coc/) | [About PostgreSQL](/about/) | [Contact](/about/contact/)\n\nCopyright \u00a9 1996-2026 The PostgreSQL Global Development Group\n"}, {"path": "stdlib/postgres/functions.md", "category": "stdlib", "name": "stdlib/postgres/functions", "content": "PostgreSQL: Documentation: 18: Chapter 9. Functions and Operators/\n\n- [Home](/)\n- [About](/about/)\n- [Download](/download/)\n- [Documentation](/docs/)\n- [Community](/community/)\n- [Developers](/developer/)\n- [Support](/support/)\n- [Donate](/about/donate/)\n- [Your account](/account/)\n\nNovember 13, 2025: [PostgreSQL 18.1, 17.7, 16.11, 15.15, 14.20, and 13.23 Released!](/about/news/postgresql-181-177-1611-1515-1420-and-1323-released-3171/)[Documentation](/docs/) \u2192 [PostgreSQL 18](/docs/18/index.html) Supported Versions: [Current](/docs/current/functions.html) ([18](/docs/18/functions.html)) / [17](/docs/17/functions.html) / [16](/docs/16/functions.html) / [15](/docs/15/functions.html) / [14](/docs/14/functions.html) Development Versions: [devel](/docs/devel/functions.html) Unsupported versions: [13](/docs/13/functions.html) / [12](/docs/12/functions.html) / [11](/docs/11/functions.html) / [10](/docs/10/functions.html) / [9.6](/docs/9.6/functions.html) / [9.5](/docs/9.5/functions.html) / [9.4](/docs/9.4/functions.html) / [9.3](/docs/9.3/functions.html) / [9.2](/docs/9.2/functions.html) / [9.1](/docs/9.1/functions.html) / [9.0](/docs/9.0/functions.html) / [8.4](/docs/8.4/functions.html) / [8.3](/docs/8.3/functions.html) / [8.2](/docs/8.2/functions.html) / [8.1](/docs/8.1/functions.html) / [8.0](/docs/8.0/functions.html) / [7.4](/docs/7.4/functions.html) / [7.3](/docs/7.3/functions.html) / [7.2](/docs/7.2/functions.html) / [7.1](/docs/7.1/functions.html)Chapter 9. Functions and Operators[Prev](datatype-pseudo.html)[Up](sql.html)Part II. The SQL Language[Home](index.html)[Next](functions-logical.html)\n\n## Chapter 9. Functions and Operators\n\nTable of Contents\n\n[9.1. Logical Operators](functions-logical.html)[9.2. Comparison Functions and Operators](functions-comparison.html)[9.3. Mathematical Functions and Operators](functions-math.html)[9.4. String Functions and Operators](functions-string.html)[9.4.1. format](functions-string.html#FUNCTIONS-STRING-FORMAT)[9.5. Binary String Functions and Operators](functions-binarystring.html)[9.6. Bit String Functions and Operators](functions-bitstring.html)[9.7. Pattern Matching](functions-matching.html)[9.7.1. LIKE](functions-matching.html#FUNCTIONS-LIKE)[9.7.2. SIMILAR TO Regular Expressions](functions-matching.html#FUNCTIONS-SIMILARTO-REGEXP)[9.7.3. POSIX Regular Expressions](functions-matching.html#FUNCTIONS-POSIX-REGEXP)[9.8. Data Type Formatting Functions](functions-formatting.html)[9.9. Date/Time Functions and Operators](functions-datetime.html)[9.9.1. EXTRACT, date_part](functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT)[9.9.2. date_trunc](functions-datetime.html#FUNCTIONS-DATETIME-TRUNC)[9.9.3. date_bin](functions-datetime.html#FUNCTIONS-DATETIME-BIN)[9.9.4. AT TIME ZONE and AT LOCAL](functions-datetime.html#FUNCTIONS-DATETIME-ZONECONVERT)[9.9.5. Current Date/Time](functions-datetime.html#FUNCTIONS-DATETIME-CURRENT)[9.9.6. Delaying Execution](functions-datetime.html#FUNCTIONS-DATETIME-DELAY)[9.10. Enum Support Functions](functions-enum.html)[9.11. Geometric Functions and Operators](functions-geometry.html)[9.12. Network Address Functions and Operators](functions-net.html)[9.13. Text Search Functions and Operators](functions-textsearch.html)[9.14. UUID Functions](functions-uuid.html)[9.15. XML Functions](functions-xml.html)[9.15.1. Producing XML Content](functions-xml.html#FUNCTIONS-PRODUCING-XML)[9.15.2. XML Predicates](functions-xml.html#FUNCTIONS-XML-PREDICATES)[9.15.3. Processing XML](functions-xml.html#FUNCTIONS-XML-PROCESSING)[9.15.4. Mapping Tables to XML](functions-xml.html#FUNCTIONS-XML-MAPPING)[9.16. JSON Functions and Operators](functions-json.html)[9.16.1. Processing and Creating JSON Data](functions-json.html#FUNCTIONS-JSON-PROCESSING)[9.16.2. The SQL/JSON Path Language](functions-json.html#FUNCTIONS-SQLJSON-PATH)[9.16.3. SQL/JSON Query Functions](functions-json.html#SQLJSON-QUERY-FUNCTIONS)[9.16.4. JSON_TABLE](functions-json.html#FUNCTIONS-SQLJSON-TABLE)[9.17. Sequence Manipulation Functions](functions-sequence.html)[9.18. Conditional Expressions](functions-conditional.html)[9.18.1. CASE](functions-conditional.html#FUNCTIONS-CASE)[9.18.2. COALESCE](functions-conditional.html#FUNCTIONS-COALESCE-NVL-IFNULL)[9.18.3. NULLIF](functions-conditional.html#FUNCTIONS-NULLIF)[9.18.4. GREATEST and LEAST](functions-conditional.html#FUNCTIONS-GREATEST-LEAST)[9.19. Array Functions and Operators](functions-array.html)[9.20. Range/Multirange Functions and Operators](functions-range.html)[9.21. Aggregate Functions](functions-aggregate.html)[9.22. Window Functions](functions-window.html)[9.23. Merge Support Functions](functions-merge-support.html)[9.24. Subquery Expressions](functions-subquery.html)[9.24.1. EXISTS](functions-subquery.html#FUNCTIONS-SUBQUERY-EXISTS)[9.24.2. IN](functions-subquery.html#FUNCTIONS-SUBQUERY-IN)[9.24.3. NOT IN](functions-subquery.html#FUNCTIONS-SUBQUERY-NOTIN)[9.24.4. ANY/SOME](functions-subquery.html#FUNCTIONS-SUBQUERY-ANY-SOME)[9.24.5. ALL](functions-subquery.html#FUNCTIONS-SUBQUERY-ALL)[9.24.6. Single-Row Comparison](functions-subquery.html#FUNCTIONS-SUBQUERY-SINGLE-ROW-COMP)[9.25. Row and Array Comparisons](functions-comparisons.html)[9.25.1. IN](functions-comparisons.html#FUNCTIONS-COMPARISONS-IN-SCALAR)[9.25.2. NOT IN](functions-comparisons.html#FUNCTIONS-COMPARISONS-NOT-IN)[9.25.3. ANY/SOME (array)](functions-comparisons.html#FUNCTIONS-COMPARISONS-ANY-SOME)[9.25.4. ALL (array)](functions-comparisons.html#FUNCTIONS-COMPARISONS-ALL)[9.25.5. Row Constructor Comparison](functions-comparisons.html#ROW-WISE-COMPARISON)[9.25.6. Composite Type Comparison](functions-comparisons.html#COMPOSITE-TYPE-COMPARISON)[9.26. Set Returning Functions](functions-srf.html)[9.27. System Information Functions and Operators](functions-info.html)[9.27.1. Session Information Functions](functions-info.html#FUNCTIONS-INFO-SESSION)[9.27.2. Access Privilege Inquiry Functions](functions-info.html#FUNCTIONS-INFO-ACCESS)[9.27.3. Schema Visibility Inquiry Functions](functions-info.html#FUNCTIONS-INFO-SCHEMA)[9.27.4. System Catalog Information Functions](functions-info.html#FUNCTIONS-INFO-CATALOG)[9.27.5. Object Information and Addressing Functions](functions-info.html#FUNCTIONS-INFO-OBJECT)[9.27.6. Comment Information Functions](functions-info.html#FUNCTIONS-INFO-COMMENT)[9.27.7. Data Validity Checking Functions](functions-info.html#FUNCTIONS-INFO-VALIDITY)[9.27.8. Transaction ID and Snapshot Information Functions](functions-info.html#FUNCTIONS-INFO-SNAPSHOT)[9.27.9. Committed Transaction Information Functions](functions-info.html#FUNCTIONS-INFO-COMMIT-TIMESTAMP)[9.27.10. Control Data Functions](functions-info.html#FUNCTIONS-INFO-CONTROLDATA)[9.27.11. Version Information Functions](functions-info.html#FUNCTIONS-INFO-VERSION)[9.27.12. WAL Summarization Information Functions](functions-info.html#FUNCTIONS-INFO-WAL-SUMMARY)[9.28. System Administration Functions](functions-admin.html)[9.28.1. Configuration Settings Functions](functions-admin.html#FUNCTIONS-ADMIN-SET)[9.28.2. Server Signaling Functions](functions-admin.html#FUNCTIONS-ADMIN-SIGNAL)[9.28.3. Backup Control Functions](functions-admin.html#FUNCTIONS-ADMIN-BACKUP)[9.28.4. Recovery Control Functions](functions-admin.html#FUNCTIONS-RECOVERY-CONTROL)[9.28.5. Snapshot Synchronization Functions](functions-admin.html#FUNCTIONS-SNAPSHOT-SYNCHRONIZATION)[9.28.6. Replication Management Functions](functions-admin.html#FUNCTIONS-REPLICATION)[9.28.7. Database Object Management Functions](functions-admin.html#FUNCTIONS-ADMIN-DBOBJECT)[9.28.8. Index Maintenance Functions](functions-admin.html#FUNCTIONS-ADMIN-INDEX)[9.28.9. Generic File Access Functions](functions-admin.html#FUNCTIONS-ADMIN-GENFILE)[9.28.10. Advisory Lock Functions](functions-admin.html#FUNCTIONS-ADVISORY-LOCKS)[9.29. Trigger Functions](functions-trigger.html)[9.30. Event Trigger Functions](functions-event-triggers.html)[9.30.1. Capturing Changes at Command End](functions-event-triggers.html#PG-EVENT-TRIGGER-DDL-COMMAND-END-FUNCTIONS)[9.30.2. Processing Objects Dropped by a DDL Command](functions-event-triggers.html#PG-EVENT-TRIGGER-SQL-DROP-FUNCTIONS)[9.30.3. Handling a Table Rewrite Event](functions-event-triggers.html#PG-EVENT-TRIGGER-TABLE-REWRITE-FUNCTIONS)[9.31. Statistics Information Functions](functions-statistics.html)[9.31.1. Inspecting MCV Lists](functions-statistics.html#FUNCTIONS-STATISTICS-MCV)\n\nPostgreSQL provides a large number of functions and operators for the built-in data types. This chapter describes most of them, although additional special-purpose functions appear in relevant sections of the manual. Users can also define their own functions and operators, as described in [Part\u00a0V](server-programming.html). The psql commands `\\df` and `\\do` can be used to list all available functions and operators, respectively.\n\nThe notation used throughout this chapter to describe the argument and result data types of a function or operator is like this:\n\n```\n\nrepeat ( text, integer ) \u2192 text\n```\n\nwhich says that the function `repeat` takes one text and one integer argument and returns a result of type text. The right arrow is also used to indicate the result of an example, thus:\n\n```\n\nrepeat('Pg', 4) \u2192 PgPgPgPg\n```\n\nIf you are concerned about portability then note that most of the functions and operators described in this chapter, with the exception of the most trivial arithmetic and comparison operators and some explicitly marked functions, are not specified by the SQL standard. Some of this extended functionality is present in other SQL database management systems, and in many cases this functionality is compatible and consistent between the various implementations.\n\n[Prev](datatype-pseudo.html)[Up](sql.html)[Next](functions-logical.html)8.21. Pseudo-Types [Home](index.html) 9.1. Logical Operators\n\n## Submit correction\n\n If you see anything in the documentation that is not correct, does not match your experience with the particular feature or requires further clarification, please use [this form](/account/comments/new/18/functions.html/) to report a documentation issue. \n\n[Policies](/about/policies/) | [Code of Conduct](/about/policies/coc/) | [About PostgreSQL](/about/) | [Contact](/about/contact/)\n\nCopyright \u00a9 1996-2026 The PostgreSQL Global Development Group\n"}, {"path": "stdlib/mysql/commands.md", "category": "stdlib", "name": "stdlib/mysql/commands", "content": "# MySQL SQL Statements\n\nReference for MySQL 8.0 SQL statement syntax.\n\n## Data Definition Statements (DDL)\n\n### CREATE Statements\n```sql\nCREATE DATABASE [IF NOT EXISTS] db_name\n    [CHARACTER SET charset_name]\n    [COLLATE collation_name];\n\nCREATE TABLE [IF NOT EXISTS] tbl_name (\n    col_name data_type [NOT NULL | NULL] [DEFAULT value]\n        [AUTO_INCREMENT] [PRIMARY KEY] [COMMENT 'string'],\n    ...\n    [PRIMARY KEY (col_name, ...)],\n    [INDEX idx_name (col_name, ...)],\n    [FOREIGN KEY (col_name) REFERENCES tbl_name (col_name)]\n) [ENGINE=InnoDB] [DEFAULT CHARSET=utf8mb4];\n\nCREATE INDEX idx_name ON tbl_name (col_name [ASC | DESC], ...);\n\nCREATE VIEW view_name AS select_statement;\n\nCREATE PROCEDURE proc_name ([param_list])\nBEGIN\n    -- statements\nEND;\n\nCREATE FUNCTION func_name ([param_list]) RETURNS type\nBEGIN\n    -- statements\n    RETURN value;\nEND;\n\nCREATE TRIGGER trigger_name\n    {BEFORE | AFTER} {INSERT | UPDATE | DELETE}\n    ON tbl_name FOR EACH ROW\nBEGIN\n    -- statements\nEND;\n\nCREATE EVENT event_name\n    ON SCHEDULE {AT timestamp | EVERY interval}\n    DO statement;\n```\n\n### ALTER Statements\n```sql\nALTER DATABASE db_name\n    [CHARACTER SET charset_name]\n    [COLLATE collation_name];\n\nALTER TABLE tbl_name\n    ADD [COLUMN] col_name data_type [FIRST | AFTER col_name],\n    ADD INDEX idx_name (col_name),\n    ADD PRIMARY KEY (col_name),\n    ADD FOREIGN KEY (col_name) REFERENCES tbl (col),\n    DROP [COLUMN] col_name,\n    DROP INDEX idx_name,\n    DROP PRIMARY KEY,\n    DROP FOREIGN KEY fk_symbol,\n    MODIFY [COLUMN] col_name data_type,\n    CHANGE [COLUMN] old_name new_name data_type,\n    RENAME TO new_tbl_name,\n    ENGINE = engine_name,\n    AUTO_INCREMENT = value;\n```\n\n### DROP Statements\n```sql\nDROP DATABASE [IF EXISTS] db_name;\nDROP TABLE [IF EXISTS] tbl_name [, tbl_name] ...;\nDROP INDEX idx_name ON tbl_name;\nDROP VIEW [IF EXISTS] view_name;\nDROP PROCEDURE [IF EXISTS] proc_name;\nDROP FUNCTION [IF EXISTS] func_name;\nDROP TRIGGER [IF EXISTS] trigger_name;\nDROP EVENT [IF EXISTS] event_name;\n```\n\n### Other DDL\n```sql\nTRUNCATE [TABLE] tbl_name;\nRENAME TABLE tbl_name TO new_tbl_name [, tbl_name2 TO new_name2] ...;\n```\n\n## Data Manipulation Statements (DML)\n\n### SELECT\n```sql\nSELECT [ALL | DISTINCT]\n    select_expr [, select_expr] ...\n    [FROM table_references]\n    [WHERE where_condition]\n    [GROUP BY {col_name | expr} [ASC | DESC], ...]\n    [HAVING where_condition]\n    [ORDER BY {col_name | expr} [ASC | DESC], ...]\n    [LIMIT {[offset,] row_count | row_count OFFSET offset}]\n    [FOR UPDATE | FOR SHARE];\n\n-- Common Table Expressions (CTE)\nWITH cte_name [(col_name, ...)] AS (\n    SELECT ...\n)\nSELECT * FROM cte_name;\n\n-- Recursive CTE\nWITH RECURSIVE cte_name AS (\n    SELECT ...  -- anchor\n    UNION ALL\n    SELECT ... FROM cte_name WHERE ...  -- recursive\n)\nSELECT * FROM cte_name;\n```\n\n### JOIN Types\n```sql\nSELECT * FROM t1\n    INNER JOIN t2 ON t1.id = t2.id\n    LEFT [OUTER] JOIN t3 ON t2.id = t3.id\n    RIGHT [OUTER] JOIN t4 ON t3.id = t4.id\n    CROSS JOIN t5\n    NATURAL JOIN t6;\n```\n\n### INSERT\n```sql\nINSERT [INTO] tbl_name [(col_name, ...)]\n    VALUES (value, ...), (value, ...), ...;\n\nINSERT [INTO] tbl_name [(col_name, ...)]\n    SELECT ...;\n\nINSERT [INTO] tbl_name [(col_name, ...)]\n    VALUES (value, ...)\n    ON DUPLICATE KEY UPDATE col_name = value, ...;\n\nREPLACE [INTO] tbl_name [(col_name, ...)]\n    VALUES (value, ...);\n```\n\n### UPDATE\n```sql\nUPDATE tbl_name\n    SET col_name = value [, col_name = value] ...\n    [WHERE where_condition]\n    [ORDER BY ...]\n    [LIMIT row_count];\n\n-- Multi-table UPDATE\nUPDATE t1, t2\n    SET t1.col = value, t2.col = value\n    WHERE t1.id = t2.id;\n```\n\n### DELETE\n```sql\nDELETE FROM tbl_name\n    [WHERE where_condition]\n    [ORDER BY ...]\n    [LIMIT row_count];\n\n-- Multi-table DELETE\nDELETE t1, t2 FROM t1\n    INNER JOIN t2 ON t1.id = t2.id\n    WHERE condition;\n```\n\n### Set Operations\n```sql\nSELECT ... UNION [ALL | DISTINCT] SELECT ...;\nSELECT ... INTERSECT [ALL | DISTINCT] SELECT ...;\nSELECT ... EXCEPT [ALL | DISTINCT] SELECT ...;\n```\n\n## Transaction Statements\n\n```sql\nSTART TRANSACTION [READ ONLY | READ WRITE];\nBEGIN [WORK];\nCOMMIT [WORK];\nROLLBACK [WORK];\n\nSAVEPOINT savepoint_name;\nROLLBACK TO [SAVEPOINT] savepoint_name;\nRELEASE SAVEPOINT savepoint_name;\n\nSET autocommit = {0 | 1};\nSET TRANSACTION ISOLATION LEVEL\n    {READ UNCOMMITTED | READ COMMITTED | REPEATABLE READ | SERIALIZABLE};\n```\n\n## Locking Statements\n\n```sql\nLOCK TABLES tbl_name {READ | WRITE} [, tbl_name {READ | WRITE}] ...;\nUNLOCK TABLES;\n\nSELECT ... FOR UPDATE [NOWAIT | SKIP LOCKED];\nSELECT ... FOR SHARE [NOWAIT | SKIP LOCKED];\n```\n\n## Prepared Statements\n\n```sql\nPREPARE stmt_name FROM 'SELECT * FROM t WHERE id = ?';\nSET @id = 1;\nEXECUTE stmt_name USING @id;\nDEALLOCATE PREPARE stmt_name;\n```\n\n## Account Management\n\n```sql\nCREATE USER 'user'@'host' IDENTIFIED BY 'password';\nALTER USER 'user'@'host' IDENTIFIED BY 'new_password';\nDROP USER 'user'@'host';\n\nGRANT privilege_type ON db.tbl TO 'user'@'host';\nGRANT ALL PRIVILEGES ON db.* TO 'user'@'host';\nREVOKE privilege_type ON db.tbl FROM 'user'@'host';\n\nSHOW GRANTS FOR 'user'@'host';\nFLUSH PRIVILEGES;\n\nCREATE ROLE 'role_name';\nGRANT 'role_name' TO 'user'@'host';\nSET DEFAULT ROLE 'role_name' TO 'user'@'host';\n```\n\n## Table Maintenance\n\n```sql\nANALYZE TABLE tbl_name [, tbl_name] ...;\nCHECK TABLE tbl_name [, tbl_name] ...;\nCHECKSUM TABLE tbl_name [, tbl_name] ...;\nOPTIMIZE TABLE tbl_name [, tbl_name] ...;\nREPAIR TABLE tbl_name [, tbl_name] ...;\n```\n\n## SHOW Statements\n\n```sql\nSHOW DATABASES [LIKE 'pattern'];\nSHOW TABLES [FROM db_name] [LIKE 'pattern'];\nSHOW COLUMNS FROM tbl_name [FROM db_name];\nSHOW CREATE TABLE tbl_name;\nSHOW CREATE DATABASE db_name;\nSHOW INDEX FROM tbl_name;\nSHOW TABLE STATUS [FROM db_name];\n\nSHOW PROCESSLIST;\nSHOW FULL PROCESSLIST;\nSHOW STATUS [LIKE 'pattern'];\nSHOW VARIABLES [LIKE 'pattern'];\nSHOW WARNINGS;\nSHOW ERRORS;\nSHOW GRANTS [FOR user];\nSHOW ENGINE engine_name STATUS;\nSHOW ENGINES;\nSHOW PLUGINS;\n```\n\n## Utility Statements\n\n```sql\nDESCRIBE tbl_name;\nDESC tbl_name;\nEXPLAIN [FORMAT = {TRADITIONAL | JSON | TREE}] SELECT ...;\nEXPLAIN ANALYZE SELECT ...;\n\nUSE db_name;\nHELP 'search_string';\n\nSET @var_name = value;\nSET SESSION var_name = value;\nSET GLOBAL var_name = value;\n```\n\n## Compound Statements (Stored Programs)\n\n```sql\n-- Variables\nDECLARE var_name [, var_name] ... type [DEFAULT value];\nSET var_name = expr;\n\n-- Conditionals\nIF condition THEN\n    statements;\nELSEIF condition THEN\n    statements;\nELSE\n    statements;\nEND IF;\n\nCASE case_value\n    WHEN when_value THEN statements;\n    WHEN when_value THEN statements;\n    ELSE statements;\nEND CASE;\n\n-- Loops\nWHILE condition DO\n    statements;\nEND WHILE;\n\nREPEAT\n    statements;\nUNTIL condition\nEND REPEAT;\n\n[label:] LOOP\n    statements;\n    LEAVE label;\n    ITERATE label;\nEND LOOP [label];\n\n-- Cursors\nDECLARE cursor_name CURSOR FOR select_statement;\nOPEN cursor_name;\nFETCH cursor_name INTO var_name [, var_name] ...;\nCLOSE cursor_name;\n\n-- Handlers\nDECLARE {CONTINUE | EXIT} HANDLER FOR condition_value statement;\n```\n\nSee: https://dev.mysql.com/doc/refman/8.0/en/sql-statements.html\n"}, {"path": "stdlib/mysql/functions.md", "category": "stdlib", "name": "stdlib/mysql/functions", "content": "# MySQL Functions and Operators\n\nReference for MySQL 8.0 built-in functions and operators.\n\n## Operators\n\n### Arithmetic Operators\n| Operator | Description |\n|----------|-------------|\n| `+` | Addition |\n| `-` | Subtraction |\n| `*` | Multiplication |\n| `/` | Division |\n| `DIV` | Integer division |\n| `%`, `MOD` | Modulo |\n\n### Comparison Operators\n| Operator | Description |\n|----------|-------------|\n| `=` | Equal |\n| `<>`, `!=` | Not equal |\n| `<` | Less than |\n| `<=` | Less than or equal |\n| `>` | Greater than |\n| `>=` | Greater than or equal |\n| `<=>` | NULL-safe equal |\n| `BETWEEN ... AND ...` | Range check |\n| `IN (...)` | Set membership |\n| `IS NULL` | NULL check |\n| `IS NOT NULL` | Not NULL check |\n| `LIKE` | Pattern matching |\n| `REGEXP`, `RLIKE` | Regular expression |\n\n### Logical Operators\n| Operator | Description |\n|----------|-------------|\n| `AND`, `&&` | Logical AND |\n| `OR`, `\\|\\|` | Logical OR |\n| `NOT`, `!` | Logical NOT |\n| `XOR` | Logical XOR |\n\n### Bitwise Operators\n| Operator | Description |\n|----------|-------------|\n| `&` | Bitwise AND |\n| `\\|` | Bitwise OR |\n| `^` | Bitwise XOR |\n| `~` | Bitwise NOT |\n| `<<` | Left shift |\n| `>>` | Right shift |\n\n## String Functions\n\n```sql\n-- Length and position\nCHAR_LENGTH(str), CHARACTER_LENGTH(str)  -- Character count\nLENGTH(str)                               -- Byte length\nLOCATE(substr, str [, pos])              -- Find position\nPOSITION(substr IN str)                   -- Find position\nINSTR(str, substr)                       -- Find position\n\n-- Substring\nSUBSTRING(str, pos [, len])              -- Extract substring\nSUBSTR(str, pos [, len])                 -- Alias for SUBSTRING\nLEFT(str, len)                           -- Left characters\nRIGHT(str, len)                          -- Right characters\nMID(str, pos, len)                       -- Alias for SUBSTRING\n\n-- Modification\nCONCAT(str1, str2, ...)                  -- Concatenate strings\nCONCAT_WS(sep, str1, str2, ...)          -- Concatenate with separator\nINSERT(str, pos, len, newstr)            -- Insert/replace\nREPLACE(str, from_str, to_str)           -- Replace occurrences\nREVERSE(str)                             -- Reverse string\n\n-- Case conversion\nUPPER(str), UCASE(str)                   -- Uppercase\nLOWER(str), LCASE(str)                   -- Lowercase\n\n-- Trimming and padding\nTRIM([{BOTH | LEADING | TRAILING} [remstr] FROM] str)\nLTRIM(str)                               -- Left trim spaces\nRTRIM(str)                               -- Right trim spaces\nLPAD(str, len, padstr)                   -- Left pad\nRPAD(str, len, padstr)                   -- Right pad\n\n-- Other\nREPEAT(str, count)                       -- Repeat string\nSPACE(n)                                 -- Generate spaces\nFORMAT(x, d [, locale])                  -- Format number\nASCII(str)                               -- ASCII value of first char\nCHAR(n, ... [USING charset])             -- Char from ASCII\nORD(str)                                 -- Character code\nHEX(str), UNHEX(str)                     -- Hex encoding\n```\n\n## Numeric Functions\n\n```sql\n-- Basic math\nABS(x)                    -- Absolute value\nSIGN(x)                   -- Sign (-1, 0, 1)\nMOD(n, m)                 -- Modulo\nPOW(x, y), POWER(x, y)    -- Exponentiation\nSQRT(x)                   -- Square root\nEXP(x)                    -- e^x\nLN(x)                     -- Natural logarithm\nLOG(x), LOG(b, x)         -- Logarithm\nLOG10(x), LOG2(x)         -- Base 10/2 logarithm\n\n-- Rounding\nCEIL(x), CEILING(x)       -- Round up\nFLOOR(x)                  -- Round down\nROUND(x [, d])            -- Round to d decimals\nTRUNCATE(x, d)            -- Truncate to d decimals\n\n-- Trigonometry\nSIN(x), COS(x), TAN(x)\nASIN(x), ACOS(x), ATAN(x), ATAN2(y, x)\nCOT(x)\nDEGREES(x), RADIANS(x)\nPI()\n\n-- Random\nRAND([seed])              -- Random 0.0-1.0\n\n-- Other\nGREATEST(val1, val2, ...) -- Maximum value\nLEAST(val1, val2, ...)    -- Minimum value\nCONV(n, from_base, to_base) -- Base conversion\nBIN(n), OCT(n)            -- Binary/octal representation\n```\n\n## Date and Time Functions\n\n```sql\n-- Current date/time\nNOW()                     -- Current datetime\nCURRENT_TIMESTAMP()       -- Alias for NOW()\nSYSDATE()                 -- System time (differs in stored programs)\nCURDATE(), CURRENT_DATE() -- Current date\nCURTIME(), CURRENT_TIME() -- Current time\nUTC_DATE(), UTC_TIME(), UTC_TIMESTAMP()\n\n-- Date/time creation\nDATE(expr)                -- Extract date\nTIME(expr)                -- Extract time\nTIMESTAMP(expr)           -- Datetime from expression\nMAKEDATE(year, dayofyear) -- Create date\nMAKETIME(hour, min, sec)  -- Create time\nSTR_TO_DATE(str, format)  -- Parse date string\n\n-- Date/time extraction\nYEAR(date), MONTH(date), DAY(date), DAYOFMONTH(date)\nHOUR(time), MINUTE(time), SECOND(time), MICROSECOND(time)\nDAYOFWEEK(date)           -- 1=Sunday, 7=Saturday\nDAYOFYEAR(date)           -- 1-366\nWEEK(date [, mode])       -- Week number\nWEEKDAY(date)             -- 0=Monday, 6=Sunday\nQUARTER(date)             -- 1-4\nEXTRACT(unit FROM datetime)\n\n-- Date/time formatting\nDATE_FORMAT(date, format) -- Format date\nTIME_FORMAT(time, format) -- Format time\nGET_FORMAT(date|time|datetime, 'EUR'|'USA'|'ISO'|...) -- Get format string\n\n-- Format specifiers: %Y (4-digit year), %y (2-digit), %m (month 01-12),\n-- %d (day 01-31), %H (hour 00-23), %i (minute), %s (second),\n-- %W (weekday name), %M (month name), %j (day of year)\n\n-- Date arithmetic\nDATE_ADD(date, INTERVAL expr unit)\nDATE_SUB(date, INTERVAL expr unit)\nADDDATE(date, INTERVAL expr unit)\nSUBDATE(date, INTERVAL expr unit)\nADDTIME(expr1, expr2)\nSUBTIME(expr1, expr2)\nTIMESTAMPADD(unit, interval, datetime)\nDATEDIFF(date1, date2)    -- Days between dates\nTIMEDIFF(time1, time2)    -- Time difference\nTIMESTAMPDIFF(unit, datetime1, datetime2)\n\n-- Units: MICROSECOND, SECOND, MINUTE, HOUR, DAY, WEEK, MONTH, QUARTER, YEAR\n\n-- Other\nLAST_DAY(date)            -- Last day of month\nDAYNAME(date)             -- Weekday name\nMONTHNAME(date)           -- Month name\nFROM_UNIXTIME(timestamp)  -- From Unix timestamp\nUNIX_TIMESTAMP([date])    -- To Unix timestamp\nCONVERT_TZ(dt, from_tz, to_tz)\n```\n\n## Aggregate Functions\n\n```sql\nCOUNT(*)                  -- Count all rows\nCOUNT(expr)               -- Count non-NULL\nCOUNT(DISTINCT expr)      -- Count distinct values\nSUM(expr)                 -- Sum\nAVG(expr)                 -- Average\nMIN(expr)                 -- Minimum\nMAX(expr)                 -- Maximum\n\nGROUP_CONCAT([DISTINCT] expr [ORDER BY ...] [SEPARATOR str])\nJSON_ARRAYAGG(expr)       -- Aggregate to JSON array\nJSON_OBJECTAGG(key, value) -- Aggregate to JSON object\n\n-- Statistical\nSTD(expr), STDDEV(expr), STDDEV_POP(expr)  -- Population std dev\nSTDDEV_SAMP(expr)         -- Sample std dev\nVAR_POP(expr), VARIANCE(expr)  -- Population variance\nVAR_SAMP(expr)            -- Sample variance\nBIT_AND(expr), BIT_OR(expr), BIT_XOR(expr)  -- Bitwise aggregates\n```\n\n## Window Functions\n\n```sql\n-- Ranking\nROW_NUMBER() OVER (...)   -- Sequential row number\nRANK() OVER (...)         -- Rank with gaps\nDENSE_RANK() OVER (...)   -- Rank without gaps\nNTILE(n) OVER (...)       -- Divide into n groups\nPERCENT_RANK() OVER (...) -- Relative rank (0-1)\nCUME_DIST() OVER (...)    -- Cumulative distribution\n\n-- Value access\nLAG(expr [, n [, default]]) OVER (...)   -- Previous row value\nLEAD(expr [, n [, default]]) OVER (...)  -- Next row value\nFIRST_VALUE(expr) OVER (...)  -- First value in frame\nLAST_VALUE(expr) OVER (...)   -- Last value in frame\nNTH_VALUE(expr, n) OVER (...) -- Nth value in frame\n\n-- Window specification\nOVER (\n    [PARTITION BY expr, ...]\n    [ORDER BY expr [ASC|DESC], ...]\n    [frame_clause]\n)\n\n-- Frame clause\n{ROWS | RANGE | GROUPS} BETWEEN\n    {UNBOUNDED PRECEDING | n PRECEDING | CURRENT ROW}\n    AND\n    {CURRENT ROW | n FOLLOWING | UNBOUNDED FOLLOWING}\n```\n\n## Flow Control Functions\n\n```sql\nIF(expr, val_if_true, val_if_false)\nIFNULL(expr, alt_value)   -- Return alt if expr is NULL\nNULLIF(expr1, expr2)      -- Return NULL if equal\nCOALESCE(val1, val2, ...) -- First non-NULL value\n\nCASE expr\n    WHEN val1 THEN result1\n    WHEN val2 THEN result2\n    ELSE default_result\nEND\n\nCASE\n    WHEN condition1 THEN result1\n    WHEN condition2 THEN result2\n    ELSE default_result\nEND\n```\n\n## JSON Functions\n\n```sql\n-- Creation\nJSON_ARRAY(val1, val2, ...)\nJSON_OBJECT(key1, val1, key2, val2, ...)\nJSON_QUOTE(str)\n\n-- Extraction\nJSON_EXTRACT(doc, path, ...)\ndoc->'$.path'             -- Shorthand for JSON_EXTRACT\ndoc->>'$.path'            -- Extract and unquote\nJSON_KEYS(doc [, path])\nJSON_VALUE(doc, path)\n\n-- Modification\nJSON_SET(doc, path, val, ...)     -- Set (insert or update)\nJSON_INSERT(doc, path, val, ...)  -- Insert only\nJSON_REPLACE(doc, path, val, ...) -- Update only\nJSON_REMOVE(doc, path, ...)\nJSON_ARRAY_APPEND(doc, path, val, ...)\nJSON_ARRAY_INSERT(doc, path, val, ...)\nJSON_MERGE_PATCH(doc1, doc2, ...)\nJSON_MERGE_PRESERVE(doc1, doc2, ...)\n\n-- Search\nJSON_CONTAINS(doc, val [, path])\nJSON_CONTAINS_PATH(doc, 'one'|'all', path, ...)\nJSON_SEARCH(doc, 'one'|'all', search_str [, escape [, path, ...]])\nMEMBER OF(val MEMBER OF(json_array))\n\n-- Attributes\nJSON_TYPE(doc)\nJSON_VALID(val)\nJSON_LENGTH(doc [, path])\nJSON_DEPTH(doc)\n\n-- Table functions\nJSON_TABLE(doc, path COLUMNS(...)) -- Convert JSON to relational\n```\n\n## Encryption and Compression Functions\n\n```sql\n-- Hashing\nMD5(str)                  -- MD5 hash\nSHA1(str), SHA(str)       -- SHA-1 hash\nSHA2(str, hash_length)    -- SHA-2 (224, 256, 384, 512)\n\n-- Encryption (deprecated, use SSL/TLS instead)\nAES_ENCRYPT(str, key_str [, init_vector [, kdf_name [, salt [, iterations]]]])\nAES_DECRYPT(crypt_str, key_str [, ...])\nRANDOM_BYTES(len)\n\n-- Compression\nCOMPRESS(str)\nUNCOMPRESS(compressed_str)\nUNCOMPRESSED_LENGTH(compressed_str)\n```\n\n## Information Functions\n\n```sql\nDATABASE(), SCHEMA()      -- Current database\nUSER(), CURRENT_USER()    -- Current user\nSESSION_USER(), SYSTEM_USER()\nVERSION()                 -- MySQL version\nCONNECTION_ID()           -- Connection ID\nLAST_INSERT_ID()          -- Last AUTO_INCREMENT value\nROW_COUNT()               -- Rows affected by last statement\nFOUND_ROWS()              -- Rows found (with SQL_CALC_FOUND_ROWS)\nBENCHMARK(count, expr)    -- Performance testing\nCHARSET(str)              -- Character set\nCOLLATION(str)            -- Collation\nCOERCIBILITY(str)         -- Collation coercibility\n```\n\n## Cast Functions\n\n```sql\nCAST(expr AS type)\nCONVERT(expr, type)\nCONVERT(expr USING charset)\n\n-- Types: BINARY, CHAR, DATE, DATETIME, DECIMAL, DOUBLE, FLOAT,\n--        JSON, NCHAR, SIGNED, TIME, UNSIGNED, YEAR\n```\n\n## Full-Text Search Functions\n\n```sql\n-- Natural language search\nMATCH(col1, col2, ...) AGAINST('search terms')\nMATCH(col1, col2, ...) AGAINST('search terms' IN NATURAL LANGUAGE MODE)\n\n-- Boolean search\nMATCH(col1, col2, ...) AGAINST('+required -excluded' IN BOOLEAN MODE)\n-- Operators: + (must include), - (must exclude), > (increase relevance),\n--           < (decrease relevance), () (grouping), ~ (negate relevance),\n--           * (wildcard), \"\" (phrase)\n\n-- Query expansion\nMATCH(col1, col2, ...) AGAINST('search' WITH QUERY EXPANSION)\n```\n\n## Miscellaneous Functions\n\n```sql\nUUID()                    -- Generate UUID\nUUID_SHORT()              -- Short UUID (64-bit)\nUUID_TO_BIN(uuid [, swap_flag])\nBIN_TO_UUID(binary_uuid [, swap_flag])\nIS_UUID(string_uuid)\n\nSLEEP(seconds)            -- Pause execution\nGET_LOCK(str, timeout)    -- Named lock\nIS_FREE_LOCK(str)\nIS_USED_LOCK(str)\nRELEASE_LOCK(str)\nRELEASE_ALL_LOCKS()\n\nINET_ATON(addr)           -- IPv4 to integer\nINET_NTOA(num)            -- Integer to IPv4\nINET6_ATON(addr)          -- IPv6 to binary\nINET6_NTOA(binary)        -- Binary to IPv6\nIS_IPV4(expr), IS_IPV6(expr)\n\nVALUES(col)               -- Inserted value (in ON DUPLICATE KEY)\nDEFAULT(col)              -- Default value of column\n```\n\nSee: https://dev.mysql.com/doc/refman/8.0/en/functions.html\n"}, {"path": "stdlib/sqlserver/commands.md", "category": "stdlib", "name": "stdlib/sqlserver/commands", "content": "Table of contents Exit editor modeAsk LearnAsk LearnFocus modeTable of contents[Read in English](#)AddAdd to plan[Edit](https://github.com/MicrosoftDocs/sql-docs/blob/live/docs/t-sql/language-reference.md)\n\n#### Share via\n\n[Facebook](#)[x.com](#)[LinkedIn](#)[Email](#)Print\n\nNote\n\n Access to this page requires authorization. You can try [signing in](#) or changing directories. \n\n Access to this page requires authorization. You can try changing directories. \n\n# Transact-SQL reference (Database Engine)\n\nFeedback Summarize this article for me \n\n##  In this article \n\nApplies to:[SQL Server](../sql-server/sql-docs-navigation-guide?view=sql-server-ver16#applies-to)[Azure SQL Database](../sql-server/sql-docs-navigation-guide?view=sql-server-ver16#applies-to)[Azure SQL Managed Instance](../sql-server/sql-docs-navigation-guide?view=sql-server-ver16#applies-to)[Azure Synapse Analytics](../sql-server/sql-docs-navigation-guide?view=sql-server-ver16#applies-to)[Analytics Platform System (PDW)](../sql-server/sql-docs-navigation-guide?view=sql-server-ver16#applies-to)[SQL analytics endpoint in Microsoft Fabric](../sql-server/sql-docs-navigation-guide?view=sql-server-ver16#applies-to)[Warehouse in Microsoft Fabric](../sql-server/sql-docs-navigation-guide?view=sql-server-ver16#applies-to)[SQL database in Microsoft Fabric](../sql-server/sql-docs-navigation-guide?view=sql-server-ver16#applies-to)\n\nThis article gives the basics about how to find and use the Microsoft Transact-SQL (T-SQL) reference articles. T-SQL is central to using Microsoft SQL products and services. All tools and applications that communicate with a SQL Server database do so by sending T-SQL commands.\n\n## T-SQL compliance with the SQL standard\n\nFor detailed technical documents about how certain standards are implemented in SQL Server, see the [Microsoft SQL Server Standards Support documentation](/en-us/openspecs/sql_standards/ms-sqlstandlp/89fb00b1-4b9e-4296-92ce-a2b3f7ca01d2).\n\n## Tools that use T-SQL\n\nSome of the Microsoft tools that issue T-SQL commands are:\n\n- [SQL Server Management Studio (SSMS)](/en-us/ssms/sql-server-management-studio-ssms)\n- [SQL Server Data Tools (SSDT)](../ssdt/download-sql-server-data-tools-ssdt?view=sql-server-ver16)\n- [sqlcmd](../tools/sqlcmd/sqlcmd-utility?view=sql-server-ver16)\n\n## Locate the Transact-SQL reference articles\n\nTo find T-SQL articles, use search at the top right of this page, or use the table of contents on the left side of the page. You can also type a T-SQL key word in the Management Studio Query Editor window, and press F1.\n\n## Common Transact-SQL statements\n\n- [SELECT](queries/select-transact-sql?view=sql-server-ver16)\n- [INSERT](statements/insert-transact-sql?view=sql-server-ver16)\n- [UPDATE](queries/update-transact-sql?view=sql-server-ver16)\n- [DELETE](statements/delete-transact-sql?view=sql-server-ver16)\n\nFor more information, see [Transact-SQL statements](statements/statements?view=sql-server-ver16).\n\n## Find system views\n\nTo find the system tables, views, functions, and procedures, see these links, which are in the [Databases](../relational-databases/databases/databases?view=sql-server-ver16) section of the SQL documentation.\n\n- [System catalog views](../relational-databases/system-catalog-views/catalog-views-transact-sql?view=sql-server-ver16)\n- [System compatibility views](../relational-databases/system-compatibility-views/system-compatibility-views-transact-sql?view=sql-server-ver16)\n- [System dynamic management views](../relational-databases/system-dynamic-management-views/system-dynamic-management-views?view=sql-server-ver16)\n- [System functions by category](../relational-databases/system-functions/system-functions-category-transact-sql?view=sql-server-ver16)\n- [System information schema views](../relational-databases/system-information-schema-views/system-information-schema-views-transact-sql?view=sql-server-ver16)\n- [System stored procedures](../relational-databases/system-stored-procedures/system-stored-procedures-transact-sql?view=sql-server-ver16)\n- [System tables](../relational-databases/system-tables/system-tables-transact-sql?view=sql-server-ver16)\n\n## \"Applies to\" references\n\nThe T-SQL reference articles encompass multiple versions of SQL Server, starting with SQL Server 2008 (10.0.x), and the other Azure SQL services. Near the top of each article, is a section that indicates which products and services support subject of the article.\n\nFor example, this article applies to all versions, and has the following label.\n\nApplies to:[SQL Server](../sql-server/sql-docs-navigation-guide?view=sql-server-ver16#applies-to)[Azure SQL Database](../sql-server/sql-docs-navigation-guide?view=sql-server-ver16#applies-to)[Azure SQL Managed Instance](../sql-server/sql-docs-navigation-guide?view=sql-server-ver16#applies-to)[Azure Synapse Analytics](../sql-server/sql-docs-navigation-guide?view=sql-server-ver16#applies-to)[Analytics Platform System (PDW)](../sql-server/sql-docs-navigation-guide?view=sql-server-ver16#applies-to)\n\nAnother example, the following label indicates an article that applies only to Azure Synapse Analytics and Parallel Data Warehouse.\n\nApplies to:[Azure Synapse Analytics](../sql-server/sql-docs-navigation-guide?view=sql-server-ver16#applies-to)[Analytics Platform System (PDW)](../sql-server/sql-docs-navigation-guide?view=sql-server-ver16#applies-to)\n\nIn some cases, the article is used by a product or service, but all of the arguments aren't supported. In this case, other Applies to sections are inserted into the appropriate argument descriptions in the body of the article.\n\nFor more information, see [SQL Server docs navigation guide](../sql-server/sql-docs-navigation-guide?view=sql-server-ver16#applies-to).\n\n## Get help from Microsoft Q & A\n\nFor online help, see the [Microsoft Q & A Transact-SQL Forum](/en-us/answers/tags/191/sql-server).\n\n## See other language references\n\nThe SQL docs include these other language references:\n\n- [XQuery language reference (SQL Server)](../xquery/xquery-language-reference-sql-server?view=sql-server-ver16)\n- [Integration Services language reference](../integration-services/integration-services-language-reference?view=sql-server-ver16)\n- [Replication language reference](../relational-databases/replication/replication-language-reference?view=sql-server-ver16)\n- [Multidimensional Expressions (MDX) reference](../mdx/multidimensional-expressions-mdx-reference?view=sql-server-ver16)\n\n## Related content\n\n- [Tutorial: Write Transact-SQL statements](tutorial-writing-transact-sql-statements?view=sql-server-ver16)\n- [Transact-SQL syntax conventions (Transact-SQL)](language-elements/transact-sql-syntax-conventions-transact-sql?view=sql-server-ver16)\n\n## Feedback\n\n Was this page helpful? \n\nYesNoNo\n\n Need help with this topic? \n\n Want to try using Ask Learn to clarify or guide you through this topic? \n\nAsk LearnAsk Learn Suggest a fix? \n\n##  Additional resources \n\n- Last updated on  2025-11-18\n"}, {"path": "stdlib/sqlserver/functions.md", "category": "stdlib", "name": "stdlib/sqlserver/functions", "content": "Table of contents Exit editor modeAsk LearnAsk LearnFocus modeTable of contents[Read in English](#)AddAdd to plan[Edit](https://github.com/MicrosoftDocs/sql-docs/blob/live/docs/t-sql/functions/functions.md)\n\n#### Share via\n\n[Facebook](#)[x.com](#)[LinkedIn](#)[Email](#)Print\n\nNote\n\n Access to this page requires authorization. You can try [signing in](#) or changing directories. \n\n Access to this page requires authorization. You can try changing directories. \n\n# What are the SQL database functions?\n\nFeedback Summarize this article for me \n\n##  In this article \n\nApplies to:[SQL Server](../../sql-server/sql-docs-navigation-guide?view=sql-server-ver16#applies-to)[Azure SQL Database](../../sql-server/sql-docs-navigation-guide?view=sql-server-ver16#applies-to)[Azure SQL Managed Instance](../../sql-server/sql-docs-navigation-guide?view=sql-server-ver16#applies-to)[Azure Synapse Analytics](../../sql-server/sql-docs-navigation-guide?view=sql-server-ver16#applies-to)[Analytics Platform System (PDW)](../../sql-server/sql-docs-navigation-guide?view=sql-server-ver16#applies-to)[SQL analytics endpoint in Microsoft Fabric](../../sql-server/sql-docs-navigation-guide?view=sql-server-ver16#applies-to)[Warehouse in Microsoft Fabric](../../sql-server/sql-docs-navigation-guide?view=sql-server-ver16#applies-to)[SQL database in Microsoft Fabric](../../sql-server/sql-docs-navigation-guide?view=sql-server-ver16#applies-to)\n\nLearn about the categories of built-in functions you can use with SQL databases. You can use the built-in functions or create your own user-defined functions.\n\n## Aggregate functions\n\nAggregate functions perform a calculation on a set of values and return a single value. They're allowed in the select list or the `HAVING` clause of a `SELECT` statement. You can use an aggregation in combination with the `GROUP BY` clause to calculate the aggregation on categories of rows. Use the `OVER` clause to calculate the aggregation on a specific range of value. The `OVER` clause can't follow the `GROUPING` or `GROUPING_ID` aggregations.\n\nAll aggregate functions are deterministic, which means they always return the same value when they run on the same input values. For more information, see [Deterministic and nondeterministic functions](../../relational-databases/user-defined-functions/deterministic-and-nondeterministic-functions?view=sql-server-ver16).\n\n## Analytic functions\n\nAnalytic functions compute an aggregate value based on a group of rows. However, unlike aggregate functions, analytic functions can return multiple rows for each group. You can use analytic functions to compute moving averages, running totals, percentages, or top-N results within a group.\n\n## Bit manipulation functions\n\nApplies to: SQL Server 2022 (16.x) and later versions, Azure SQL Managed Instance, Azure SQL Database, SQL database in Microsoft Fabric\n\nBit manipulation functions allow you to process and store data more efficiently than with individual bits. For more information, see [Bit manipulation functions](bit-manipulation-functions-overview?view=sql-server-ver16).\n\n## Ranking functions\n\nRanking functions return a ranking value for each row in a partition. Depending on the function that is used, some rows might receive the same value as other rows. Ranking functions are nondeterministic.\n\n## Rowset functions\n\nRowset functions Return an object that can be used like table references in a SQL statement.\n\n## Scalar functions\n\nOperate on a single value and then return a single value. Scalar functions can be used wherever an expression is valid.\n\n### Categories of scalar functions\n\nFunction categoryDescription[Configuration Functions](configuration-functions-transact-sql?view=sql-server-ver16)Return information about the current configuration.[Conversion Functions](conversion-functions-transact-sql?view=sql-server-ver16)Support data type casting and converting.[Cursor Functions](cursor-functions-transact-sql?view=sql-server-ver16)Return information about cursors.[Date and Time Data Types and Functions](date-and-time-data-types-and-functions-transact-sql?view=sql-server-ver16)Perform operations on a date and time input values and return string, numeric, or date and time values.[Graph Functions](graph-functions-transact-sql?view=sql-server-ver16)Perform operations to convert to and from character representations of graph node and edge IDs.[JSON Functions](json-functions-transact-sql?view=sql-server-ver16)Validate, query, or change JSON data.[Logical Functions](logical-functions-choose-transact-sql?view=sql-server-ver16)Perform logical operations.[Mathematical Functions](mathematical-functions-transact-sql?view=sql-server-ver16)Perform calculations based on input values provided as parameters to the functions, and return numeric values.[Metadata Functions](metadata-functions-transact-sql?view=sql-server-ver16)Return information about the database and database objects.[Security Functions](security-functions-transact-sql?view=sql-server-ver16)Return information about users and roles.[String Functions](string-functions-transact-sql?view=sql-server-ver16)Perform operations on a string (char or varchar) input value and return a string or numeric value.[System Functions](../../relational-databases/system-functions/system-functions-category-transact-sql?view=sql-server-ver16)Perform operations and return information about values, objects, and settings in an instance of SQL Server.[System Statistical Functions](system-statistical-functions-transact-sql?view=sql-server-ver16)Return statistical information about the system.[Text and Image Functions](text-and-image-functions-textptr-transact-sql?view=sql-server-ver16)Perform operations on text or image input values or columns, and return information about the value.\n\n## Function determinism\n\nSQL Server built-in functions are either deterministic or nondeterministic. Functions are deterministic when they always return the same result anytime they're called by using a specific set of input values. Functions are nondeterministic when they could return different results every time they're called, even with the same specific set of input values. For more information, see [Deterministic and nondeterministic functions](../../relational-databases/user-defined-functions/deterministic-and-nondeterministic-functions?view=sql-server-ver16)\n\n## Function collation\n\nFunctions that take a character string input and return a character string output use the collation of the input string for the output.\n\nFunctions that take non-character inputs and return a character string use the default collation of the current database for the output.\n\nFunctions that take multiple character string inputs and return a character string use the rules of collation precedence to set the collation of the output string. For more information, see [Collation precedence](../statements/collation-precedence-transact-sql?view=sql-server-ver16).\n\n## Limitations\n\nFor information on limitations of function types and platforms, see [CREATE FUNCTION (Transact-SQL)](../statements/create-function-transact-sql?view=sql-server-ver16).\n\n## Related content\n\n- [CREATE FUNCTION (Transact-SQL)](../statements/create-function-transact-sql?view=sql-server-ver16)\n- [Deterministic and nondeterministic functions](../../relational-databases/user-defined-functions/deterministic-and-nondeterministic-functions?view=sql-server-ver16)\n\n## Feedback\n\n Was this page helpful? \n\nYesNoNo\n\n Need help with this topic? \n\n Want to try using Ask Learn to clarify or guide you through this topic? \n\nAsk LearnAsk Learn Suggest a fix? \n\n##  Additional resources \n\n- Last updated on  2025-11-18\n"}, {"path": "spec.md", "category": "spec", "name": "spec", "content": "# SQL Overview\nVersion: vendor\n\nSource: https://www.postgresql.org/docs/current/sql.html\nSource: https://dev.mysql.com/doc/refman/8.0/en/sql-statements.html\nSource: https://www.sqlite.org/lang.html\nSource: https://learn.microsoft.com/en-us/sql/t-sql/language-reference?view=sql-server-ver16\n\n\nThe SQL standard is copyrighted; use vendor references for authoritative details.\n\n- PostgreSQL: https://www.postgresql.org/docs/current/sql.html\n- MySQL: https://dev.mysql.com/doc/refman/8.0/en/sql-statements.html\n- SQLite: https://www.sqlite.org/lang.html\n- SQL Server (T-SQL): https://learn.microsoft.com/en-us/sql/t-sql/language-reference?view=sql-server-ver16\n"}, {"path": "linters/sqlfluff/overview.md", "category": "linters", "name": "linters/sqlfluff/overview", "content": "# sqlfluff Rules\nVersion: 3.5.0\n\nSource: https://docs.sqlfluff.com/en/stable/rules.html\n\n\nSee: https://docs.sqlfluff.com/en/stable/rules.html\n"}]}